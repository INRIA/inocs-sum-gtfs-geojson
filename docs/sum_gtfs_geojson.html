<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.3"/>
    <title>sum_gtfs_geojson API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>




            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#SharedMobilityManager">SharedMobilityManager</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SharedMobilityManager.__init__">SharedMobilityManager</a>
                        </li>
                        <li>
                                <a class="variable" href="#SharedMobilityManager.city">city</a>
                        </li>
                        <li>
                                <a class="variable" href="#SharedMobilityManager.data_types">data_types</a>
                        </li>
                        <li>
                                <a class="variable" href="#SharedMobilityManager.restrict_country_boundaries">restrict_country_boundaries</a>
                        </li>
                        <li>
                                <a class="variable" href="#SharedMobilityManager.distance_radius_km">distance_radius_km</a>
                        </li>
                        <li>
                                <a class="variable" href="#SharedMobilityManager.grid_resolution">grid_resolution</a>
                        </li>
                        <li>
                                <a class="variable" href="#SharedMobilityManager.loader">loader</a>
                        </li>
                        <li>
                                <a class="variable" href="#SharedMobilityManager.geojson_output_path">geojson_output_path</a>
                        </li>
                        <li>
                                <a class="variable" href="#SharedMobilityManager.data">data</a>
                        </li>
                        <li>
                                <a class="function" href="#SharedMobilityManager.save_to_geojson">save_to_geojson</a>
                        </li>
                        <li>
                                <a class="function" href="#SharedMobilityManager.get_data">get_data</a>
                        </li>
                        <li>
                                <a class="function" href="#SharedMobilityManager.get_loader">get_loader</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LivingLabsCity">LivingLabsCity</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#LivingLabsCity.GENEVA">GENEVA</a>
                        </li>
                        <li>
                                <a class="variable" href="#LivingLabsCity.LARNACA">LARNACA</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#DataType">DataType</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#DataType.STOPS">STOPS</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataType.ITINERARIES">ITINERARIES</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataType.BIKE_STATIONS">BIKE_STATIONS</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataType.RIDERSHIP">RIDERSHIP</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataType.BIKE_TRIPS">BIKE_TRIPS</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataType.HEX_GRID">HEX_GRID</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GeoToolkit">GeoToolkit</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GeoToolkit.generate_hex_grid">generate_hex_grid</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UrbanMobilitySystem">UrbanMobilitySystem</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#UrbanMobilitySystem.public_transport">public_transport</a>
                        </li>
                        <li>
                                <a class="variable" href="#UrbanMobilitySystem.bike_stations">bike_stations</a>
                        </li>
                        <li>
                                <a class="variable" href="#UrbanMobilitySystem.ridership">ridership</a>
                        </li>
                        <li>
                                <a class="variable" href="#UrbanMobilitySystem.bike_trips">bike_trips</a>
                        </li>
                        <li>
                                <a class="variable" href="#UrbanMobilitySystem.hex_grid">hex_grid</a>
                        </li>
                        <li>
                                <a class="function" href="#UrbanMobilitySystem.save_to_geojson">save_to_geojson</a>
                        </li>
                        <li>
                                <a class="function" href="#UrbanMobilitySystem.stops_to_geojson">stops_to_geojson</a>
                        </li>
                        <li>
                                <a class="function" href="#UrbanMobilitySystem.itineraries_to_geojson">itineraries_to_geojson</a>
                        </li>
                        <li>
                                <a class="function" href="#UrbanMobilitySystem.bike_stations_to_geojson">bike_stations_to_geojson</a>
                        </li>
                        <li>
                                <a class="function" href="#UrbanMobilitySystem.ridership_to_geojson">ridership_to_geojson</a>
                        </li>
                        <li>
                                <a class="function" href="#UrbanMobilitySystem.bike_trips_to_geojson">bike_trips_to_geojson</a>
                        </li>
                        <li>
                                <a class="function" href="#UrbanMobilitySystem.hex_grid_to_geojson">hex_grid_to_geojson</a>
                        </li>
                        <li>
                                <a class="variable" href="#UrbanMobilitySystem.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Stop">Stop</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Stop.stop_id">stop_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Stop.stop_name">stop_name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Stop.stop_desc">stop_desc</a>
                        </li>
                        <li>
                                <a class="variable" href="#Stop.stop_lat">stop_lat</a>
                        </li>
                        <li>
                                <a class="variable" href="#Stop.stop_lon">stop_lon</a>
                        </li>
                        <li>
                                <a class="variable" href="#Stop.zone_id">zone_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Stop.stop_url">stop_url</a>
                        </li>
                        <li>
                                <a class="variable" href="#Stop.location_type">location_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Stop.parent_station">parent_station</a>
                        </li>
                        <li>
                                <a class="variable" href="#Stop.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Route">Route</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Route.route_id">route_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Route.agency_id">agency_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Route.route_short_name">route_short_name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Route.route_long_name">route_long_name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Route.route_desc">route_desc</a>
                        </li>
                        <li>
                                <a class="variable" href="#Route.route_type">route_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Route.route_url">route_url</a>
                        </li>
                        <li>
                                <a class="variable" href="#Route.route_color">route_color</a>
                        </li>
                        <li>
                                <a class="variable" href="#Route.route_text_color">route_text_color</a>
                        </li>
                        <li>
                                <a class="variable" href="#Route.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Trip">Trip</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Trip.route_id">route_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trip.service_id">service_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trip.trip_id">trip_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trip.trip_headsign">trip_headsign</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trip.trip_short_name">trip_short_name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trip.direction_id">direction_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trip.block_id">block_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trip.shape_id">shape_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Trip.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Agency">Agency</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Agency.agency_id">agency_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agency.agency_name">agency_name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agency.agency_url">agency_url</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agency.agency_timezone">agency_timezone</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agency.agency_lang">agency_lang</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agency.agency_phone">agency_phone</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agency.agency_fare_url">agency_fare_url</a>
                        </li>
                        <li>
                                <a class="variable" href="#Agency.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#StationInfoStatus">StationInfoStatus</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#StationInfoStatus.history">history</a>
                        </li>
                        <li>
                                <a class="variable" href="#StationInfoStatus.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#BikeTrip">BikeTrip</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#BikeTrip.trip_id">trip_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.rental_id">rental_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.vehicle_type">vehicle_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.trip_started_at_utc">trip_started_at_utc</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.trip_ended_at_utc">trip_ended_at_utc</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.latitude_start">latitude_start</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.longitude_start">longitude_start</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.latitude_end">latitude_end</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.longitude_end">longitude_end</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.distance_in_km">distance_in_km</a>
                        </li>
                        <li>
                                <a class="function" href="#BikeTrip.parse_trip_start">parse_trip_start</a>
                        </li>
                        <li>
                                <a class="function" href="#BikeTrip.parse_trip_end">parse_trip_end</a>
                        </li>
                        <li>
                                <a class="variable" href="#BikeTrip.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Ridership">Ridership</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Ridership.date">date</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.timeslot">timeslot</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.day_index">day_index</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.line_type">line_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.schedule_type">schedule_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.line">line</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.stop_name">stop_name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.stop_code">stop_code</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.boardings">boardings</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.alightings">alightings</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.day_label">day_label</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.week_index">week_index</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.month_year">month_year</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.stop_lat">stop_lat</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.stop_lon">stop_lon</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.is_final">is_final</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.is_filtered">is_filtered</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ridership.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GTFSNetwork">GTFSNetwork</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#GTFSNetwork.stops">stops</a>
                        </li>
                        <li>
                                <a class="variable" href="#GTFSNetwork.routes">routes</a>
                        </li>
                        <li>
                                <a class="variable" href="#GTFSNetwork.trips">trips</a>
                        </li>
                        <li>
                                <a class="variable" href="#GTFSNetwork.stop_times">stop_times</a>
                        </li>
                        <li>
                                <a class="variable" href="#GTFSNetwork.itineraries">itineraries</a>
                        </li>
                        <li>
                                <a class="function" href="#GTFSNetwork.stops_to_geojson">stops_to_geojson</a>
                        </li>
                        <li>
                                <a class="function" href="#GTFSNetwork.itineraries_to_geojson">itineraries_to_geojson</a>
                        </li>
                        <li>
                                <a class="function" href="#GTFSNetwork.build_itineraries">build_itineraries</a>
                        </li>
                        <li>
                                <a class="variable" href="#GTFSNetwork.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#StopTime">StopTime</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#StopTime.trip_id">trip_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.arrival_time">arrival_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.departure_time">departure_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.stop_id">stop_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.stop_sequence">stop_sequence</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.stop_headsign">stop_headsign</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.pickup_type">pickup_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.drop_off_type">drop_off_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.shape_dist_traveled">shape_dist_traveled</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.timepoint">timepoint</a>
                        </li>
                        <li>
                                <a class="variable" href="#StopTime.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#HexGrid">HexGrid</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#HexGrid.resolution">resolution</a>
                        </li>
                        <li>
                                <a class="variable" href="#HexGrid.cells">cells</a>
                        </li>
                        <li>
                                <a class="function" href="#HexGrid.from_geodataframe">from_geodataframe</a>
                        </li>
                        <li>
                                <a class="function" href="#HexGrid.to_geodataframe">to_geodataframe</a>
                        </li>
                        <li>
                                <a class="function" href="#HexGrid.to_geojson">to_geojson</a>
                        </li>
                        <li>
                                <a class="variable" href="#HexGrid.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#HexCell">HexCell</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#HexCell.h3_id">h3_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#HexCell.center">center</a>
                        </li>
                        <li>
                                <a class="variable" href="#HexCell.polygon">polygon</a>
                        </li>
                        <li>
                                <a class="variable" href="#HexCell.model_config">model_config</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
sum_gtfs_geojson    </h1>

                
                        <input id="mod-sum_gtfs_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-sum_gtfs_geojson-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.shared_mobility_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">SharedMobilityManager</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.enums</span><span class="w"> </span><span class="kn">import</span> <span class="n">LivingLabsCity</span><span class="p">,</span> <span class="n">DataType</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">GeoToolkit</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">UrbanMobilitySystem</span><span class="p">,</span> <span class="n">Stop</span><span class="p">,</span> <span class="n">Route</span><span class="p">,</span> <span class="n">Trip</span><span class="p">,</span> <span class="n">Agency</span><span class="p">,</span> <span class="n">StationInfoStatus</span><span class="p">,</span> <span class="n">BikeTrip</span><span class="p">,</span> <span class="n">Ridership</span><span class="p">,</span> <span class="n">GTFSNetwork</span><span class="p">,</span> <span class="n">StopTime</span><span class="p">,</span> <span class="n">HexGrid</span><span class="p">,</span> <span class="n">HexCell</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SharedMobilityManager&quot;</span><span class="p">,</span> <span class="s2">&quot;LivingLabsCity&quot;</span><span class="p">,</span> <span class="s2">&quot;DataType&quot;</span><span class="p">,</span> <span class="s2">&quot;GeoToolkit&quot;</span><span class="p">,</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a>           <span class="s2">&quot;UrbanMobilitySystem&quot;</span><span class="p">,</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a>           <span class="s2">&quot;Stop&quot;</span><span class="p">,</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a>           <span class="s2">&quot;Route&quot;</span><span class="p">,</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a>           <span class="s2">&quot;Trip&quot;</span><span class="p">,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a>           <span class="s2">&quot;Agency&quot;</span><span class="p">,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a>           <span class="s2">&quot;StationInfoStatus&quot;</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a>           <span class="s2">&quot;BikeTrip&quot;</span><span class="p">,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a>           <span class="s2">&quot;Ridership&quot;</span><span class="p">,</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">14</span></a>           <span class="s2">&quot;GTFSNetwork&quot;</span><span class="p">,</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">15</span></a>           <span class="s2">&quot;StopTime&quot;</span><span class="p">,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">16</span></a>           <span class="s2">&quot;HexGrid&quot;</span><span class="p">,</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">17</span></a>           <span class="s2">&quot;HexCell&quot;</span><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="SharedMobilityManager">
                            <input id="SharedMobilityManager-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SharedMobilityManager</span>:

                <label class="view-source-button" for="SharedMobilityManager-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SharedMobilityManager"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SharedMobilityManager-17"><a href="#SharedMobilityManager-17"><span class="linenos"> 17</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SharedMobilityManager</span><span class="p">:</span>
</span><span id="SharedMobilityManager-18"><a href="#SharedMobilityManager-18"><span class="linenos"> 18</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SharedMobilityManager-19"><a href="#SharedMobilityManager-19"><span class="linenos"> 19</span></a>                 <span class="n">city</span><span class="p">:</span> <span class="n">LivingLabsCity</span> <span class="o">=</span> <span class="n">LivingLabsCity</span><span class="o">.</span><span class="n">GENEVA</span><span class="p">,</span>
</span><span id="SharedMobilityManager-20"><a href="#SharedMobilityManager-20"><span class="linenos"> 20</span></a>                 <span class="n">data_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">DataType</span><span class="p">]]</span> <span class="o">=</span> <span class="n">DEFAULT_DATA_TYPES</span><span class="p">,</span>
</span><span id="SharedMobilityManager-21"><a href="#SharedMobilityManager-21"><span class="linenos"> 21</span></a>                 <span class="n">geojson_output_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="SharedMobilityManager-22"><a href="#SharedMobilityManager-22"><span class="linenos"> 22</span></a>                 <span class="n">restrict_country_boundaries</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="SharedMobilityManager-23"><a href="#SharedMobilityManager-23"><span class="linenos"> 23</span></a>                 <span class="n">distance_radius_km</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="SharedMobilityManager-24"><a href="#SharedMobilityManager-24"><span class="linenos"> 24</span></a>                 <span class="n">grid_resolution</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span>
</span><span id="SharedMobilityManager-25"><a href="#SharedMobilityManager-25"><span class="linenos"> 25</span></a>                 <span class="p">):</span>
</span><span id="SharedMobilityManager-26"><a href="#SharedMobilityManager-26"><span class="linenos"> 26</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-27"><a href="#SharedMobilityManager-27"><span class="linenos"> 27</span></a><span class="sd">        Initialize the SharedMobilityManager with a specific city. The initialization will load the data for the specified city and data types.  </span>
</span><span id="SharedMobilityManager-28"><a href="#SharedMobilityManager-28"><span class="linenos"> 28</span></a>
</span><span id="SharedMobilityManager-29"><a href="#SharedMobilityManager-29"><span class="linenos"> 29</span></a><span class="sd">        Data is instantiated in data object which is an instance of UrbanMobilitySystem.</span>
</span><span id="SharedMobilityManager-30"><a href="#SharedMobilityManager-30"><span class="linenos"> 30</span></a><span class="sd">        Args:</span>
</span><span id="SharedMobilityManager-31"><a href="#SharedMobilityManager-31"><span class="linenos"> 31</span></a><span class="sd">            city (LivingLabsCity, optional): The city for which to manage shared mobility data.. Defaults to LivingLabsCity.GENEVA.</span>
</span><span id="SharedMobilityManager-32"><a href="#SharedMobilityManager-32"><span class="linenos"> 32</span></a><span class="sd">            data_types (list[DataType], optional): List of data types to load. If None, all data types will be loaded. Defaults to None.</span>
</span><span id="SharedMobilityManager-33"><a href="#SharedMobilityManager-33"><span class="linenos"> 33</span></a><span class="sd">            geojson_output_path (str, optional): The path where the GeoJSON files will be saved. If None, a default path will be used data/geojson/{city_name}. Defaults to None.</span>
</span><span id="SharedMobilityManager-34"><a href="#SharedMobilityManager-34"><span class="linenos"> 34</span></a><span class="sd">            include_country_border_crossing (bool, optional): Flag to restrict to country data. Defaults to False, then the complete data will be loaded, including neighbor countries (when applicable).</span>
</span><span id="SharedMobilityManager-35"><a href="#SharedMobilityManager-35"><span class="linenos"> 35</span></a><span class="sd">            distance_radius_km (float, optional): The distance radius in kilometers for filtering data. Defaults to None.</span>
</span><span id="SharedMobilityManager-36"><a href="#SharedMobilityManager-36"><span class="linenos"> 36</span></a><span class="sd">            grid_resolution (int, optional): Resolution of the grid, from 0 to 15. Defaults to 8 (~1 km width, edge length ~1.22 km). Will apply only if HEX_GRID is included in data_types.</span>
</span><span id="SharedMobilityManager-37"><a href="#SharedMobilityManager-37"><span class="linenos"> 37</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-38"><a href="#SharedMobilityManager-38"><span class="linenos"> 38</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">city</span> <span class="o">=</span> <span class="n">city</span>
</span><span id="SharedMobilityManager-39"><a href="#SharedMobilityManager-39"><span class="linenos"> 39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span> <span class="o">=</span> <span class="n">data_types</span>
</span><span id="SharedMobilityManager-40"><a href="#SharedMobilityManager-40"><span class="linenos"> 40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">restrict_country_boundaries</span> <span class="o">=</span> <span class="n">restrict_country_boundaries</span>
</span><span id="SharedMobilityManager-41"><a href="#SharedMobilityManager-41"><span class="linenos"> 41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">distance_radius_km</span> <span class="o">=</span> <span class="n">distance_radius_km</span>
</span><span id="SharedMobilityManager-42"><a href="#SharedMobilityManager-42"><span class="linenos"> 42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_resolution</span> <span class="o">=</span> <span class="n">grid_resolution</span>
</span><span id="SharedMobilityManager-43"><a href="#SharedMobilityManager-43"><span class="linenos"> 43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_loader</span><span class="p">()</span>
</span><span id="SharedMobilityManager-44"><a href="#SharedMobilityManager-44"><span class="linenos"> 44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">geojson_output_path</span> <span class="o">=</span> <span class="n">geojson_output_path</span> <span class="k">if</span> <span class="n">geojson_output_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_default_geojson_path</span><span class="p">()</span>
</span><span id="SharedMobilityManager-45"><a href="#SharedMobilityManager-45"><span class="linenos"> 45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_all_data</span><span class="p">(</span><span class="n">data_types</span><span class="p">)</span>
</span><span id="SharedMobilityManager-46"><a href="#SharedMobilityManager-46"><span class="linenos"> 46</span></a>
</span><span id="SharedMobilityManager-47"><a href="#SharedMobilityManager-47"><span class="linenos"> 47</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_loader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AbstractLoader</span><span class="p">:</span>
</span><span id="SharedMobilityManager-48"><a href="#SharedMobilityManager-48"><span class="linenos"> 48</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-49"><a href="#SharedMobilityManager-49"><span class="linenos"> 49</span></a><span class="sd">        Get the appropriate loader for the specified city.</span>
</span><span id="SharedMobilityManager-50"><a href="#SharedMobilityManager-50"><span class="linenos"> 50</span></a><span class="sd">        Returns: </span>
</span><span id="SharedMobilityManager-51"><a href="#SharedMobilityManager-51"><span class="linenos"> 51</span></a><span class="sd">            An instance of the loader for the specified city.</span>
</span><span id="SharedMobilityManager-52"><a href="#SharedMobilityManager-52"><span class="linenos"> 52</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-53"><a href="#SharedMobilityManager-53"><span class="linenos"> 53</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="n">LivingLabsCity</span><span class="o">.</span><span class="n">GENEVA</span><span class="p">:</span>
</span><span id="SharedMobilityManager-54"><a href="#SharedMobilityManager-54"><span class="linenos"> 54</span></a>            <span class="k">return</span> <span class="n">GenevaLoader</span><span class="p">(</span><span class="n">restrict_country_boundaries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">restrict_country_boundaries</span><span class="p">,</span>
</span><span id="SharedMobilityManager-55"><a href="#SharedMobilityManager-55"><span class="linenos"> 55</span></a>                                <span class="n">distance_radius_km</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">distance_radius_km</span><span class="p">,</span>
</span><span id="SharedMobilityManager-56"><a href="#SharedMobilityManager-56"><span class="linenos"> 56</span></a>                                <span class="n">grid_resolution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">grid_resolution</span>
</span><span id="SharedMobilityManager-57"><a href="#SharedMobilityManager-57"><span class="linenos"> 57</span></a>                                <span class="p">)</span>
</span><span id="SharedMobilityManager-58"><a href="#SharedMobilityManager-58"><span class="linenos"> 58</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SharedMobilityManager-59"><a href="#SharedMobilityManager-59"><span class="linenos"> 59</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="SharedMobilityManager-60"><a href="#SharedMobilityManager-60"><span class="linenos"> 60</span></a>                <span class="sa">f</span><span class="s2">&quot;Unsupported Living Lab: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">city</span><span class="si">}</span><span class="s2">, no values found for this city.&quot;</span><span class="p">)</span>
</span><span id="SharedMobilityManager-61"><a href="#SharedMobilityManager-61"><span class="linenos"> 61</span></a>        <span class="c1"># Add more loaders for other cities as needed</span>
</span><span id="SharedMobilityManager-62"><a href="#SharedMobilityManager-62"><span class="linenos"> 62</span></a>
</span><span id="SharedMobilityManager-63"><a href="#SharedMobilityManager-63"><span class="linenos"> 63</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datatypes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">DataType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UrbanMobilitySystem</span><span class="p">:</span>
</span><span id="SharedMobilityManager-64"><a href="#SharedMobilityManager-64"><span class="linenos"> 64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-65"><a href="#SharedMobilityManager-65"><span class="linenos"> 65</span></a><span class="sd">        Load data for the specified city and data types.</span>
</span><span id="SharedMobilityManager-66"><a href="#SharedMobilityManager-66"><span class="linenos"> 66</span></a><span class="sd">        Args: </span>
</span><span id="SharedMobilityManager-67"><a href="#SharedMobilityManager-67"><span class="linenos"> 67</span></a><span class="sd">            datatypes: List of data types to load. If None, load all data types.</span>
</span><span id="SharedMobilityManager-68"><a href="#SharedMobilityManager-68"><span class="linenos"> 68</span></a><span class="sd">        Returns: </span>
</span><span id="SharedMobilityManager-69"><a href="#SharedMobilityManager-69"><span class="linenos"> 69</span></a><span class="sd">            An UrbanMobilitySystem object containing the loaded data.</span>
</span><span id="SharedMobilityManager-70"><a href="#SharedMobilityManager-70"><span class="linenos"> 70</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-71"><a href="#SharedMobilityManager-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_all_data</span><span class="p">(</span><span class="n">datatypes</span><span class="p">)</span>
</span><span id="SharedMobilityManager-72"><a href="#SharedMobilityManager-72"><span class="linenos"> 72</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
</span><span id="SharedMobilityManager-73"><a href="#SharedMobilityManager-73"><span class="linenos"> 73</span></a>
</span><span id="SharedMobilityManager-74"><a href="#SharedMobilityManager-74"><span class="linenos"> 74</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_default_geojson_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SharedMobilityManager-75"><a href="#SharedMobilityManager-75"><span class="linenos"> 75</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-76"><a href="#SharedMobilityManager-76"><span class="linenos"> 76</span></a><span class="sd">        Get the default path for saving GeoJSON files.</span>
</span><span id="SharedMobilityManager-77"><a href="#SharedMobilityManager-77"><span class="linenos"> 77</span></a><span class="sd">        Returns:</span>
</span><span id="SharedMobilityManager-78"><a href="#SharedMobilityManager-78"><span class="linenos"> 78</span></a><span class="sd">            The default path for saving GeoJSON files. Value is &quot;data/geojson/{city_name}&quot;.</span>
</span><span id="SharedMobilityManager-79"><a href="#SharedMobilityManager-79"><span class="linenos"> 79</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-80"><a href="#SharedMobilityManager-80"><span class="linenos"> 80</span></a>        <span class="n">city_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="SharedMobilityManager-81"><a href="#SharedMobilityManager-81"><span class="linenos"> 81</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="p">[</span><span class="n">DEFAULT_OUTPUT_JSON_FILES_PATH</span><span class="p">,</span> <span class="n">city_name</span><span class="p">]</span>
</span><span id="SharedMobilityManager-82"><a href="#SharedMobilityManager-82"><span class="linenos"> 82</span></a>
</span><span id="SharedMobilityManager-83"><a href="#SharedMobilityManager-83"><span class="linenos"> 83</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">restrict_country_boundaries</span><span class="p">:</span>
</span><span id="SharedMobilityManager-84"><a href="#SharedMobilityManager-84"><span class="linenos"> 84</span></a>            <span class="n">file_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;_within-country&quot;</span><span class="p">)</span>
</span><span id="SharedMobilityManager-85"><a href="#SharedMobilityManager-85"><span class="linenos"> 85</span></a>
</span><span id="SharedMobilityManager-86"><a href="#SharedMobilityManager-86"><span class="linenos"> 86</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance_radius_km</span><span class="p">:</span>
</span><span id="SharedMobilityManager-87"><a href="#SharedMobilityManager-87"><span class="linenos"> 87</span></a>            <span class="n">file_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">distance_radius_km</span><span class="si">}</span><span class="s2">km-radius&quot;</span><span class="p">)</span>
</span><span id="SharedMobilityManager-88"><a href="#SharedMobilityManager-88"><span class="linenos"> 88</span></a>        
</span><span id="SharedMobilityManager-89"><a href="#SharedMobilityManager-89"><span class="linenos"> 89</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_resolution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">DataType</span><span class="o">.</span><span class="n">HEX_GRID</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">:</span>
</span><span id="SharedMobilityManager-90"><a href="#SharedMobilityManager-90"><span class="linenos"> 90</span></a>            <span class="n">file_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">grid_resolution</span><span class="si">}</span><span class="s2">res-hexgrid&quot;</span><span class="p">)</span>
</span><span id="SharedMobilityManager-91"><a href="#SharedMobilityManager-91"><span class="linenos"> 91</span></a>
</span><span id="SharedMobilityManager-92"><a href="#SharedMobilityManager-92"><span class="linenos"> 92</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="SharedMobilityManager-93"><a href="#SharedMobilityManager-93"><span class="linenos"> 93</span></a>
</span><span id="SharedMobilityManager-94"><a href="#SharedMobilityManager-94"><span class="linenos"> 94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="SharedMobilityManager-95"><a href="#SharedMobilityManager-95"><span class="linenos"> 95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-96"><a href="#SharedMobilityManager-96"><span class="linenos"> 96</span></a><span class="sd">        Save the loaded data to GeoJSON files.</span>
</span><span id="SharedMobilityManager-97"><a href="#SharedMobilityManager-97"><span class="linenos"> 97</span></a><span class="sd">        Args:</span>
</span><span id="SharedMobilityManager-98"><a href="#SharedMobilityManager-98"><span class="linenos"> 98</span></a><span class="sd">            output_path: The path where the GeoJSON files will be saved.</span>
</span><span id="SharedMobilityManager-99"><a href="#SharedMobilityManager-99"><span class="linenos"> 99</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-100"><a href="#SharedMobilityManager-100"><span class="linenos">100</span></a>        <span class="k">if</span> <span class="n">output_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SharedMobilityManager-101"><a href="#SharedMobilityManager-101"><span class="linenos">101</span></a>            <span class="n">output_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geojson_output_path</span>
</span><span id="SharedMobilityManager-102"><a href="#SharedMobilityManager-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">save_to_geojson</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span><span id="SharedMobilityManager-103"><a href="#SharedMobilityManager-103"><span class="linenos">103</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data saved to </span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s2"> as GeoJSON files.&quot;</span><span class="p">)</span>
</span><span id="SharedMobilityManager-104"><a href="#SharedMobilityManager-104"><span class="linenos">104</span></a>        
</span><span id="SharedMobilityManager-105"><a href="#SharedMobilityManager-105"><span class="linenos">105</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UrbanMobilitySystem</span><span class="p">:</span>
</span><span id="SharedMobilityManager-106"><a href="#SharedMobilityManager-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-107"><a href="#SharedMobilityManager-107"><span class="linenos">107</span></a><span class="sd">        Get the loaded data.</span>
</span><span id="SharedMobilityManager-108"><a href="#SharedMobilityManager-108"><span class="linenos">108</span></a><span class="sd">        Returns: </span>
</span><span id="SharedMobilityManager-109"><a href="#SharedMobilityManager-109"><span class="linenos">109</span></a><span class="sd">            The loaded UrbanMobilitySystem data.</span>
</span><span id="SharedMobilityManager-110"><a href="#SharedMobilityManager-110"><span class="linenos">110</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-111"><a href="#SharedMobilityManager-111"><span class="linenos">111</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
</span><span id="SharedMobilityManager-112"><a href="#SharedMobilityManager-112"><span class="linenos">112</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_loader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AbstractLoader</span><span class="p">:</span>
</span><span id="SharedMobilityManager-113"><a href="#SharedMobilityManager-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-114"><a href="#SharedMobilityManager-114"><span class="linenos">114</span></a><span class="sd">        Get the loader used to load the data.</span>
</span><span id="SharedMobilityManager-115"><a href="#SharedMobilityManager-115"><span class="linenos">115</span></a><span class="sd">        Returns: </span>
</span><span id="SharedMobilityManager-116"><a href="#SharedMobilityManager-116"><span class="linenos">116</span></a><span class="sd">            The loader used to load the data.</span>
</span><span id="SharedMobilityManager-117"><a href="#SharedMobilityManager-117"><span class="linenos">117</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager-118"><a href="#SharedMobilityManager-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span>
</span></pre></div>


    

                            <div id="SharedMobilityManager.__init__" class="classattr">
                                        <input id="SharedMobilityManager.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">SharedMobilityManager</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">city</span><span class="p">:</span> <span class="n"><a href="#LivingLabsCity">LivingLabsCity</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n"><a href="#LivingLabsCity.GENEVA">LivingLabsCity.GENEVA</a></span><span class="p">:</span> <span class="mi">1</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">data_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n"><a href="#DataType">DataType</a></span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n"><a href="#DataType.STOPS">DataType.STOPS</a></span><span class="p">:</span> <span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n"><a href="#DataType.ITINERARIES">DataType.ITINERARIES</a></span><span class="p">:</span> <span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n"><a href="#DataType.BIKE_STATIONS">DataType.BIKE_STATIONS</a></span><span class="p">:</span> <span class="mi">3</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n"><a href="#DataType.RIDERSHIP">DataType.RIDERSHIP</a></span><span class="p">:</span> <span class="mi">4</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n"><a href="#DataType.BIKE_TRIPS">DataType.BIKE_TRIPS</a></span><span class="p">:</span> <span class="mi">5</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n"><a href="#DataType.HEX_GRID">DataType.HEX_GRID</a></span><span class="p">:</span> <span class="mi">6</span><span class="o">&gt;</span><span class="p">]</span>,</span><span class="param">	<span class="n">geojson_output_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">restrict_country_boundaries</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">distance_radius_km</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">grid_resolution</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span></span>)</span>

                <label class="view-source-button" for="SharedMobilityManager.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SharedMobilityManager.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SharedMobilityManager.__init__-18"><a href="#SharedMobilityManager.__init__-18"><span class="linenos">18</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SharedMobilityManager.__init__-19"><a href="#SharedMobilityManager.__init__-19"><span class="linenos">19</span></a>                 <span class="n">city</span><span class="p">:</span> <span class="n">LivingLabsCity</span> <span class="o">=</span> <span class="n">LivingLabsCity</span><span class="o">.</span><span class="n">GENEVA</span><span class="p">,</span>
</span><span id="SharedMobilityManager.__init__-20"><a href="#SharedMobilityManager.__init__-20"><span class="linenos">20</span></a>                 <span class="n">data_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">DataType</span><span class="p">]]</span> <span class="o">=</span> <span class="n">DEFAULT_DATA_TYPES</span><span class="p">,</span>
</span><span id="SharedMobilityManager.__init__-21"><a href="#SharedMobilityManager.__init__-21"><span class="linenos">21</span></a>                 <span class="n">geojson_output_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="SharedMobilityManager.__init__-22"><a href="#SharedMobilityManager.__init__-22"><span class="linenos">22</span></a>                 <span class="n">restrict_country_boundaries</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="SharedMobilityManager.__init__-23"><a href="#SharedMobilityManager.__init__-23"><span class="linenos">23</span></a>                 <span class="n">distance_radius_km</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="SharedMobilityManager.__init__-24"><a href="#SharedMobilityManager.__init__-24"><span class="linenos">24</span></a>                 <span class="n">grid_resolution</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span>
</span><span id="SharedMobilityManager.__init__-25"><a href="#SharedMobilityManager.__init__-25"><span class="linenos">25</span></a>                 <span class="p">):</span>
</span><span id="SharedMobilityManager.__init__-26"><a href="#SharedMobilityManager.__init__-26"><span class="linenos">26</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager.__init__-27"><a href="#SharedMobilityManager.__init__-27"><span class="linenos">27</span></a><span class="sd">        Initialize the SharedMobilityManager with a specific city. The initialization will load the data for the specified city and data types.  </span>
</span><span id="SharedMobilityManager.__init__-28"><a href="#SharedMobilityManager.__init__-28"><span class="linenos">28</span></a>
</span><span id="SharedMobilityManager.__init__-29"><a href="#SharedMobilityManager.__init__-29"><span class="linenos">29</span></a><span class="sd">        Data is instantiated in data object which is an instance of UrbanMobilitySystem.</span>
</span><span id="SharedMobilityManager.__init__-30"><a href="#SharedMobilityManager.__init__-30"><span class="linenos">30</span></a><span class="sd">        Args:</span>
</span><span id="SharedMobilityManager.__init__-31"><a href="#SharedMobilityManager.__init__-31"><span class="linenos">31</span></a><span class="sd">            city (LivingLabsCity, optional): The city for which to manage shared mobility data.. Defaults to LivingLabsCity.GENEVA.</span>
</span><span id="SharedMobilityManager.__init__-32"><a href="#SharedMobilityManager.__init__-32"><span class="linenos">32</span></a><span class="sd">            data_types (list[DataType], optional): List of data types to load. If None, all data types will be loaded. Defaults to None.</span>
</span><span id="SharedMobilityManager.__init__-33"><a href="#SharedMobilityManager.__init__-33"><span class="linenos">33</span></a><span class="sd">            geojson_output_path (str, optional): The path where the GeoJSON files will be saved. If None, a default path will be used data/geojson/{city_name}. Defaults to None.</span>
</span><span id="SharedMobilityManager.__init__-34"><a href="#SharedMobilityManager.__init__-34"><span class="linenos">34</span></a><span class="sd">            include_country_border_crossing (bool, optional): Flag to restrict to country data. Defaults to False, then the complete data will be loaded, including neighbor countries (when applicable).</span>
</span><span id="SharedMobilityManager.__init__-35"><a href="#SharedMobilityManager.__init__-35"><span class="linenos">35</span></a><span class="sd">            distance_radius_km (float, optional): The distance radius in kilometers for filtering data. Defaults to None.</span>
</span><span id="SharedMobilityManager.__init__-36"><a href="#SharedMobilityManager.__init__-36"><span class="linenos">36</span></a><span class="sd">            grid_resolution (int, optional): Resolution of the grid, from 0 to 15. Defaults to 8 (~1 km width, edge length ~1.22 km). Will apply only if HEX_GRID is included in data_types.</span>
</span><span id="SharedMobilityManager.__init__-37"><a href="#SharedMobilityManager.__init__-37"><span class="linenos">37</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager.__init__-38"><a href="#SharedMobilityManager.__init__-38"><span class="linenos">38</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">city</span> <span class="o">=</span> <span class="n">city</span>
</span><span id="SharedMobilityManager.__init__-39"><a href="#SharedMobilityManager.__init__-39"><span class="linenos">39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span> <span class="o">=</span> <span class="n">data_types</span>
</span><span id="SharedMobilityManager.__init__-40"><a href="#SharedMobilityManager.__init__-40"><span class="linenos">40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">restrict_country_boundaries</span> <span class="o">=</span> <span class="n">restrict_country_boundaries</span>
</span><span id="SharedMobilityManager.__init__-41"><a href="#SharedMobilityManager.__init__-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">distance_radius_km</span> <span class="o">=</span> <span class="n">distance_radius_km</span>
</span><span id="SharedMobilityManager.__init__-42"><a href="#SharedMobilityManager.__init__-42"><span class="linenos">42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_resolution</span> <span class="o">=</span> <span class="n">grid_resolution</span>
</span><span id="SharedMobilityManager.__init__-43"><a href="#SharedMobilityManager.__init__-43"><span class="linenos">43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">loader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_loader</span><span class="p">()</span>
</span><span id="SharedMobilityManager.__init__-44"><a href="#SharedMobilityManager.__init__-44"><span class="linenos">44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">geojson_output_path</span> <span class="o">=</span> <span class="n">geojson_output_path</span> <span class="k">if</span> <span class="n">geojson_output_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_default_geojson_path</span><span class="p">()</span>
</span><span id="SharedMobilityManager.__init__-45"><a href="#SharedMobilityManager.__init__-45"><span class="linenos">45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_all_data</span><span class="p">(</span><span class="n">data_types</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the SharedMobilityManager with a specific city. The initialization will load the data for the specified city and data types.  </p>

<p>Data is instantiated in data object which is an instance of UrbanMobilitySystem.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>city (LivingLabsCity, optional):</strong>  The city for which to manage shared mobility data.. Defaults to <a href="#LivingLabsCity.GENEVA">LivingLabsCity.GENEVA</a>.</li>
<li><strong>data_types (list[DataType], optional):</strong>  List of data types to load. If None, all data types will be loaded. Defaults to None.</li>
<li><strong>geojson_output_path (str, optional):</strong>  The path where the GeoJSON files will be saved. If None, a default path will be used data/geojson/{city_name}. Defaults to None.</li>
<li><strong>include_country_border_crossing (bool, optional):</strong>  Flag to restrict to country data. Defaults to False, then the complete data will be loaded, including neighbor countries (when applicable).</li>
<li><strong>distance_radius_km (float, optional):</strong>  The distance radius in kilometers for filtering data. Defaults to None.</li>
<li><strong>grid_resolution (int, optional):</strong>  Resolution of the grid, from 0 to 15. Defaults to 8 (~1 km width, edge length ~1.22 km). Will apply only if HEX_GRID is included in data_types.</li>
</ul>
</div>


                            </div>
                            <div id="SharedMobilityManager.city" class="classattr">
                                <div class="attr variable">
            <span class="name">city</span>

        
    </div>
    <a class="headerlink" href="#SharedMobilityManager.city"></a>
    
    

                            </div>
                            <div id="SharedMobilityManager.data_types" class="classattr">
                                <div class="attr variable">
            <span class="name">data_types</span>

        
    </div>
    <a class="headerlink" href="#SharedMobilityManager.data_types"></a>
    
    

                            </div>
                            <div id="SharedMobilityManager.restrict_country_boundaries" class="classattr">
                                <div class="attr variable">
            <span class="name">restrict_country_boundaries</span>

        
    </div>
    <a class="headerlink" href="#SharedMobilityManager.restrict_country_boundaries"></a>
    
    

                            </div>
                            <div id="SharedMobilityManager.distance_radius_km" class="classattr">
                                <div class="attr variable">
            <span class="name">distance_radius_km</span>

        
    </div>
    <a class="headerlink" href="#SharedMobilityManager.distance_radius_km"></a>
    
    

                            </div>
                            <div id="SharedMobilityManager.grid_resolution" class="classattr">
                                <div class="attr variable">
            <span class="name">grid_resolution</span>

        
    </div>
    <a class="headerlink" href="#SharedMobilityManager.grid_resolution"></a>
    
    

                            </div>
                            <div id="SharedMobilityManager.loader" class="classattr">
                                <div class="attr variable">
            <span class="name">loader</span>

        
    </div>
    <a class="headerlink" href="#SharedMobilityManager.loader"></a>
    
    

                            </div>
                            <div id="SharedMobilityManager.geojson_output_path" class="classattr">
                                <div class="attr variable">
            <span class="name">geojson_output_path</span>

        
    </div>
    <a class="headerlink" href="#SharedMobilityManager.geojson_output_path"></a>
    
    

                            </div>
                            <div id="SharedMobilityManager.data" class="classattr">
                                <div class="attr variable">
            <span class="name">data</span>

        
    </div>
    <a class="headerlink" href="#SharedMobilityManager.data"></a>
    
    

                            </div>
                            <div id="SharedMobilityManager.save_to_geojson" class="classattr">
                                        <input id="SharedMobilityManager.save_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="SharedMobilityManager.save_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SharedMobilityManager.save_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SharedMobilityManager.save_to_geojson-94"><a href="#SharedMobilityManager.save_to_geojson-94"><span class="linenos"> 94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="SharedMobilityManager.save_to_geojson-95"><a href="#SharedMobilityManager.save_to_geojson-95"><span class="linenos"> 95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager.save_to_geojson-96"><a href="#SharedMobilityManager.save_to_geojson-96"><span class="linenos"> 96</span></a><span class="sd">        Save the loaded data to GeoJSON files.</span>
</span><span id="SharedMobilityManager.save_to_geojson-97"><a href="#SharedMobilityManager.save_to_geojson-97"><span class="linenos"> 97</span></a><span class="sd">        Args:</span>
</span><span id="SharedMobilityManager.save_to_geojson-98"><a href="#SharedMobilityManager.save_to_geojson-98"><span class="linenos"> 98</span></a><span class="sd">            output_path: The path where the GeoJSON files will be saved.</span>
</span><span id="SharedMobilityManager.save_to_geojson-99"><a href="#SharedMobilityManager.save_to_geojson-99"><span class="linenos"> 99</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager.save_to_geojson-100"><a href="#SharedMobilityManager.save_to_geojson-100"><span class="linenos">100</span></a>        <span class="k">if</span> <span class="n">output_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SharedMobilityManager.save_to_geojson-101"><a href="#SharedMobilityManager.save_to_geojson-101"><span class="linenos">101</span></a>            <span class="n">output_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geojson_output_path</span>
</span><span id="SharedMobilityManager.save_to_geojson-102"><a href="#SharedMobilityManager.save_to_geojson-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">save_to_geojson</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span><span id="SharedMobilityManager.save_to_geojson-103"><a href="#SharedMobilityManager.save_to_geojson-103"><span class="linenos">103</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data saved to </span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s2"> as GeoJSON files.&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Save the loaded data to GeoJSON files.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>output_path:</strong>  The path where the GeoJSON files will be saved.</li>
</ul>
</div>


                            </div>
                            <div id="SharedMobilityManager.get_data" class="classattr">
                                        <input id="SharedMobilityManager.get_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_data</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#UrbanMobilitySystem">UrbanMobilitySystem</a></span>:</span></span>

                <label class="view-source-button" for="SharedMobilityManager.get_data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SharedMobilityManager.get_data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SharedMobilityManager.get_data-105"><a href="#SharedMobilityManager.get_data-105"><span class="linenos">105</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UrbanMobilitySystem</span><span class="p">:</span>
</span><span id="SharedMobilityManager.get_data-106"><a href="#SharedMobilityManager.get_data-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager.get_data-107"><a href="#SharedMobilityManager.get_data-107"><span class="linenos">107</span></a><span class="sd">        Get the loaded data.</span>
</span><span id="SharedMobilityManager.get_data-108"><a href="#SharedMobilityManager.get_data-108"><span class="linenos">108</span></a><span class="sd">        Returns: </span>
</span><span id="SharedMobilityManager.get_data-109"><a href="#SharedMobilityManager.get_data-109"><span class="linenos">109</span></a><span class="sd">            The loaded UrbanMobilitySystem data.</span>
</span><span id="SharedMobilityManager.get_data-110"><a href="#SharedMobilityManager.get_data-110"><span class="linenos">110</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager.get_data-111"><a href="#SharedMobilityManager.get_data-111"><span class="linenos">111</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
</span></pre></div>


            <div class="docstring"><p>Get the loaded data.
Returns: 
    The loaded UrbanMobilitySystem data.</p>
</div>


                            </div>
                            <div id="SharedMobilityManager.get_loader" class="classattr">
                                        <input id="SharedMobilityManager.get_loader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_loader</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">sum_gtfs_geojson</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">abstract_loader</span><span class="o">.</span><span class="n">AbstractLoader</span>:</span></span>

                <label class="view-source-button" for="SharedMobilityManager.get_loader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SharedMobilityManager.get_loader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SharedMobilityManager.get_loader-112"><a href="#SharedMobilityManager.get_loader-112"><span class="linenos">112</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_loader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AbstractLoader</span><span class="p">:</span>
</span><span id="SharedMobilityManager.get_loader-113"><a href="#SharedMobilityManager.get_loader-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager.get_loader-114"><a href="#SharedMobilityManager.get_loader-114"><span class="linenos">114</span></a><span class="sd">        Get the loader used to load the data.</span>
</span><span id="SharedMobilityManager.get_loader-115"><a href="#SharedMobilityManager.get_loader-115"><span class="linenos">115</span></a><span class="sd">        Returns: </span>
</span><span id="SharedMobilityManager.get_loader-116"><a href="#SharedMobilityManager.get_loader-116"><span class="linenos">116</span></a><span class="sd">            The loader used to load the data.</span>
</span><span id="SharedMobilityManager.get_loader-117"><a href="#SharedMobilityManager.get_loader-117"><span class="linenos">117</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SharedMobilityManager.get_loader-118"><a href="#SharedMobilityManager.get_loader-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span>
</span></pre></div>


            <div class="docstring"><p>Get the loader used to load the data.
Returns: 
    The loader used to load the data.</p>
</div>


                            </div>
                </section>
                <section id="LivingLabsCity">
                            <input id="LivingLabsCity-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LivingLabsCity</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="LivingLabsCity-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LivingLabsCity"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LivingLabsCity-5"><a href="#LivingLabsCity-5"><span class="linenos"> 5</span></a><span class="k">class</span><span class="w"> </span><span class="nc">LivingLabsCity</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="LivingLabsCity-6"><a href="#LivingLabsCity-6"><span class="linenos"> 6</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LivingLabsCity-7"><a href="#LivingLabsCity-7"><span class="linenos"> 7</span></a><span class="sd">    Enum for a available Living Labs cities.</span>
</span><span id="LivingLabsCity-8"><a href="#LivingLabsCity-8"><span class="linenos"> 8</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LivingLabsCity-9"><a href="#LivingLabsCity-9"><span class="linenos"> 9</span></a>    <span class="n">GENEVA</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</span><span id="LivingLabsCity-10"><a href="#LivingLabsCity-10"><span class="linenos">10</span></a>    <span class="n">LARNACA</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Enum for a available Living Labs cities.</p>
</div>


                            <div id="LivingLabsCity.GENEVA" class="classattr">
                                <div class="attr variable">
            <span class="name">GENEVA</span>        =
<span class="default_value">&lt;<a href="#LivingLabsCity.GENEVA">LivingLabsCity.GENEVA</a>: 1&gt;</span>

        
    </div>
    <a class="headerlink" href="#LivingLabsCity.GENEVA"></a>
    
    

                            </div>
                            <div id="LivingLabsCity.LARNACA" class="classattr">
                                <div class="attr variable">
            <span class="name">LARNACA</span>        =
<span class="default_value">&lt;<a href="#LivingLabsCity.LARNACA">LivingLabsCity.LARNACA</a>: 2&gt;</span>

        
    </div>
    <a class="headerlink" href="#LivingLabsCity.LARNACA"></a>
    
    

                            </div>
                </section>
                <section id="DataType">
                            <input id="DataType-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">DataType</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="DataType-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DataType"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DataType-5"><a href="#DataType-5"><span class="linenos"> 5</span></a><span class="k">class</span><span class="w"> </span><span class="nc">DataType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="DataType-6"><a href="#DataType-6"><span class="linenos"> 6</span></a>    <span class="n">STOPS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</span><span id="DataType-7"><a href="#DataType-7"><span class="linenos"> 7</span></a>    <span class="n">ITINERARIES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</span><span id="DataType-8"><a href="#DataType-8"><span class="linenos"> 8</span></a>    <span class="n">BIKE_STATIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</span><span id="DataType-9"><a href="#DataType-9"><span class="linenos"> 9</span></a>    <span class="n">RIDERSHIP</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</span><span id="DataType-10"><a href="#DataType-10"><span class="linenos">10</span></a>    <span class="n">BIKE_TRIPS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</span><span id="DataType-11"><a href="#DataType-11"><span class="linenos">11</span></a>    <span class="n">HEX_GRID</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>An enumeration.</p>
</div>


                            <div id="DataType.STOPS" class="classattr">
                                <div class="attr variable">
            <span class="name">STOPS</span>        =
<span class="default_value">&lt;<a href="#DataType.STOPS">DataType.STOPS</a>: 1&gt;</span>

        
    </div>
    <a class="headerlink" href="#DataType.STOPS"></a>
    
    

                            </div>
                            <div id="DataType.ITINERARIES" class="classattr">
                                <div class="attr variable">
            <span class="name">ITINERARIES</span>        =
<span class="default_value">&lt;<a href="#DataType.ITINERARIES">DataType.ITINERARIES</a>: 2&gt;</span>

        
    </div>
    <a class="headerlink" href="#DataType.ITINERARIES"></a>
    
    

                            </div>
                            <div id="DataType.BIKE_STATIONS" class="classattr">
                                <div class="attr variable">
            <span class="name">BIKE_STATIONS</span>        =
<span class="default_value">&lt;<a href="#DataType.BIKE_STATIONS">DataType.BIKE_STATIONS</a>: 3&gt;</span>

        
    </div>
    <a class="headerlink" href="#DataType.BIKE_STATIONS"></a>
    
    

                            </div>
                            <div id="DataType.RIDERSHIP" class="classattr">
                                <div class="attr variable">
            <span class="name">RIDERSHIP</span>        =
<span class="default_value">&lt;<a href="#DataType.RIDERSHIP">DataType.RIDERSHIP</a>: 4&gt;</span>

        
    </div>
    <a class="headerlink" href="#DataType.RIDERSHIP"></a>
    
    

                            </div>
                            <div id="DataType.BIKE_TRIPS" class="classattr">
                                <div class="attr variable">
            <span class="name">BIKE_TRIPS</span>        =
<span class="default_value">&lt;<a href="#DataType.BIKE_TRIPS">DataType.BIKE_TRIPS</a>: 5&gt;</span>

        
    </div>
    <a class="headerlink" href="#DataType.BIKE_TRIPS"></a>
    
    

                            </div>
                            <div id="DataType.HEX_GRID" class="classattr">
                                <div class="attr variable">
            <span class="name">HEX_GRID</span>        =
<span class="default_value">&lt;<a href="#DataType.HEX_GRID">DataType.HEX_GRID</a>: 6&gt;</span>

        
    </div>
    <a class="headerlink" href="#DataType.HEX_GRID"></a>
    
    

                            </div>
                </section>
                <section id="GeoToolkit">
                            <input id="GeoToolkit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GeoToolkit</span>:

                <label class="view-source-button" for="GeoToolkit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeoToolkit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeoToolkit-8"><a href="#GeoToolkit-8"><span class="linenos"> 8</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GeoToolkit</span><span class="p">:</span>
</span><span id="GeoToolkit-9"><a href="#GeoToolkit-9"><span class="linenos"> 9</span></a>
</span><span id="GeoToolkit-10"><a href="#GeoToolkit-10"><span class="linenos">10</span></a>    <span class="nd">@staticmethod</span>
</span><span id="GeoToolkit-11"><a href="#GeoToolkit-11"><span class="linenos">11</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_hex_grid</span><span class="p">(</span><span class="n">points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">],</span> <span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HexGrid</span><span class="p">:</span>
</span><span id="GeoToolkit-12"><a href="#GeoToolkit-12"><span class="linenos">12</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeoToolkit-13"><a href="#GeoToolkit-13"><span class="linenos">13</span></a><span class="sd">        Generate a hexagonal grid that covers the area defined by the input Shapely Points.</span>
</span><span id="GeoToolkit-14"><a href="#GeoToolkit-14"><span class="linenos">14</span></a>
</span><span id="GeoToolkit-15"><a href="#GeoToolkit-15"><span class="linenos">15</span></a><span class="sd">        Args:</span>
</span><span id="GeoToolkit-16"><a href="#GeoToolkit-16"><span class="linenos">16</span></a><span class="sd">            points: A list of shapely.geometry.Point objects representing geolocations.</span>
</span><span id="GeoToolkit-17"><a href="#GeoToolkit-17"><span class="linenos">17</span></a><span class="sd">                    Points must be in WGS84 (lon, lat) format.</span>
</span><span id="GeoToolkit-18"><a href="#GeoToolkit-18"><span class="linenos">18</span></a><span class="sd">            resolution: H3 resolution level (int), where higher means finer grid.</span>
</span><span id="GeoToolkit-19"><a href="#GeoToolkit-19"><span class="linenos">19</span></a>
</span><span id="GeoToolkit-20"><a href="#GeoToolkit-20"><span class="linenos">20</span></a><span class="sd">        Returns:</span>
</span><span id="GeoToolkit-21"><a href="#GeoToolkit-21"><span class="linenos">21</span></a><span class="sd">            GeoDataFrame with one row per hex cell, including geometry and h3_id.</span>
</span><span id="GeoToolkit-22"><a href="#GeoToolkit-22"><span class="linenos">22</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeoToolkit-23"><a href="#GeoToolkit-23"><span class="linenos">23</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">points</span><span class="p">:</span>
</span><span id="GeoToolkit-24"><a href="#GeoToolkit-24"><span class="linenos">24</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Point list is empty&quot;</span><span class="p">)</span>
</span><span id="GeoToolkit-25"><a href="#GeoToolkit-25"><span class="linenos">25</span></a>        <span class="k">if</span> <span class="n">resolution</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">resolution</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
</span><span id="GeoToolkit-26"><a href="#GeoToolkit-26"><span class="linenos">26</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Resolution must be between 0 and 15&quot;</span><span class="p">)</span>
</span><span id="GeoToolkit-27"><a href="#GeoToolkit-27"><span class="linenos">27</span></a>
</span><span id="GeoToolkit-28"><a href="#GeoToolkit-28"><span class="linenos">28</span></a>        <span class="n">multipoint</span> <span class="o">=</span> <span class="n">MultiPoint</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
</span><span id="GeoToolkit-29"><a href="#GeoToolkit-29"><span class="linenos">29</span></a>        <span class="n">convex_hull</span> <span class="o">=</span> <span class="n">multipoint</span><span class="o">.</span><span class="n">convex_hull</span>
</span><span id="GeoToolkit-30"><a href="#GeoToolkit-30"><span class="linenos">30</span></a>        <span class="n">buffered_polygon</span> <span class="o">=</span> <span class="n">convex_hull</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
</span><span id="GeoToolkit-31"><a href="#GeoToolkit-31"><span class="linenos">31</span></a>
</span><span id="GeoToolkit-32"><a href="#GeoToolkit-32"><span class="linenos">32</span></a>        <span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">buffered_polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">]</span>
</span><span id="GeoToolkit-33"><a href="#GeoToolkit-33"><span class="linenos">33</span></a>        <span class="n">polygon</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">LatLngPoly</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
</span><span id="GeoToolkit-34"><a href="#GeoToolkit-34"><span class="linenos">34</span></a>
</span><span id="GeoToolkit-35"><a href="#GeoToolkit-35"><span class="linenos">35</span></a>        <span class="n">hex_ids</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">polygon_to_cells</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">resolution</span><span class="p">)</span>
</span><span id="GeoToolkit-36"><a href="#GeoToolkit-36"><span class="linenos">36</span></a>
</span><span id="GeoToolkit-37"><a href="#GeoToolkit-37"><span class="linenos">37</span></a>        <span class="n">cells</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GeoToolkit-38"><a href="#GeoToolkit-38"><span class="linenos">38</span></a>        <span class="k">for</span> <span class="n">h3_id</span> <span class="ow">in</span> <span class="n">hex_ids</span><span class="p">:</span>
</span><span id="GeoToolkit-39"><a href="#GeoToolkit-39"><span class="linenos">39</span></a>            <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">cell_to_latlng</span><span class="p">(</span><span class="n">h3_id</span><span class="p">)</span>
</span><span id="GeoToolkit-40"><a href="#GeoToolkit-40"><span class="linenos">40</span></a>            <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
</span><span id="GeoToolkit-41"><a href="#GeoToolkit-41"><span class="linenos">41</span></a>            <span class="n">boundary</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">cell_to_boundary</span><span class="p">(</span><span class="n">h3_id</span><span class="p">)</span>
</span><span id="GeoToolkit-42"><a href="#GeoToolkit-42"><span class="linenos">42</span></a>            <span class="n">polygon</span> <span class="o">=</span> <span class="p">[(</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">boundary</span><span class="p">]</span>
</span><span id="GeoToolkit-43"><a href="#GeoToolkit-43"><span class="linenos">43</span></a>            <span class="n">cells</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">HexCell</span><span class="p">(</span><span class="n">h3_id</span><span class="o">=</span><span class="n">h3_id</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">polygon</span><span class="o">=</span><span class="n">polygon</span><span class="p">))</span>
</span><span id="GeoToolkit-44"><a href="#GeoToolkit-44"><span class="linenos">44</span></a>
</span><span id="GeoToolkit-45"><a href="#GeoToolkit-45"><span class="linenos">45</span></a>        <span class="k">return</span> <span class="n">HexGrid</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span> <span class="n">cells</span><span class="o">=</span><span class="n">cells</span><span class="p">)</span>
</span></pre></div>


    

                            <div id="GeoToolkit.generate_hex_grid" class="classattr">
                                        <input id="GeoToolkit.generate_hex_grid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">generate_hex_grid</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">Point</span><span class="p">]</span>,</span><span class="param">	<span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="n"><a href="#HexGrid">HexGrid</a></span>:</span></span>

                <label class="view-source-button" for="GeoToolkit.generate_hex_grid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeoToolkit.generate_hex_grid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeoToolkit.generate_hex_grid-10"><a href="#GeoToolkit.generate_hex_grid-10"><span class="linenos">10</span></a>    <span class="nd">@staticmethod</span>
</span><span id="GeoToolkit.generate_hex_grid-11"><a href="#GeoToolkit.generate_hex_grid-11"><span class="linenos">11</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_hex_grid</span><span class="p">(</span><span class="n">points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">],</span> <span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HexGrid</span><span class="p">:</span>
</span><span id="GeoToolkit.generate_hex_grid-12"><a href="#GeoToolkit.generate_hex_grid-12"><span class="linenos">12</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeoToolkit.generate_hex_grid-13"><a href="#GeoToolkit.generate_hex_grid-13"><span class="linenos">13</span></a><span class="sd">        Generate a hexagonal grid that covers the area defined by the input Shapely Points.</span>
</span><span id="GeoToolkit.generate_hex_grid-14"><a href="#GeoToolkit.generate_hex_grid-14"><span class="linenos">14</span></a>
</span><span id="GeoToolkit.generate_hex_grid-15"><a href="#GeoToolkit.generate_hex_grid-15"><span class="linenos">15</span></a><span class="sd">        Args:</span>
</span><span id="GeoToolkit.generate_hex_grid-16"><a href="#GeoToolkit.generate_hex_grid-16"><span class="linenos">16</span></a><span class="sd">            points: A list of shapely.geometry.Point objects representing geolocations.</span>
</span><span id="GeoToolkit.generate_hex_grid-17"><a href="#GeoToolkit.generate_hex_grid-17"><span class="linenos">17</span></a><span class="sd">                    Points must be in WGS84 (lon, lat) format.</span>
</span><span id="GeoToolkit.generate_hex_grid-18"><a href="#GeoToolkit.generate_hex_grid-18"><span class="linenos">18</span></a><span class="sd">            resolution: H3 resolution level (int), where higher means finer grid.</span>
</span><span id="GeoToolkit.generate_hex_grid-19"><a href="#GeoToolkit.generate_hex_grid-19"><span class="linenos">19</span></a>
</span><span id="GeoToolkit.generate_hex_grid-20"><a href="#GeoToolkit.generate_hex_grid-20"><span class="linenos">20</span></a><span class="sd">        Returns:</span>
</span><span id="GeoToolkit.generate_hex_grid-21"><a href="#GeoToolkit.generate_hex_grid-21"><span class="linenos">21</span></a><span class="sd">            GeoDataFrame with one row per hex cell, including geometry and h3_id.</span>
</span><span id="GeoToolkit.generate_hex_grid-22"><a href="#GeoToolkit.generate_hex_grid-22"><span class="linenos">22</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeoToolkit.generate_hex_grid-23"><a href="#GeoToolkit.generate_hex_grid-23"><span class="linenos">23</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">points</span><span class="p">:</span>
</span><span id="GeoToolkit.generate_hex_grid-24"><a href="#GeoToolkit.generate_hex_grid-24"><span class="linenos">24</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Point list is empty&quot;</span><span class="p">)</span>
</span><span id="GeoToolkit.generate_hex_grid-25"><a href="#GeoToolkit.generate_hex_grid-25"><span class="linenos">25</span></a>        <span class="k">if</span> <span class="n">resolution</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">resolution</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
</span><span id="GeoToolkit.generate_hex_grid-26"><a href="#GeoToolkit.generate_hex_grid-26"><span class="linenos">26</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Resolution must be between 0 and 15&quot;</span><span class="p">)</span>
</span><span id="GeoToolkit.generate_hex_grid-27"><a href="#GeoToolkit.generate_hex_grid-27"><span class="linenos">27</span></a>
</span><span id="GeoToolkit.generate_hex_grid-28"><a href="#GeoToolkit.generate_hex_grid-28"><span class="linenos">28</span></a>        <span class="n">multipoint</span> <span class="o">=</span> <span class="n">MultiPoint</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
</span><span id="GeoToolkit.generate_hex_grid-29"><a href="#GeoToolkit.generate_hex_grid-29"><span class="linenos">29</span></a>        <span class="n">convex_hull</span> <span class="o">=</span> <span class="n">multipoint</span><span class="o">.</span><span class="n">convex_hull</span>
</span><span id="GeoToolkit.generate_hex_grid-30"><a href="#GeoToolkit.generate_hex_grid-30"><span class="linenos">30</span></a>        <span class="n">buffered_polygon</span> <span class="o">=</span> <span class="n">convex_hull</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
</span><span id="GeoToolkit.generate_hex_grid-31"><a href="#GeoToolkit.generate_hex_grid-31"><span class="linenos">31</span></a>
</span><span id="GeoToolkit.generate_hex_grid-32"><a href="#GeoToolkit.generate_hex_grid-32"><span class="linenos">32</span></a>        <span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">buffered_polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">]</span>
</span><span id="GeoToolkit.generate_hex_grid-33"><a href="#GeoToolkit.generate_hex_grid-33"><span class="linenos">33</span></a>        <span class="n">polygon</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">LatLngPoly</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
</span><span id="GeoToolkit.generate_hex_grid-34"><a href="#GeoToolkit.generate_hex_grid-34"><span class="linenos">34</span></a>
</span><span id="GeoToolkit.generate_hex_grid-35"><a href="#GeoToolkit.generate_hex_grid-35"><span class="linenos">35</span></a>        <span class="n">hex_ids</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">polygon_to_cells</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">resolution</span><span class="p">)</span>
</span><span id="GeoToolkit.generate_hex_grid-36"><a href="#GeoToolkit.generate_hex_grid-36"><span class="linenos">36</span></a>
</span><span id="GeoToolkit.generate_hex_grid-37"><a href="#GeoToolkit.generate_hex_grid-37"><span class="linenos">37</span></a>        <span class="n">cells</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GeoToolkit.generate_hex_grid-38"><a href="#GeoToolkit.generate_hex_grid-38"><span class="linenos">38</span></a>        <span class="k">for</span> <span class="n">h3_id</span> <span class="ow">in</span> <span class="n">hex_ids</span><span class="p">:</span>
</span><span id="GeoToolkit.generate_hex_grid-39"><a href="#GeoToolkit.generate_hex_grid-39"><span class="linenos">39</span></a>            <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">cell_to_latlng</span><span class="p">(</span><span class="n">h3_id</span><span class="p">)</span>
</span><span id="GeoToolkit.generate_hex_grid-40"><a href="#GeoToolkit.generate_hex_grid-40"><span class="linenos">40</span></a>            <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
</span><span id="GeoToolkit.generate_hex_grid-41"><a href="#GeoToolkit.generate_hex_grid-41"><span class="linenos">41</span></a>            <span class="n">boundary</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">cell_to_boundary</span><span class="p">(</span><span class="n">h3_id</span><span class="p">)</span>
</span><span id="GeoToolkit.generate_hex_grid-42"><a href="#GeoToolkit.generate_hex_grid-42"><span class="linenos">42</span></a>            <span class="n">polygon</span> <span class="o">=</span> <span class="p">[(</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">boundary</span><span class="p">]</span>
</span><span id="GeoToolkit.generate_hex_grid-43"><a href="#GeoToolkit.generate_hex_grid-43"><span class="linenos">43</span></a>            <span class="n">cells</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">HexCell</span><span class="p">(</span><span class="n">h3_id</span><span class="o">=</span><span class="n">h3_id</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">polygon</span><span class="o">=</span><span class="n">polygon</span><span class="p">))</span>
</span><span id="GeoToolkit.generate_hex_grid-44"><a href="#GeoToolkit.generate_hex_grid-44"><span class="linenos">44</span></a>
</span><span id="GeoToolkit.generate_hex_grid-45"><a href="#GeoToolkit.generate_hex_grid-45"><span class="linenos">45</span></a>        <span class="k">return</span> <span class="n">HexGrid</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span> <span class="n">cells</span><span class="o">=</span><span class="n">cells</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generate a hexagonal grid that covers the area defined by the input Shapely Points.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>points:</strong>  A list of shapely.geometry.Point objects representing geolocations.
Points must be in WGS84 (lon, lat) format.</li>
<li><strong>resolution:</strong>  H3 resolution level (int), where higher means finer grid.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>GeoDataFrame with one row per hex cell, including geometry and h3_id.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="UrbanMobilitySystem">
                            <input id="UrbanMobilitySystem-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">UrbanMobilitySystem</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="UrbanMobilitySystem-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UrbanMobilitySystem"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UrbanMobilitySystem-15"><a href="#UrbanMobilitySystem-15"><span class="linenos"> 15</span></a><span class="k">class</span><span class="w"> </span><span class="nc">UrbanMobilitySystem</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem-16"><a href="#UrbanMobilitySystem-16"><span class="linenos"> 16</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-17"><a href="#UrbanMobilitySystem-17"><span class="linenos"> 17</span></a><span class="sd">    Represents an integrated urban mobility system, combining public transport,</span>
</span><span id="UrbanMobilitySystem-18"><a href="#UrbanMobilitySystem-18"><span class="linenos"> 18</span></a><span class="sd">    bike sharing infrastructure, and observed user demand.</span>
</span><span id="UrbanMobilitySystem-19"><a href="#UrbanMobilitySystem-19"><span class="linenos"> 19</span></a>
</span><span id="UrbanMobilitySystem-20"><a href="#UrbanMobilitySystem-20"><span class="linenos"> 20</span></a><span class="sd">    Attributes:</span>
</span><span id="UrbanMobilitySystem-21"><a href="#UrbanMobilitySystem-21"><span class="linenos"> 21</span></a><span class="sd">        public_transport: GTFS-defined public transport network.</span>
</span><span id="UrbanMobilitySystem-22"><a href="#UrbanMobilitySystem-22"><span class="linenos"> 22</span></a><span class="sd">        bike_stations: Metadata for bike sharing stations, including status and inventory.</span>
</span><span id="UrbanMobilitySystem-23"><a href="#UrbanMobilitySystem-23"><span class="linenos"> 23</span></a><span class="sd">        ridership: Observed passenger activity at public transport stops, inflow and outflow.</span>
</span><span id="UrbanMobilitySystem-24"><a href="#UrbanMobilitySystem-24"><span class="linenos"> 24</span></a><span class="sd">        bike_trips: Individual shared-bike trips with spatial and temporal metadata.</span>
</span><span id="UrbanMobilitySystem-25"><a href="#UrbanMobilitySystem-25"><span class="linenos"> 25</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-26"><a href="#UrbanMobilitySystem-26"><span class="linenos"> 26</span></a>    <span class="n">public_transport</span><span class="p">:</span> <span class="n">GTFSNetwork</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-27"><a href="#UrbanMobilitySystem-27"><span class="linenos"> 27</span></a>        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;GTFS-defined public transport network.&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-28"><a href="#UrbanMobilitySystem-28"><span class="linenos"> 28</span></a>    <span class="n">bike_stations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">StationInfoStatus</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-29"><a href="#UrbanMobilitySystem-29"><span class="linenos"> 29</span></a>        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Custom GBFS Bike sharing station infrastructure metadata, with status (inventory...) over time periods.&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-30"><a href="#UrbanMobilitySystem-30"><span class="linenos"> 30</span></a>    <span class="n">ridership</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Ridership</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-31"><a href="#UrbanMobilitySystem-31"><span class="linenos"> 31</span></a>        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Passenger activity at transit stops (e.g., boardings).&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-32"><a href="#UrbanMobilitySystem-32"><span class="linenos"> 32</span></a>    <span class="n">bike_trips</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BikeTrip</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-33"><a href="#UrbanMobilitySystem-33"><span class="linenos"> 33</span></a>        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Trip-level data from bike sharing systems.&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-34"><a href="#UrbanMobilitySystem-34"><span class="linenos"> 34</span></a>
</span><span id="UrbanMobilitySystem-35"><a href="#UrbanMobilitySystem-35"><span class="linenos"> 35</span></a>    <span class="n">hex_grid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">HexGrid</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-36"><a href="#UrbanMobilitySystem-36"><span class="linenos"> 36</span></a>        <span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Hexagonal grid for spatial analysis.&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-37"><a href="#UrbanMobilitySystem-37"><span class="linenos"> 37</span></a>
</span><span id="UrbanMobilitySystem-38"><a href="#UrbanMobilitySystem-38"><span class="linenos"> 38</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;data/output/geojson&quot;</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem-39"><a href="#UrbanMobilitySystem-39"><span class="linenos"> 39</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-40"><a href="#UrbanMobilitySystem-40"><span class="linenos"> 40</span></a><span class="sd">        Save the Urban Mobility System data to GeoJSON files. One file per data type.</span>
</span><span id="UrbanMobilitySystem-41"><a href="#UrbanMobilitySystem-41"><span class="linenos"> 41</span></a><span class="sd">        The files will be saved in the specified output path.</span>
</span><span id="UrbanMobilitySystem-42"><a href="#UrbanMobilitySystem-42"><span class="linenos"> 42</span></a><span class="sd">        :param output_path: The path where the GeoJSON files will be saved. Default is &quot;data/output/geojson&quot;.</span>
</span><span id="UrbanMobilitySystem-43"><a href="#UrbanMobilitySystem-43"><span class="linenos"> 43</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-44"><a href="#UrbanMobilitySystem-44"><span class="linenos"> 44</span></a>        <span class="n">Path</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-45"><a href="#UrbanMobilitySystem-45"><span class="linenos"> 45</span></a>
</span><span id="UrbanMobilitySystem-46"><a href="#UrbanMobilitySystem-46"><span class="linenos"> 46</span></a>        <span class="c1"># Save each layer as a separate GeoJSON file</span>
</span><span id="UrbanMobilitySystem-47"><a href="#UrbanMobilitySystem-47"><span class="linenos"> 47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stops_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;stops.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem-48"><a href="#UrbanMobilitySystem-48"><span class="linenos"> 48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itineraries_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;itineraries.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem-49"><a href="#UrbanMobilitySystem-49"><span class="linenos"> 49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bike_stations_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-50"><a href="#UrbanMobilitySystem-50"><span class="linenos"> 50</span></a>            <span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;bike_stations.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem-51"><a href="#UrbanMobilitySystem-51"><span class="linenos"> 51</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ridership_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-52"><a href="#UrbanMobilitySystem-52"><span class="linenos"> 52</span></a>            <span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;ridership.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem-53"><a href="#UrbanMobilitySystem-53"><span class="linenos"> 53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bike_trips_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-54"><a href="#UrbanMobilitySystem-54"><span class="linenos"> 54</span></a>            <span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;bike_trips.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem-55"><a href="#UrbanMobilitySystem-55"><span class="linenos"> 55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hex_grid_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-56"><a href="#UrbanMobilitySystem-56"><span class="linenos"> 56</span></a>            <span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;hex_grid.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem-57"><a href="#UrbanMobilitySystem-57"><span class="linenos"> 57</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;GeoJSON files saved to </span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-58"><a href="#UrbanMobilitySystem-58"><span class="linenos"> 58</span></a>
</span><span id="UrbanMobilitySystem-59"><a href="#UrbanMobilitySystem-59"><span class="linenos"> 59</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stops_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem-60"><a href="#UrbanMobilitySystem-60"><span class="linenos"> 60</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-61"><a href="#UrbanMobilitySystem-61"><span class="linenos"> 61</span></a><span class="sd">        Export stops as a GeoJSON file, with stop information as properties.</span>
</span><span id="UrbanMobilitySystem-62"><a href="#UrbanMobilitySystem-62"><span class="linenos"> 62</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem-63"><a href="#UrbanMobilitySystem-63"><span class="linenos"> 63</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem-64"><a href="#UrbanMobilitySystem-64"><span class="linenos"> 64</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-65"><a href="#UrbanMobilitySystem-65"><span class="linenos"> 65</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting stops to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-66"><a href="#UrbanMobilitySystem-66"><span class="linenos"> 66</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">public_transport</span><span class="o">.</span><span class="n">stops_to_geojson</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-67"><a href="#UrbanMobilitySystem-67"><span class="linenos"> 67</span></a>
</span><span id="UrbanMobilitySystem-68"><a href="#UrbanMobilitySystem-68"><span class="linenos"> 68</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">itineraries_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem-69"><a href="#UrbanMobilitySystem-69"><span class="linenos"> 69</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-70"><a href="#UrbanMobilitySystem-70"><span class="linenos"> 70</span></a><span class="sd">        Export each route&#39;s itinerary as a GeoJSON LineString, using stop sequences for each trip.</span>
</span><span id="UrbanMobilitySystem-71"><a href="#UrbanMobilitySystem-71"><span class="linenos"> 71</span></a>
</span><span id="UrbanMobilitySystem-72"><a href="#UrbanMobilitySystem-72"><span class="linenos"> 72</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem-73"><a href="#UrbanMobilitySystem-73"><span class="linenos"> 73</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem-74"><a href="#UrbanMobilitySystem-74"><span class="linenos"> 74</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-75"><a href="#UrbanMobilitySystem-75"><span class="linenos"> 75</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting routes to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-76"><a href="#UrbanMobilitySystem-76"><span class="linenos"> 76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">public_transport</span><span class="o">.</span><span class="n">itineraries_to_geojson</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-77"><a href="#UrbanMobilitySystem-77"><span class="linenos"> 77</span></a>
</span><span id="UrbanMobilitySystem-78"><a href="#UrbanMobilitySystem-78"><span class="linenos"> 78</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">bike_stations_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem-79"><a href="#UrbanMobilitySystem-79"><span class="linenos"> 79</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-80"><a href="#UrbanMobilitySystem-80"><span class="linenos"> 80</span></a><span class="sd">        Export bike stations as a GeoJSON file, with station information as properties.</span>
</span><span id="UrbanMobilitySystem-81"><a href="#UrbanMobilitySystem-81"><span class="linenos"> 81</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem-82"><a href="#UrbanMobilitySystem-82"><span class="linenos"> 82</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem-83"><a href="#UrbanMobilitySystem-83"><span class="linenos"> 83</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-84"><a href="#UrbanMobilitySystem-84"><span class="linenos"> 84</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting bike stations to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-85"><a href="#UrbanMobilitySystem-85"><span class="linenos"> 85</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_stations</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem-86"><a href="#UrbanMobilitySystem-86"><span class="linenos"> 86</span></a>            <span class="k">return</span>
</span><span id="UrbanMobilitySystem-87"><a href="#UrbanMobilitySystem-87"><span class="linenos"> 87</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-88"><a href="#UrbanMobilitySystem-88"><span class="linenos"> 88</span></a>            <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_stations</span><span class="p">],</span>
</span><span id="UrbanMobilitySystem-89"><a href="#UrbanMobilitySystem-89"><span class="linenos"> 89</span></a>            <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-90"><a href="#UrbanMobilitySystem-90"><span class="linenos"> 90</span></a>                      <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_stations</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">lat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">],</span>
</span><span id="UrbanMobilitySystem-91"><a href="#UrbanMobilitySystem-91"><span class="linenos"> 91</span></a>            <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</span><span id="UrbanMobilitySystem-92"><a href="#UrbanMobilitySystem-92"><span class="linenos"> 92</span></a>        <span class="p">)</span>
</span><span id="UrbanMobilitySystem-93"><a href="#UrbanMobilitySystem-93"><span class="linenos"> 93</span></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-94"><a href="#UrbanMobilitySystem-94"><span class="linenos"> 94</span></a>
</span><span id="UrbanMobilitySystem-95"><a href="#UrbanMobilitySystem-95"><span class="linenos"> 95</span></a>        <span class="k">return</span> <span class="n">gdf</span>
</span><span id="UrbanMobilitySystem-96"><a href="#UrbanMobilitySystem-96"><span class="linenos"> 96</span></a>
</span><span id="UrbanMobilitySystem-97"><a href="#UrbanMobilitySystem-97"><span class="linenos"> 97</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ridership_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem-98"><a href="#UrbanMobilitySystem-98"><span class="linenos"> 98</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-99"><a href="#UrbanMobilitySystem-99"><span class="linenos"> 99</span></a><span class="sd">        Export ridership data as a GeoJSON file, with stop information as properties.</span>
</span><span id="UrbanMobilitySystem-100"><a href="#UrbanMobilitySystem-100"><span class="linenos">100</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem-101"><a href="#UrbanMobilitySystem-101"><span class="linenos">101</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem-102"><a href="#UrbanMobilitySystem-102"><span class="linenos">102</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-103"><a href="#UrbanMobilitySystem-103"><span class="linenos">103</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting ridership to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-104"><a href="#UrbanMobilitySystem-104"><span class="linenos">104</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ridership</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem-105"><a href="#UrbanMobilitySystem-105"><span class="linenos">105</span></a>            <span class="k">return</span>
</span><span id="UrbanMobilitySystem-106"><a href="#UrbanMobilitySystem-106"><span class="linenos">106</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-107"><a href="#UrbanMobilitySystem-107"><span class="linenos">107</span></a>            <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ridership</span><span class="p">],</span>
</span><span id="UrbanMobilitySystem-108"><a href="#UrbanMobilitySystem-108"><span class="linenos">108</span></a>            <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">stop_lon</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">stop_lat</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-109"><a href="#UrbanMobilitySystem-109"><span class="linenos">109</span></a>                      <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ridership</span> <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">stop_lon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">stop_lat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">],</span>
</span><span id="UrbanMobilitySystem-110"><a href="#UrbanMobilitySystem-110"><span class="linenos">110</span></a>            <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</span><span id="UrbanMobilitySystem-111"><a href="#UrbanMobilitySystem-111"><span class="linenos">111</span></a>        <span class="p">)</span>
</span><span id="UrbanMobilitySystem-112"><a href="#UrbanMobilitySystem-112"><span class="linenos">112</span></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-113"><a href="#UrbanMobilitySystem-113"><span class="linenos">113</span></a>
</span><span id="UrbanMobilitySystem-114"><a href="#UrbanMobilitySystem-114"><span class="linenos">114</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">bike_trips_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem-115"><a href="#UrbanMobilitySystem-115"><span class="linenos">115</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-116"><a href="#UrbanMobilitySystem-116"><span class="linenos">116</span></a><span class="sd">        Export bike trips as a GeoJSON file, with trip information as properties.</span>
</span><span id="UrbanMobilitySystem-117"><a href="#UrbanMobilitySystem-117"><span class="linenos">117</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem-118"><a href="#UrbanMobilitySystem-118"><span class="linenos">118</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem-119"><a href="#UrbanMobilitySystem-119"><span class="linenos">119</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-120"><a href="#UrbanMobilitySystem-120"><span class="linenos">120</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting bike trips to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-121"><a href="#UrbanMobilitySystem-121"><span class="linenos">121</span></a>
</span><span id="UrbanMobilitySystem-122"><a href="#UrbanMobilitySystem-122"><span class="linenos">122</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_trips</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem-123"><a href="#UrbanMobilitySystem-123"><span class="linenos">123</span></a>            <span class="k">return</span>
</span><span id="UrbanMobilitySystem-124"><a href="#UrbanMobilitySystem-124"><span class="linenos">124</span></a>        <span class="c1"># This assumes BikeTrip has latitude_start, longitude_start, latitude_end, longitude_end</span>
</span><span id="UrbanMobilitySystem-125"><a href="#UrbanMobilitySystem-125"><span class="linenos">125</span></a>        <span class="n">features</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="UrbanMobilitySystem-126"><a href="#UrbanMobilitySystem-126"><span class="linenos">126</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_trips</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem-127"><a href="#UrbanMobilitySystem-127"><span class="linenos">127</span></a>            <span class="n">d</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
</span><span id="UrbanMobilitySystem-128"><a href="#UrbanMobilitySystem-128"><span class="linenos">128</span></a>            <span class="k">if</span> <span class="nb">all</span><span class="p">([</span>
</span><span id="UrbanMobilitySystem-129"><a href="#UrbanMobilitySystem-129"><span class="linenos">129</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;longitude_start&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem-130"><a href="#UrbanMobilitySystem-130"><span class="linenos">130</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;latitude_start&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem-131"><a href="#UrbanMobilitySystem-131"><span class="linenos">131</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;longitude_end&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem-132"><a href="#UrbanMobilitySystem-132"><span class="linenos">132</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;latitude_end&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem-133"><a href="#UrbanMobilitySystem-133"><span class="linenos">133</span></a>            <span class="p">]):</span>
</span><span id="UrbanMobilitySystem-134"><a href="#UrbanMobilitySystem-134"><span class="linenos">134</span></a>                <span class="n">d</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([</span>
</span><span id="UrbanMobilitySystem-135"><a href="#UrbanMobilitySystem-135"><span class="linenos">135</span></a>                    <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">longitude_start</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">latitude_start</span><span class="p">),</span>
</span><span id="UrbanMobilitySystem-136"><a href="#UrbanMobilitySystem-136"><span class="linenos">136</span></a>                    <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">longitude_end</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">latitude_end</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-137"><a href="#UrbanMobilitySystem-137"><span class="linenos">137</span></a>                <span class="p">])</span>
</span><span id="UrbanMobilitySystem-138"><a href="#UrbanMobilitySystem-138"><span class="linenos">138</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem-139"><a href="#UrbanMobilitySystem-139"><span class="linenos">139</span></a>                <span class="n">d</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="UrbanMobilitySystem-140"><a href="#UrbanMobilitySystem-140"><span class="linenos">140</span></a>            <span class="n">features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-141"><a href="#UrbanMobilitySystem-141"><span class="linenos">141</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem-142"><a href="#UrbanMobilitySystem-142"><span class="linenos">142</span></a>            <span class="n">features</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem-143"><a href="#UrbanMobilitySystem-143"><span class="linenos">143</span></a>            <span class="n">geometry</span><span class="o">=</span><span class="s2">&quot;geometry&quot;</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem-144"><a href="#UrbanMobilitySystem-144"><span class="linenos">144</span></a>            <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</span><span id="UrbanMobilitySystem-145"><a href="#UrbanMobilitySystem-145"><span class="linenos">145</span></a>        <span class="p">)</span>
</span><span id="UrbanMobilitySystem-146"><a href="#UrbanMobilitySystem-146"><span class="linenos">146</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
</span><span id="UrbanMobilitySystem-147"><a href="#UrbanMobilitySystem-147"><span class="linenos">147</span></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem-148"><a href="#UrbanMobilitySystem-148"><span class="linenos">148</span></a>
</span><span id="UrbanMobilitySystem-149"><a href="#UrbanMobilitySystem-149"><span class="linenos">149</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">hex_grid_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem-150"><a href="#UrbanMobilitySystem-150"><span class="linenos">150</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-151"><a href="#UrbanMobilitySystem-151"><span class="linenos">151</span></a><span class="sd">        Export the hex grid to a GeoJSON file.</span>
</span><span id="UrbanMobilitySystem-152"><a href="#UrbanMobilitySystem-152"><span class="linenos">152</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem-153"><a href="#UrbanMobilitySystem-153"><span class="linenos">153</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem-154"><a href="#UrbanMobilitySystem-154"><span class="linenos">154</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem-155"><a href="#UrbanMobilitySystem-155"><span class="linenos">155</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hex_grid</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem-156"><a href="#UrbanMobilitySystem-156"><span class="linenos">156</span></a>            <span class="k">return</span>
</span><span id="UrbanMobilitySystem-157"><a href="#UrbanMobilitySystem-157"><span class="linenos">157</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hex_grid</span><span class="o">.</span><span class="n">to_geojson</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Represents an integrated urban mobility system, combining public transport,
bike sharing infrastructure, and observed user demand.</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>public_transport:</strong>  GTFS-defined public transport network.</li>
<li><strong>bike_stations:</strong>  Metadata for bike sharing stations, including status and inventory.</li>
<li><strong>ridership:</strong>  Observed passenger activity at public transport stops, inflow and outflow.</li>
<li><strong>bike_trips:</strong>  Individual shared-bike trips with spatial and temporal metadata.</li>
</ul>
</div>


                            <div id="UrbanMobilitySystem.public_transport" class="classattr">
                                <div class="attr variable">
            <span class="name">public_transport</span><span class="annotation">: <a href="#GTFSNetwork">GTFSNetwork</a></span>

        
    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.public_transport"></a>
    
    

                            </div>
                            <div id="UrbanMobilitySystem.bike_stations" class="classattr">
                                <div class="attr variable">
            <span class="name">bike_stations</span><span class="annotation">: List[<a href="#StationInfoStatus">StationInfoStatus</a>]</span>

        
    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.bike_stations"></a>
    
    

                            </div>
                            <div id="UrbanMobilitySystem.ridership" class="classattr">
                                <div class="attr variable">
            <span class="name">ridership</span><span class="annotation">: List[<a href="#Ridership">Ridership</a>]</span>

        
    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.ridership"></a>
    
    

                            </div>
                            <div id="UrbanMobilitySystem.bike_trips" class="classattr">
                                <div class="attr variable">
            <span class="name">bike_trips</span><span class="annotation">: List[<a href="#BikeTrip">BikeTrip</a>]</span>

        
    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.bike_trips"></a>
    
    

                            </div>
                            <div id="UrbanMobilitySystem.hex_grid" class="classattr">
                                <div class="attr variable">
            <span class="name">hex_grid</span><span class="annotation">: Optional[<a href="#HexGrid">HexGrid</a>]</span>

        
    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.hex_grid"></a>
    
    

                            </div>
                            <div id="UrbanMobilitySystem.save_to_geojson" class="classattr">
                                        <input id="UrbanMobilitySystem.save_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;data/output/geojson&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="UrbanMobilitySystem.save_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.save_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UrbanMobilitySystem.save_to_geojson-38"><a href="#UrbanMobilitySystem.save_to_geojson-38"><span class="linenos">38</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;data/output/geojson&quot;</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-39"><a href="#UrbanMobilitySystem.save_to_geojson-39"><span class="linenos">39</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-40"><a href="#UrbanMobilitySystem.save_to_geojson-40"><span class="linenos">40</span></a><span class="sd">        Save the Urban Mobility System data to GeoJSON files. One file per data type.</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-41"><a href="#UrbanMobilitySystem.save_to_geojson-41"><span class="linenos">41</span></a><span class="sd">        The files will be saved in the specified output path.</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-42"><a href="#UrbanMobilitySystem.save_to_geojson-42"><span class="linenos">42</span></a><span class="sd">        :param output_path: The path where the GeoJSON files will be saved. Default is &quot;data/output/geojson&quot;.</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-43"><a href="#UrbanMobilitySystem.save_to_geojson-43"><span class="linenos">43</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-44"><a href="#UrbanMobilitySystem.save_to_geojson-44"><span class="linenos">44</span></a>        <span class="n">Path</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-45"><a href="#UrbanMobilitySystem.save_to_geojson-45"><span class="linenos">45</span></a>
</span><span id="UrbanMobilitySystem.save_to_geojson-46"><a href="#UrbanMobilitySystem.save_to_geojson-46"><span class="linenos">46</span></a>        <span class="c1"># Save each layer as a separate GeoJSON file</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-47"><a href="#UrbanMobilitySystem.save_to_geojson-47"><span class="linenos">47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stops_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;stops.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-48"><a href="#UrbanMobilitySystem.save_to_geojson-48"><span class="linenos">48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itineraries_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;itineraries.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-49"><a href="#UrbanMobilitySystem.save_to_geojson-49"><span class="linenos">49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bike_stations_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-50"><a href="#UrbanMobilitySystem.save_to_geojson-50"><span class="linenos">50</span></a>            <span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;bike_stations.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-51"><a href="#UrbanMobilitySystem.save_to_geojson-51"><span class="linenos">51</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ridership_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-52"><a href="#UrbanMobilitySystem.save_to_geojson-52"><span class="linenos">52</span></a>            <span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;ridership.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-53"><a href="#UrbanMobilitySystem.save_to_geojson-53"><span class="linenos">53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bike_trips_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-54"><a href="#UrbanMobilitySystem.save_to_geojson-54"><span class="linenos">54</span></a>            <span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;bike_trips.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-55"><a href="#UrbanMobilitySystem.save_to_geojson-55"><span class="linenos">55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hex_grid_to_geojson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-56"><a href="#UrbanMobilitySystem.save_to_geojson-56"><span class="linenos">56</span></a>            <span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;hex_grid.geojson&quot;</span><span class="p">))</span>
</span><span id="UrbanMobilitySystem.save_to_geojson-57"><a href="#UrbanMobilitySystem.save_to_geojson-57"><span class="linenos">57</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;GeoJSON files saved to </span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Save the Urban Mobility System data to GeoJSON files. One file per data type.
The files will be saved in the specified output path.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>output_path</strong>:  The path where the GeoJSON files will be saved. Default is "data/output/geojson".</li>
</ul>
</div>


                            </div>
                            <div id="UrbanMobilitySystem.stops_to_geojson" class="classattr">
                                        <input id="UrbanMobilitySystem.stops_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stops_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filepath</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="UrbanMobilitySystem.stops_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.stops_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UrbanMobilitySystem.stops_to_geojson-59"><a href="#UrbanMobilitySystem.stops_to_geojson-59"><span class="linenos">59</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stops_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem.stops_to_geojson-60"><a href="#UrbanMobilitySystem.stops_to_geojson-60"><span class="linenos">60</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.stops_to_geojson-61"><a href="#UrbanMobilitySystem.stops_to_geojson-61"><span class="linenos">61</span></a><span class="sd">        Export stops as a GeoJSON file, with stop information as properties.</span>
</span><span id="UrbanMobilitySystem.stops_to_geojson-62"><a href="#UrbanMobilitySystem.stops_to_geojson-62"><span class="linenos">62</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem.stops_to_geojson-63"><a href="#UrbanMobilitySystem.stops_to_geojson-63"><span class="linenos">63</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem.stops_to_geojson-64"><a href="#UrbanMobilitySystem.stops_to_geojson-64"><span class="linenos">64</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.stops_to_geojson-65"><a href="#UrbanMobilitySystem.stops_to_geojson-65"><span class="linenos">65</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting stops to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.stops_to_geojson-66"><a href="#UrbanMobilitySystem.stops_to_geojson-66"><span class="linenos">66</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">public_transport</span><span class="o">.</span><span class="n">stops_to_geojson</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Export stops as a GeoJSON file, with stop information as properties.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str):</strong>  The path to the output GeoJSON file.</li>
</ul>
</div>


                            </div>
                            <div id="UrbanMobilitySystem.itineraries_to_geojson" class="classattr">
                                        <input id="UrbanMobilitySystem.itineraries_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">itineraries_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filepath</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="UrbanMobilitySystem.itineraries_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.itineraries_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UrbanMobilitySystem.itineraries_to_geojson-68"><a href="#UrbanMobilitySystem.itineraries_to_geojson-68"><span class="linenos">68</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">itineraries_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem.itineraries_to_geojson-69"><a href="#UrbanMobilitySystem.itineraries_to_geojson-69"><span class="linenos">69</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.itineraries_to_geojson-70"><a href="#UrbanMobilitySystem.itineraries_to_geojson-70"><span class="linenos">70</span></a><span class="sd">        Export each route&#39;s itinerary as a GeoJSON LineString, using stop sequences for each trip.</span>
</span><span id="UrbanMobilitySystem.itineraries_to_geojson-71"><a href="#UrbanMobilitySystem.itineraries_to_geojson-71"><span class="linenos">71</span></a>
</span><span id="UrbanMobilitySystem.itineraries_to_geojson-72"><a href="#UrbanMobilitySystem.itineraries_to_geojson-72"><span class="linenos">72</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem.itineraries_to_geojson-73"><a href="#UrbanMobilitySystem.itineraries_to_geojson-73"><span class="linenos">73</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem.itineraries_to_geojson-74"><a href="#UrbanMobilitySystem.itineraries_to_geojson-74"><span class="linenos">74</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.itineraries_to_geojson-75"><a href="#UrbanMobilitySystem.itineraries_to_geojson-75"><span class="linenos">75</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting routes to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.itineraries_to_geojson-76"><a href="#UrbanMobilitySystem.itineraries_to_geojson-76"><span class="linenos">76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">public_transport</span><span class="o">.</span><span class="n">itineraries_to_geojson</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Export each route's itinerary as a GeoJSON LineString, using stop sequences for each trip.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str):</strong>  The path to the output GeoJSON file.</li>
</ul>
</div>


                            </div>
                            <div id="UrbanMobilitySystem.bike_stations_to_geojson" class="classattr">
                                        <input id="UrbanMobilitySystem.bike_stations_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">bike_stations_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filepath</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="UrbanMobilitySystem.bike_stations_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.bike_stations_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UrbanMobilitySystem.bike_stations_to_geojson-78"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-78"><span class="linenos">78</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">bike_stations_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-79"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-79"><span class="linenos">79</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-80"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-80"><span class="linenos">80</span></a><span class="sd">        Export bike stations as a GeoJSON file, with station information as properties.</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-81"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-81"><span class="linenos">81</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-82"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-82"><span class="linenos">82</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-83"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-83"><span class="linenos">83</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-84"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-84"><span class="linenos">84</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting bike stations to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-85"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-85"><span class="linenos">85</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_stations</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-86"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-86"><span class="linenos">86</span></a>            <span class="k">return</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-87"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-87"><span class="linenos">87</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-88"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-88"><span class="linenos">88</span></a>            <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_stations</span><span class="p">],</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-89"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-89"><span class="linenos">89</span></a>            <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-90"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-90"><span class="linenos">90</span></a>                      <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_stations</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">lat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">],</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-91"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-91"><span class="linenos">91</span></a>            <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-92"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-92"><span class="linenos">92</span></a>        <span class="p">)</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-93"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-93"><span class="linenos">93</span></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-94"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-94"><span class="linenos">94</span></a>
</span><span id="UrbanMobilitySystem.bike_stations_to_geojson-95"><a href="#UrbanMobilitySystem.bike_stations_to_geojson-95"><span class="linenos">95</span></a>        <span class="k">return</span> <span class="n">gdf</span>
</span></pre></div>


            <div class="docstring"><p>Export bike stations as a GeoJSON file, with station information as properties.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str):</strong>  The path to the output GeoJSON file.</li>
</ul>
</div>


                            </div>
                            <div id="UrbanMobilitySystem.ridership_to_geojson" class="classattr">
                                        <input id="UrbanMobilitySystem.ridership_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ridership_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filepath</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="UrbanMobilitySystem.ridership_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.ridership_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UrbanMobilitySystem.ridership_to_geojson-97"><a href="#UrbanMobilitySystem.ridership_to_geojson-97"><span class="linenos"> 97</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ridership_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-98"><a href="#UrbanMobilitySystem.ridership_to_geojson-98"><span class="linenos"> 98</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-99"><a href="#UrbanMobilitySystem.ridership_to_geojson-99"><span class="linenos"> 99</span></a><span class="sd">        Export ridership data as a GeoJSON file, with stop information as properties.</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-100"><a href="#UrbanMobilitySystem.ridership_to_geojson-100"><span class="linenos">100</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-101"><a href="#UrbanMobilitySystem.ridership_to_geojson-101"><span class="linenos">101</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-102"><a href="#UrbanMobilitySystem.ridership_to_geojson-102"><span class="linenos">102</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-103"><a href="#UrbanMobilitySystem.ridership_to_geojson-103"><span class="linenos">103</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting ridership to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-104"><a href="#UrbanMobilitySystem.ridership_to_geojson-104"><span class="linenos">104</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ridership</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-105"><a href="#UrbanMobilitySystem.ridership_to_geojson-105"><span class="linenos">105</span></a>            <span class="k">return</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-106"><a href="#UrbanMobilitySystem.ridership_to_geojson-106"><span class="linenos">106</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-107"><a href="#UrbanMobilitySystem.ridership_to_geojson-107"><span class="linenos">107</span></a>            <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ridership</span><span class="p">],</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-108"><a href="#UrbanMobilitySystem.ridership_to_geojson-108"><span class="linenos">108</span></a>            <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">stop_lon</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">stop_lat</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-109"><a href="#UrbanMobilitySystem.ridership_to_geojson-109"><span class="linenos">109</span></a>                      <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ridership</span> <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">stop_lon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">stop_lat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">],</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-110"><a href="#UrbanMobilitySystem.ridership_to_geojson-110"><span class="linenos">110</span></a>            <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-111"><a href="#UrbanMobilitySystem.ridership_to_geojson-111"><span class="linenos">111</span></a>        <span class="p">)</span>
</span><span id="UrbanMobilitySystem.ridership_to_geojson-112"><a href="#UrbanMobilitySystem.ridership_to_geojson-112"><span class="linenos">112</span></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Export ridership data as a GeoJSON file, with stop information as properties.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str):</strong>  The path to the output GeoJSON file.</li>
</ul>
</div>


                            </div>
                            <div id="UrbanMobilitySystem.bike_trips_to_geojson" class="classattr">
                                        <input id="UrbanMobilitySystem.bike_trips_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">bike_trips_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filepath</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="UrbanMobilitySystem.bike_trips_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.bike_trips_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UrbanMobilitySystem.bike_trips_to_geojson-114"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-114"><span class="linenos">114</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">bike_trips_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-115"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-115"><span class="linenos">115</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-116"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-116"><span class="linenos">116</span></a><span class="sd">        Export bike trips as a GeoJSON file, with trip information as properties.</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-117"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-117"><span class="linenos">117</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-118"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-118"><span class="linenos">118</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-119"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-119"><span class="linenos">119</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-120"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-120"><span class="linenos">120</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting bike trips to GeoJSON...&quot;</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-121"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-121"><span class="linenos">121</span></a>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-122"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-122"><span class="linenos">122</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_trips</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-123"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-123"><span class="linenos">123</span></a>            <span class="k">return</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-124"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-124"><span class="linenos">124</span></a>        <span class="c1"># This assumes BikeTrip has latitude_start, longitude_start, latitude_end, longitude_end</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-125"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-125"><span class="linenos">125</span></a>        <span class="n">features</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-126"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-126"><span class="linenos">126</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bike_trips</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-127"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-127"><span class="linenos">127</span></a>            <span class="n">d</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-128"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-128"><span class="linenos">128</span></a>            <span class="k">if</span> <span class="nb">all</span><span class="p">([</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-129"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-129"><span class="linenos">129</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;longitude_start&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-130"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-130"><span class="linenos">130</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;latitude_start&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-131"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-131"><span class="linenos">131</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;longitude_end&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-132"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-132"><span class="linenos">132</span></a>                <span class="nb">getattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;latitude_end&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-133"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-133"><span class="linenos">133</span></a>            <span class="p">]):</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-134"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-134"><span class="linenos">134</span></a>                <span class="n">d</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-135"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-135"><span class="linenos">135</span></a>                    <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">longitude_start</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">latitude_start</span><span class="p">),</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-136"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-136"><span class="linenos">136</span></a>                    <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">longitude_end</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">latitude_end</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-137"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-137"><span class="linenos">137</span></a>                <span class="p">])</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-138"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-138"><span class="linenos">138</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-139"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-139"><span class="linenos">139</span></a>                <span class="n">d</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-140"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-140"><span class="linenos">140</span></a>            <span class="n">features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-141"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-141"><span class="linenos">141</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-142"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-142"><span class="linenos">142</span></a>            <span class="n">features</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-143"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-143"><span class="linenos">143</span></a>            <span class="n">geometry</span><span class="o">=</span><span class="s2">&quot;geometry&quot;</span><span class="p">,</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-144"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-144"><span class="linenos">144</span></a>            <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-145"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-145"><span class="linenos">145</span></a>        <span class="p">)</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-146"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-146"><span class="linenos">146</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
</span><span id="UrbanMobilitySystem.bike_trips_to_geojson-147"><a href="#UrbanMobilitySystem.bike_trips_to_geojson-147"><span class="linenos">147</span></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Export bike trips as a GeoJSON file, with trip information as properties.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str):</strong>  The path to the output GeoJSON file.</li>
</ul>
</div>


                            </div>
                            <div id="UrbanMobilitySystem.hex_grid_to_geojson" class="classattr">
                                        <input id="UrbanMobilitySystem.hex_grid_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">hex_grid_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filepath</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="UrbanMobilitySystem.hex_grid_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.hex_grid_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UrbanMobilitySystem.hex_grid_to_geojson-149"><a href="#UrbanMobilitySystem.hex_grid_to_geojson-149"><span class="linenos">149</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">hex_grid_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="UrbanMobilitySystem.hex_grid_to_geojson-150"><a href="#UrbanMobilitySystem.hex_grid_to_geojson-150"><span class="linenos">150</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.hex_grid_to_geojson-151"><a href="#UrbanMobilitySystem.hex_grid_to_geojson-151"><span class="linenos">151</span></a><span class="sd">        Export the hex grid to a GeoJSON file.</span>
</span><span id="UrbanMobilitySystem.hex_grid_to_geojson-152"><a href="#UrbanMobilitySystem.hex_grid_to_geojson-152"><span class="linenos">152</span></a><span class="sd">        Args:</span>
</span><span id="UrbanMobilitySystem.hex_grid_to_geojson-153"><a href="#UrbanMobilitySystem.hex_grid_to_geojson-153"><span class="linenos">153</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file.</span>
</span><span id="UrbanMobilitySystem.hex_grid_to_geojson-154"><a href="#UrbanMobilitySystem.hex_grid_to_geojson-154"><span class="linenos">154</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="UrbanMobilitySystem.hex_grid_to_geojson-155"><a href="#UrbanMobilitySystem.hex_grid_to_geojson-155"><span class="linenos">155</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hex_grid</span><span class="p">:</span>
</span><span id="UrbanMobilitySystem.hex_grid_to_geojson-156"><a href="#UrbanMobilitySystem.hex_grid_to_geojson-156"><span class="linenos">156</span></a>            <span class="k">return</span>
</span><span id="UrbanMobilitySystem.hex_grid_to_geojson-157"><a href="#UrbanMobilitySystem.hex_grid_to_geojson-157"><span class="linenos">157</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hex_grid</span><span class="o">.</span><span class="n">to_geojson</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Export the hex grid to a GeoJSON file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str):</strong>  The path to the output GeoJSON file.</li>
</ul>
</div>


                            </div>
                            <div id="UrbanMobilitySystem.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#UrbanMobilitySystem.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="Stop">
                            <input id="Stop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Stop</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="Stop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Stop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Stop-7"><a href="#Stop-7"><span class="linenos"> 7</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Stop</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="Stop-8"><a href="#Stop-8"><span class="linenos"> 8</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Stop-9"><a href="#Stop-9"><span class="linenos"> 9</span></a><span class="sd">    Represents a physical location where passengers board or alight from vehicles.</span>
</span><span id="Stop-10"><a href="#Stop-10"><span class="linenos">10</span></a>
</span><span id="Stop-11"><a href="#Stop-11"><span class="linenos">11</span></a><span class="sd">    Attributes:</span>
</span><span id="Stop-12"><a href="#Stop-12"><span class="linenos">12</span></a><span class="sd">        stop_id: Unique identifier for the stop.</span>
</span><span id="Stop-13"><a href="#Stop-13"><span class="linenos">13</span></a><span class="sd">        stop_name: Name of the stop.</span>
</span><span id="Stop-14"><a href="#Stop-14"><span class="linenos">14</span></a><span class="sd">        stop_desc: Description of the stop.</span>
</span><span id="Stop-15"><a href="#Stop-15"><span class="linenos">15</span></a><span class="sd">        stop_lat: Latitude of the stop.</span>
</span><span id="Stop-16"><a href="#Stop-16"><span class="linenos">16</span></a><span class="sd">        stop_lon: Longitude of the stop.</span>
</span><span id="Stop-17"><a href="#Stop-17"><span class="linenos">17</span></a><span class="sd">        zone_id: Identifier for fare zone.</span>
</span><span id="Stop-18"><a href="#Stop-18"><span class="linenos">18</span></a><span class="sd">        stop_url: URL with stop information.</span>
</span><span id="Stop-19"><a href="#Stop-19"><span class="linenos">19</span></a><span class="sd">        location_type: Indicates if it&#39;s a stop or station.</span>
</span><span id="Stop-20"><a href="#Stop-20"><span class="linenos">20</span></a><span class="sd">        parent_station: Identifier for parent station (if nested).</span>
</span><span id="Stop-21"><a href="#Stop-21"><span class="linenos">21</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Stop-22"><a href="#Stop-22"><span class="linenos">22</span></a>    <span class="n">stop_id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Stop-23"><a href="#Stop-23"><span class="linenos">23</span></a>    <span class="n">stop_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Stop-24"><a href="#Stop-24"><span class="linenos">24</span></a>    <span class="n">stop_desc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Stop-25"><a href="#Stop-25"><span class="linenos">25</span></a>    <span class="n">stop_lat</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Stop-26"><a href="#Stop-26"><span class="linenos">26</span></a>    <span class="n">stop_lon</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Stop-27"><a href="#Stop-27"><span class="linenos">27</span></a>    <span class="n">zone_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Stop-28"><a href="#Stop-28"><span class="linenos">28</span></a>    <span class="n">stop_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Stop-29"><a href="#Stop-29"><span class="linenos">29</span></a>    <span class="n">location_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 0 = stop, 1 = station</span>
</span><span id="Stop-30"><a href="#Stop-30"><span class="linenos">30</span></a>    <span class="n">parent_station</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Represents a physical location where passengers board or alight from vehicles.</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>stop_id:</strong>  Unique identifier for the stop.</li>
<li><strong>stop_name:</strong>  Name of the stop.</li>
<li><strong>stop_desc:</strong>  Description of the stop.</li>
<li><strong>stop_lat:</strong>  Latitude of the stop.</li>
<li><strong>stop_lon:</strong>  Longitude of the stop.</li>
<li><strong>zone_id:</strong>  Identifier for fare zone.</li>
<li><strong>stop_url:</strong>  URL with stop information.</li>
<li><strong>location_type:</strong>  Indicates if it's a stop or station.</li>
<li><strong>parent_station:</strong>  Identifier for parent station (if nested).</li>
</ul>
</div>


                            <div id="Stop.stop_id" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Stop.stop_id"></a>
    
    

                            </div>
                            <div id="Stop.stop_name" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Stop.stop_name"></a>
    
    

                            </div>
                            <div id="Stop.stop_desc" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_desc</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Stop.stop_desc"></a>
    
    

                            </div>
                            <div id="Stop.stop_lat" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_lat</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#Stop.stop_lat"></a>
    
    

                            </div>
                            <div id="Stop.stop_lon" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_lon</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#Stop.stop_lon"></a>
    
    

                            </div>
                            <div id="Stop.zone_id" class="classattr">
                                <div class="attr variable">
            <span class="name">zone_id</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Stop.zone_id"></a>
    
    

                            </div>
                            <div id="Stop.stop_url" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_url</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Stop.stop_url"></a>
    
    

                            </div>
                            <div id="Stop.location_type" class="classattr">
                                <div class="attr variable">
            <span class="name">location_type</span><span class="annotation">: Optional[int]</span>

        
    </div>
    <a class="headerlink" href="#Stop.location_type"></a>
    
    

                            </div>
                            <div id="Stop.parent_station" class="classattr">
                                <div class="attr variable">
            <span class="name">parent_station</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Stop.parent_station"></a>
    
    

                            </div>
                            <div id="Stop.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#Stop.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="Route">
                            <input id="Route-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Route</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="Route-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Route"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Route-7"><a href="#Route-7"><span class="linenos"> 7</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Route</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="Route-8"><a href="#Route-8"><span class="linenos"> 8</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Route-9"><a href="#Route-9"><span class="linenos"> 9</span></a><span class="sd">    Describes a route for transit services (e.g., bus, train, subway).</span>
</span><span id="Route-10"><a href="#Route-10"><span class="linenos">10</span></a>
</span><span id="Route-11"><a href="#Route-11"><span class="linenos">11</span></a><span class="sd">    Attributes:</span>
</span><span id="Route-12"><a href="#Route-12"><span class="linenos">12</span></a><span class="sd">        route_id: Unique identifier for the route.</span>
</span><span id="Route-13"><a href="#Route-13"><span class="linenos">13</span></a><span class="sd">        agency_id: Identifies the agency for the route.</span>
</span><span id="Route-14"><a href="#Route-14"><span class="linenos">14</span></a><span class="sd">        route_short_name: Short name used in signs and schedules.</span>
</span><span id="Route-15"><a href="#Route-15"><span class="linenos">15</span></a><span class="sd">        route_long_name: Descriptive name of the route.</span>
</span><span id="Route-16"><a href="#Route-16"><span class="linenos">16</span></a><span class="sd">        route_desc: Description of the route.</span>
</span><span id="Route-17"><a href="#Route-17"><span class="linenos">17</span></a><span class="sd">        route_type: Type of transportation used.</span>
</span><span id="Route-18"><a href="#Route-18"><span class="linenos">18</span></a><span class="sd">        route_url: URL with information about the route.</span>
</span><span id="Route-19"><a href="#Route-19"><span class="linenos">19</span></a><span class="sd">        route_color: Color used to display the route on a map.</span>
</span><span id="Route-20"><a href="#Route-20"><span class="linenos">20</span></a><span class="sd">        route_text_color: Text color used on signage.</span>
</span><span id="Route-21"><a href="#Route-21"><span class="linenos">21</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Route-22"><a href="#Route-22"><span class="linenos">22</span></a>    <span class="n">route_id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Route-23"><a href="#Route-23"><span class="linenos">23</span></a>    <span class="n">agency_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Route-24"><a href="#Route-24"><span class="linenos">24</span></a>    <span class="n">route_short_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Route-25"><a href="#Route-25"><span class="linenos">25</span></a>    <span class="n">route_long_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Route-26"><a href="#Route-26"><span class="linenos">26</span></a>    <span class="n">route_desc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Route-27"><a href="#Route-27"><span class="linenos">27</span></a>    <span class="n">route_type</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="Route-28"><a href="#Route-28"><span class="linenos">28</span></a>    <span class="n">route_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Route-29"><a href="#Route-29"><span class="linenos">29</span></a>    <span class="n">route_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Route-30"><a href="#Route-30"><span class="linenos">30</span></a>    <span class="n">route_text_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Describes a route for transit services (e.g., bus, train, subway).</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>route_id:</strong>  Unique identifier for the route.</li>
<li><strong>agency_id:</strong>  Identifies the agency for the route.</li>
<li><strong>route_short_name:</strong>  Short name used in signs and schedules.</li>
<li><strong>route_long_name:</strong>  Descriptive name of the route.</li>
<li><strong>route_desc:</strong>  Description of the route.</li>
<li><strong>route_type:</strong>  Type of transportation used.</li>
<li><strong>route_url:</strong>  URL with information about the route.</li>
<li><strong>route_color:</strong>  Color used to display the route on a map.</li>
<li><strong>route_text_color:</strong>  Text color used on signage.</li>
</ul>
</div>


                            <div id="Route.route_id" class="classattr">
                                <div class="attr variable">
            <span class="name">route_id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Route.route_id"></a>
    
    

                            </div>
                            <div id="Route.agency_id" class="classattr">
                                <div class="attr variable">
            <span class="name">agency_id</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Route.agency_id"></a>
    
    

                            </div>
                            <div id="Route.route_short_name" class="classattr">
                                <div class="attr variable">
            <span class="name">route_short_name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Route.route_short_name"></a>
    
    

                            </div>
                            <div id="Route.route_long_name" class="classattr">
                                <div class="attr variable">
            <span class="name">route_long_name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Route.route_long_name"></a>
    
    

                            </div>
                            <div id="Route.route_desc" class="classattr">
                                <div class="attr variable">
            <span class="name">route_desc</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Route.route_desc"></a>
    
    

                            </div>
                            <div id="Route.route_type" class="classattr">
                                <div class="attr variable">
            <span class="name">route_type</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Route.route_type"></a>
    
    

                            </div>
                            <div id="Route.route_url" class="classattr">
                                <div class="attr variable">
            <span class="name">route_url</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Route.route_url"></a>
    
    

                            </div>
                            <div id="Route.route_color" class="classattr">
                                <div class="attr variable">
            <span class="name">route_color</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Route.route_color"></a>
    
    

                            </div>
                            <div id="Route.route_text_color" class="classattr">
                                <div class="attr variable">
            <span class="name">route_text_color</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Route.route_text_color"></a>
    
    

                            </div>
                            <div id="Route.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#Route.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="Trip">
                            <input id="Trip-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Trip</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="Trip-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Trip"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Trip-7"><a href="#Trip-7"><span class="linenos"> 7</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Trip</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="Trip-8"><a href="#Trip-8"><span class="linenos"> 8</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Trip-9"><a href="#Trip-9"><span class="linenos"> 9</span></a><span class="sd">    Defines a trip: a sequence of two or more stops with scheduled times.</span>
</span><span id="Trip-10"><a href="#Trip-10"><span class="linenos">10</span></a>
</span><span id="Trip-11"><a href="#Trip-11"><span class="linenos">11</span></a><span class="sd">    Attributes:</span>
</span><span id="Trip-12"><a href="#Trip-12"><span class="linenos">12</span></a><span class="sd">        route_id: Identifier for the route this trip belongs to.</span>
</span><span id="Trip-13"><a href="#Trip-13"><span class="linenos">13</span></a><span class="sd">        service_id: Identifier for the service schedule.</span>
</span><span id="Trip-14"><a href="#Trip-14"><span class="linenos">14</span></a><span class="sd">        trip_id: Unique identifier for the trip.</span>
</span><span id="Trip-15"><a href="#Trip-15"><span class="linenos">15</span></a><span class="sd">        trip_headsign: Text shown to riders describing trip destination.</span>
</span><span id="Trip-16"><a href="#Trip-16"><span class="linenos">16</span></a><span class="sd">        trip_short_name: Public-facing identifier for the trip.</span>
</span><span id="Trip-17"><a href="#Trip-17"><span class="linenos">17</span></a><span class="sd">        direction_id: Indicates travel direction (0 or 1).</span>
</span><span id="Trip-18"><a href="#Trip-18"><span class="linenos">18</span></a><span class="sd">        block_id: Identifies a block of sequential trips.</span>
</span><span id="Trip-19"><a href="#Trip-19"><span class="linenos">19</span></a><span class="sd">        shape_id: Identifies the shape used to draw the route.</span>
</span><span id="Trip-20"><a href="#Trip-20"><span class="linenos">20</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Trip-21"><a href="#Trip-21"><span class="linenos">21</span></a>    <span class="n">route_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Trip-22"><a href="#Trip-22"><span class="linenos">22</span></a>    <span class="n">service_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Trip-23"><a href="#Trip-23"><span class="linenos">23</span></a>    <span class="n">trip_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Trip-24"><a href="#Trip-24"><span class="linenos">24</span></a>    <span class="n">trip_headsign</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Trip-25"><a href="#Trip-25"><span class="linenos">25</span></a>    <span class="n">trip_short_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Trip-26"><a href="#Trip-26"><span class="linenos">26</span></a>    <span class="n">direction_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Trip-27"><a href="#Trip-27"><span class="linenos">27</span></a>    <span class="n">block_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Trip-28"><a href="#Trip-28"><span class="linenos">28</span></a>    <span class="n">shape_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Defines a trip: a sequence of two or more stops with scheduled times.</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>route_id:</strong>  Identifier for the route this trip belongs to.</li>
<li><strong>service_id:</strong>  Identifier for the service schedule.</li>
<li><strong>trip_id:</strong>  Unique identifier for the trip.</li>
<li><strong>trip_headsign:</strong>  Text shown to riders describing trip destination.</li>
<li><strong>trip_short_name:</strong>  Public-facing identifier for the trip.</li>
<li><strong>direction_id:</strong>  Indicates travel direction (0 or 1).</li>
<li><strong>block_id:</strong>  Identifies a block of sequential trips.</li>
<li><strong>shape_id:</strong>  Identifies the shape used to draw the route.</li>
</ul>
</div>


                            <div id="Trip.route_id" class="classattr">
                                <div class="attr variable">
            <span class="name">route_id</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Trip.route_id"></a>
    
    

                            </div>
                            <div id="Trip.service_id" class="classattr">
                                <div class="attr variable">
            <span class="name">service_id</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Trip.service_id"></a>
    
    

                            </div>
                            <div id="Trip.trip_id" class="classattr">
                                <div class="attr variable">
            <span class="name">trip_id</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Trip.trip_id"></a>
    
    

                            </div>
                            <div id="Trip.trip_headsign" class="classattr">
                                <div class="attr variable">
            <span class="name">trip_headsign</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Trip.trip_headsign"></a>
    
    

                            </div>
                            <div id="Trip.trip_short_name" class="classattr">
                                <div class="attr variable">
            <span class="name">trip_short_name</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Trip.trip_short_name"></a>
    
    

                            </div>
                            <div id="Trip.direction_id" class="classattr">
                                <div class="attr variable">
            <span class="name">direction_id</span><span class="annotation">: Optional[int]</span>

        
    </div>
    <a class="headerlink" href="#Trip.direction_id"></a>
    
    

                            </div>
                            <div id="Trip.block_id" class="classattr">
                                <div class="attr variable">
            <span class="name">block_id</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Trip.block_id"></a>
    
    

                            </div>
                            <div id="Trip.shape_id" class="classattr">
                                <div class="attr variable">
            <span class="name">shape_id</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Trip.shape_id"></a>
    
    

                            </div>
                            <div id="Trip.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#Trip.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="Agency">
                            <input id="Agency-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Agency</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="Agency-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Agency"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Agency-7"><a href="#Agency-7"><span class="linenos"> 7</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Agency</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="Agency-8"><a href="#Agency-8"><span class="linenos"> 8</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Agency-9"><a href="#Agency-9"><span class="linenos"> 9</span></a><span class="sd">    Represents a public transport agency that provides transit services.</span>
</span><span id="Agency-10"><a href="#Agency-10"><span class="linenos">10</span></a>
</span><span id="Agency-11"><a href="#Agency-11"><span class="linenos">11</span></a><span class="sd">    Attributes:</span>
</span><span id="Agency-12"><a href="#Agency-12"><span class="linenos">12</span></a><span class="sd">        agency_id: Unique identifier for the agency (optional if only one agency).</span>
</span><span id="Agency-13"><a href="#Agency-13"><span class="linenos">13</span></a><span class="sd">        agency_name: Full name of the agency.</span>
</span><span id="Agency-14"><a href="#Agency-14"><span class="linenos">14</span></a><span class="sd">        agency_url: URL of the agency&#39;s website.</span>
</span><span id="Agency-15"><a href="#Agency-15"><span class="linenos">15</span></a><span class="sd">        agency_timezone: Timezone where the agency is located.</span>
</span><span id="Agency-16"><a href="#Agency-16"><span class="linenos">16</span></a><span class="sd">        agency_lang: Language used for text in the feed.</span>
</span><span id="Agency-17"><a href="#Agency-17"><span class="linenos">17</span></a><span class="sd">        agency_phone: A voice telephone number for the agency.</span>
</span><span id="Agency-18"><a href="#Agency-18"><span class="linenos">18</span></a><span class="sd">        agency_fare_url: URL of a web page with fare information.</span>
</span><span id="Agency-19"><a href="#Agency-19"><span class="linenos">19</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Agency-20"><a href="#Agency-20"><span class="linenos">20</span></a>    <span class="n">agency_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Agency-21"><a href="#Agency-21"><span class="linenos">21</span></a>    <span class="n">agency_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Agency-22"><a href="#Agency-22"><span class="linenos">22</span></a>    <span class="n">agency_url</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Agency-23"><a href="#Agency-23"><span class="linenos">23</span></a>    <span class="n">agency_timezone</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Agency-24"><a href="#Agency-24"><span class="linenos">24</span></a>    <span class="n">agency_lang</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Agency-25"><a href="#Agency-25"><span class="linenos">25</span></a>    <span class="n">agency_phone</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Agency-26"><a href="#Agency-26"><span class="linenos">26</span></a>    <span class="n">agency_fare_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Represents a public transport agency that provides transit services.</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>agency_id:</strong>  Unique identifier for the agency (optional if only one agency).</li>
<li><strong>agency_name:</strong>  Full name of the agency.</li>
<li><strong>agency_url:</strong>  URL of the agency's website.</li>
<li><strong>agency_timezone:</strong>  Timezone where the agency is located.</li>
<li><strong>agency_lang:</strong>  Language used for text in the feed.</li>
<li><strong>agency_phone:</strong>  A voice telephone number for the agency.</li>
<li><strong>agency_fare_url:</strong>  URL of a web page with fare information.</li>
</ul>
</div>


                            <div id="Agency.agency_id" class="classattr">
                                <div class="attr variable">
            <span class="name">agency_id</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Agency.agency_id"></a>
    
    

                            </div>
                            <div id="Agency.agency_name" class="classattr">
                                <div class="attr variable">
            <span class="name">agency_name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Agency.agency_name"></a>
    
    

                            </div>
                            <div id="Agency.agency_url" class="classattr">
                                <div class="attr variable">
            <span class="name">agency_url</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Agency.agency_url"></a>
    
    

                            </div>
                            <div id="Agency.agency_timezone" class="classattr">
                                <div class="attr variable">
            <span class="name">agency_timezone</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Agency.agency_timezone"></a>
    
    

                            </div>
                            <div id="Agency.agency_lang" class="classattr">
                                <div class="attr variable">
            <span class="name">agency_lang</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Agency.agency_lang"></a>
    
    

                            </div>
                            <div id="Agency.agency_phone" class="classattr">
                                <div class="attr variable">
            <span class="name">agency_phone</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Agency.agency_phone"></a>
    
    

                            </div>
                            <div id="Agency.agency_fare_url" class="classattr">
                                <div class="attr variable">
            <span class="name">agency_fare_url</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#Agency.agency_fare_url"></a>
    
    

                            </div>
                            <div id="Agency.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#Agency.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="StationInfoStatus">
                            <input id="StationInfoStatus-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">StationInfoStatus</span><wbr>(<span class="base">sum_gtfs_geojson.models.gbfs.station_info.StationInfo</span>):

                <label class="view-source-button" for="StationInfoStatus-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StationInfoStatus"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StationInfoStatus-7"><a href="#StationInfoStatus-7"><span class="linenos"> 7</span></a><span class="k">class</span><span class="w"> </span><span class="nc">StationInfoStatus</span><span class="p">(</span><span class="n">StationInfo</span><span class="p">):</span>
</span><span id="StationInfoStatus-8"><a href="#StationInfoStatus-8"><span class="linenos"> 8</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="StationInfoStatus-9"><a href="#StationInfoStatus-9"><span class="linenos"> 9</span></a><span class="sd">    Represents the time series of status observations for a single bike station.</span>
</span><span id="StationInfoStatus-10"><a href="#StationInfoStatus-10"><span class="linenos">10</span></a>
</span><span id="StationInfoStatus-11"><a href="#StationInfoStatus-11"><span class="linenos">11</span></a><span class="sd">    This model is useful for tracking how bike and dock availability changes over time</span>
</span><span id="StationInfoStatus-12"><a href="#StationInfoStatus-12"><span class="linenos">12</span></a><span class="sd">    at a specific station. It supports analysis of temporal patterns, station reliability,</span>
</span><span id="StationInfoStatus-13"><a href="#StationInfoStatus-13"><span class="linenos">13</span></a><span class="sd">    and peak usage periods.</span>
</span><span id="StationInfoStatus-14"><a href="#StationInfoStatus-14"><span class="linenos">14</span></a>
</span><span id="StationInfoStatus-15"><a href="#StationInfoStatus-15"><span class="linenos">15</span></a><span class="sd">    Attributes:</span>
</span><span id="StationInfoStatus-16"><a href="#StationInfoStatus-16"><span class="linenos">16</span></a><span class="sd">        station_id (str): Unique identifier for the station.</span>
</span><span id="StationInfoStatus-17"><a href="#StationInfoStatus-17"><span class="linenos">17</span></a><span class="sd">        history (List[StationStatusPeriod]): Chronologically ordered list of status snapshots</span>
</span><span id="StationInfoStatus-18"><a href="#StationInfoStatus-18"><span class="linenos">18</span></a><span class="sd">            representing the station&#39;s inventory (bikes/docks) over periods of time.</span>
</span><span id="StationInfoStatus-19"><a href="#StationInfoStatus-19"><span class="linenos">19</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="StationInfoStatus-20"><a href="#StationInfoStatus-20"><span class="linenos">20</span></a>    <span class="n">history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">StationStatusPeriod</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="StationInfoStatus-21"><a href="#StationInfoStatus-21"><span class="linenos">21</span></a>        <span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of status records over periods of time.&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Represents the time series of status observations for a single bike station.</p>

<p>This model is useful for tracking how bike and dock availability changes over time
at a specific station. It supports analysis of temporal patterns, station reliability,
and peak usage periods.</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>station_id (str):</strong>  Unique identifier for the station.</li>
<li><strong>history (List[StationStatusPeriod]):</strong>  Chronologically ordered list of status snapshots
representing the station's inventory (bikes/docks) over periods of time.</li>
</ul>
</div>


                            <div id="StationInfoStatus.history" class="classattr">
                                <div class="attr variable">
            <span class="name">history</span><span class="annotation">: List[sum_gtfs_geojson.models.gbfs.station_status_period.StationStatusPeriod]</span>

        
    </div>
    <a class="headerlink" href="#StationInfoStatus.history"></a>
    
    

                            </div>
                            <div id="StationInfoStatus.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#StationInfoStatus.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="BikeTrip">
                            <input id="BikeTrip-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">BikeTrip</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="BikeTrip-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BikeTrip"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BikeTrip-7"><a href="#BikeTrip-7"><span class="linenos"> 7</span></a><span class="k">class</span><span class="w"> </span><span class="nc">BikeTrip</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="BikeTrip-8"><a href="#BikeTrip-8"><span class="linenos"> 8</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="BikeTrip-9"><a href="#BikeTrip-9"><span class="linenos"> 9</span></a><span class="sd">    Represents a single bike-sharing trip made by a user or rental.</span>
</span><span id="BikeTrip-10"><a href="#BikeTrip-10"><span class="linenos">10</span></a>
</span><span id="BikeTrip-11"><a href="#BikeTrip-11"><span class="linenos">11</span></a><span class="sd">    This model captures trip-level data including timestamps, GPS locations,</span>
</span><span id="BikeTrip-12"><a href="#BikeTrip-12"><span class="linenos">12</span></a><span class="sd">    distance, and vehicle type. It is typically used for micromobility analysis,</span>
</span><span id="BikeTrip-13"><a href="#BikeTrip-13"><span class="linenos">13</span></a><span class="sd">    demand modeling, or origin-destination mapping.</span>
</span><span id="BikeTrip-14"><a href="#BikeTrip-14"><span class="linenos">14</span></a>
</span><span id="BikeTrip-15"><a href="#BikeTrip-15"><span class="linenos">15</span></a><span class="sd">    Attributes:</span>
</span><span id="BikeTrip-16"><a href="#BikeTrip-16"><span class="linenos">16</span></a><span class="sd">        trip_id (str): Unique identifier for the trip.</span>
</span><span id="BikeTrip-17"><a href="#BikeTrip-17"><span class="linenos">17</span></a><span class="sd">        rental_id (str): Identifier of the rental transaction (may differ from trip_id).</span>
</span><span id="BikeTrip-18"><a href="#BikeTrip-18"><span class="linenos">18</span></a><span class="sd">        vehicle_type (str): Type of vehicle used (e.g., &quot;bike&quot;, &quot;e-bike&quot;, &quot;scooter&quot;).</span>
</span><span id="BikeTrip-19"><a href="#BikeTrip-19"><span class="linenos">19</span></a><span class="sd">        trip_started_at_utc (datetime): UTC timestamp when the trip began.</span>
</span><span id="BikeTrip-20"><a href="#BikeTrip-20"><span class="linenos">20</span></a><span class="sd">        trip_ended_at_utc (datetime): UTC timestamp when the trip ended.</span>
</span><span id="BikeTrip-21"><a href="#BikeTrip-21"><span class="linenos">21</span></a><span class="sd">        latitude_start (float): Latitude of the trip origin.</span>
</span><span id="BikeTrip-22"><a href="#BikeTrip-22"><span class="linenos">22</span></a><span class="sd">        longitude_start (float): Longitude of the trip origin.</span>
</span><span id="BikeTrip-23"><a href="#BikeTrip-23"><span class="linenos">23</span></a><span class="sd">        latitude_end (float): Latitude of the trip destination.</span>
</span><span id="BikeTrip-24"><a href="#BikeTrip-24"><span class="linenos">24</span></a><span class="sd">        longitude_end (float): Longitude of the trip destination.</span>
</span><span id="BikeTrip-25"><a href="#BikeTrip-25"><span class="linenos">25</span></a><span class="sd">        distance_in_km (float): Distance traveled during the trip in kilometers.</span>
</span><span id="BikeTrip-26"><a href="#BikeTrip-26"><span class="linenos">26</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="BikeTrip-27"><a href="#BikeTrip-27"><span class="linenos">27</span></a>
</span><span id="BikeTrip-28"><a href="#BikeTrip-28"><span class="linenos">28</span></a>    <span class="n">trip_id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="BikeTrip-29"><a href="#BikeTrip-29"><span class="linenos">29</span></a>    <span class="n">rental_id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="BikeTrip-30"><a href="#BikeTrip-30"><span class="linenos">30</span></a>    <span class="n">vehicle_type</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="BikeTrip-31"><a href="#BikeTrip-31"><span class="linenos">31</span></a>    <span class="n">trip_started_at_utc</span><span class="p">:</span> <span class="n">datetime</span>
</span><span id="BikeTrip-32"><a href="#BikeTrip-32"><span class="linenos">32</span></a>    <span class="n">trip_ended_at_utc</span><span class="p">:</span> <span class="n">datetime</span>
</span><span id="BikeTrip-33"><a href="#BikeTrip-33"><span class="linenos">33</span></a>    <span class="n">latitude_start</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="BikeTrip-34"><a href="#BikeTrip-34"><span class="linenos">34</span></a>    <span class="n">longitude_start</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="BikeTrip-35"><a href="#BikeTrip-35"><span class="linenos">35</span></a>    <span class="n">latitude_end</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="BikeTrip-36"><a href="#BikeTrip-36"><span class="linenos">36</span></a>    <span class="n">longitude_end</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="BikeTrip-37"><a href="#BikeTrip-37"><span class="linenos">37</span></a>    <span class="n">distance_in_km</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="BikeTrip-38"><a href="#BikeTrip-38"><span class="linenos">38</span></a>
</span><span id="BikeTrip-39"><a href="#BikeTrip-39"><span class="linenos">39</span></a>    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;trip_started_at_utc&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
</span><span id="BikeTrip-40"><a href="#BikeTrip-40"><span class="linenos">40</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_trip_start</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="BikeTrip-41"><a href="#BikeTrip-41"><span class="linenos">41</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot; UTC&quot;</span><span class="p">):</span>
</span><span id="BikeTrip-42"><a href="#BikeTrip-42"><span class="linenos">42</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; UTC&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="BikeTrip-43"><a href="#BikeTrip-43"><span class="linenos">43</span></a>        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="BikeTrip-44"><a href="#BikeTrip-44"><span class="linenos">44</span></a>
</span><span id="BikeTrip-45"><a href="#BikeTrip-45"><span class="linenos">45</span></a>    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;trip_ended_at_utc&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
</span><span id="BikeTrip-46"><a href="#BikeTrip-46"><span class="linenos">46</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_trip_end</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="BikeTrip-47"><a href="#BikeTrip-47"><span class="linenos">47</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot; UTC&quot;</span><span class="p">):</span>
</span><span id="BikeTrip-48"><a href="#BikeTrip-48"><span class="linenos">48</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; UTC&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="BikeTrip-49"><a href="#BikeTrip-49"><span class="linenos">49</span></a>        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Represents a single bike-sharing trip made by a user or rental.</p>

<p>This model captures trip-level data including timestamps, GPS locations,
distance, and vehicle type. It is typically used for micromobility analysis,
demand modeling, or origin-destination mapping.</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>trip_id (str):</strong>  Unique identifier for the trip.</li>
<li><strong>rental_id (str):</strong>  Identifier of the rental transaction (may differ from trip_id).</li>
<li><strong>vehicle_type (str):</strong>  Type of vehicle used (e.g., "bike", "e-bike", "scooter").</li>
<li><strong>trip_started_at_utc (datetime):</strong>  UTC timestamp when the trip began.</li>
<li><strong>trip_ended_at_utc (datetime):</strong>  UTC timestamp when the trip ended.</li>
<li><strong>latitude_start (float):</strong>  Latitude of the trip origin.</li>
<li><strong>longitude_start (float):</strong>  Longitude of the trip origin.</li>
<li><strong>latitude_end (float):</strong>  Latitude of the trip destination.</li>
<li><strong>longitude_end (float):</strong>  Longitude of the trip destination.</li>
<li><strong>distance_in_km (float):</strong>  Distance traveled during the trip in kilometers.</li>
</ul>
</div>


                            <div id="BikeTrip.trip_id" class="classattr">
                                <div class="attr variable">
            <span class="name">trip_id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.trip_id"></a>
    
    

                            </div>
                            <div id="BikeTrip.rental_id" class="classattr">
                                <div class="attr variable">
            <span class="name">rental_id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.rental_id"></a>
    
    

                            </div>
                            <div id="BikeTrip.vehicle_type" class="classattr">
                                <div class="attr variable">
            <span class="name">vehicle_type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.vehicle_type"></a>
    
    

                            </div>
                            <div id="BikeTrip.trip_started_at_utc" class="classattr">
                                <div class="attr variable">
            <span class="name">trip_started_at_utc</span><span class="annotation">: datetime.datetime</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.trip_started_at_utc"></a>
    
    

                            </div>
                            <div id="BikeTrip.trip_ended_at_utc" class="classattr">
                                <div class="attr variable">
            <span class="name">trip_ended_at_utc</span><span class="annotation">: datetime.datetime</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.trip_ended_at_utc"></a>
    
    

                            </div>
                            <div id="BikeTrip.latitude_start" class="classattr">
                                <div class="attr variable">
            <span class="name">latitude_start</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.latitude_start"></a>
    
    

                            </div>
                            <div id="BikeTrip.longitude_start" class="classattr">
                                <div class="attr variable">
            <span class="name">longitude_start</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.longitude_start"></a>
    
    

                            </div>
                            <div id="BikeTrip.latitude_end" class="classattr">
                                <div class="attr variable">
            <span class="name">latitude_end</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.latitude_end"></a>
    
    

                            </div>
                            <div id="BikeTrip.longitude_end" class="classattr">
                                <div class="attr variable">
            <span class="name">longitude_end</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.longitude_end"></a>
    
    

                            </div>
                            <div id="BikeTrip.distance_in_km" class="classattr">
                                <div class="attr variable">
            <span class="name">distance_in_km</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.distance_in_km"></a>
    
    

                            </div>
                            <div id="BikeTrip.parse_trip_start" class="classattr">
                                        <input id="BikeTrip.parse_trip_start-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-field_validator">@field_validator(&#39;trip_started_at_utc&#39;, mode=&#39;before&#39;)</div>

        <span class="def">def</span>
        <span class="name">parse_trip_start</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BikeTrip.parse_trip_start-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BikeTrip.parse_trip_start"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BikeTrip.parse_trip_start-39"><a href="#BikeTrip.parse_trip_start-39"><span class="linenos">39</span></a>    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;trip_started_at_utc&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
</span><span id="BikeTrip.parse_trip_start-40"><a href="#BikeTrip.parse_trip_start-40"><span class="linenos">40</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_trip_start</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="BikeTrip.parse_trip_start-41"><a href="#BikeTrip.parse_trip_start-41"><span class="linenos">41</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot; UTC&quot;</span><span class="p">):</span>
</span><span id="BikeTrip.parse_trip_start-42"><a href="#BikeTrip.parse_trip_start-42"><span class="linenos">42</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; UTC&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="BikeTrip.parse_trip_start-43"><a href="#BikeTrip.parse_trip_start-43"><span class="linenos">43</span></a>        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="BikeTrip.parse_trip_end" class="classattr">
                                        <input id="BikeTrip.parse_trip_end-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-field_validator">@field_validator(&#39;trip_ended_at_utc&#39;, mode=&#39;before&#39;)</div>

        <span class="def">def</span>
        <span class="name">parse_trip_end</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BikeTrip.parse_trip_end-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BikeTrip.parse_trip_end"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BikeTrip.parse_trip_end-45"><a href="#BikeTrip.parse_trip_end-45"><span class="linenos">45</span></a>    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;trip_ended_at_utc&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
</span><span id="BikeTrip.parse_trip_end-46"><a href="#BikeTrip.parse_trip_end-46"><span class="linenos">46</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_trip_end</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="BikeTrip.parse_trip_end-47"><a href="#BikeTrip.parse_trip_end-47"><span class="linenos">47</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot; UTC&quot;</span><span class="p">):</span>
</span><span id="BikeTrip.parse_trip_end-48"><a href="#BikeTrip.parse_trip_end-48"><span class="linenos">48</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; UTC&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="BikeTrip.parse_trip_end-49"><a href="#BikeTrip.parse_trip_end-49"><span class="linenos">49</span></a>        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="BikeTrip.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#BikeTrip.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="Ridership">
                            <input id="Ridership-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Ridership</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="Ridership-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Ridership"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Ridership-6"><a href="#Ridership-6"><span class="linenos"> 6</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Ridership</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="Ridership-7"><a href="#Ridership-7"><span class="linenos"> 7</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Ridership-8"><a href="#Ridership-8"><span class="linenos"> 8</span></a><span class="sd">    Represents passenger activity data at a specific transit stop and time slot.</span>
</span><span id="Ridership-9"><a href="#Ridership-9"><span class="linenos"> 9</span></a>
</span><span id="Ridership-10"><a href="#Ridership-10"><span class="linenos">10</span></a><span class="sd">    This model captures detailed ridership metrics, including boardings and alightings,</span>
</span><span id="Ridership-11"><a href="#Ridership-11"><span class="linenos">11</span></a><span class="sd">    along with contextual information like the line, stop location, time, and whether</span>
</span><span id="Ridership-12"><a href="#Ridership-12"><span class="linenos">12</span></a><span class="sd">    the data is filtered or finalized. It can be used for operational analysis, planning,</span>
</span><span id="Ridership-13"><a href="#Ridership-13"><span class="linenos">13</span></a><span class="sd">    or visualization of public transit usage patterns.</span>
</span><span id="Ridership-14"><a href="#Ridership-14"><span class="linenos">14</span></a>
</span><span id="Ridership-15"><a href="#Ridership-15"><span class="linenos">15</span></a><span class="sd">    Attributes:</span>
</span><span id="Ridership-16"><a href="#Ridership-16"><span class="linenos">16</span></a><span class="sd">        date (str): Date of observation in YYYY-MM-DD format.</span>
</span><span id="Ridership-17"><a href="#Ridership-17"><span class="linenos">17</span></a><span class="sd">        timeslot (str): Time window when the observation was made (e.g., &quot;07:00-08:00&quot;).</span>
</span><span id="Ridership-18"><a href="#Ridership-18"><span class="linenos">18</span></a><span class="sd">        day_index (int): Index of the day in the week (e.g., 1 for Monday, 7 for Sunday).</span>
</span><span id="Ridership-19"><a href="#Ridership-19"><span class="linenos">19</span></a><span class="sd">        line_type (str): Category or type of the transit line (e.g., metro, bus, tram).</span>
</span><span id="Ridership-20"><a href="#Ridership-20"><span class="linenos">20</span></a><span class="sd">        schedule_type (str): Type of schedule active on the observation day (e.g., &quot;holiday&quot;, &quot;regular&quot;).</span>
</span><span id="Ridership-21"><a href="#Ridership-21"><span class="linenos">21</span></a><span class="sd">        line (str): Name or identifier of the transit line.</span>
</span><span id="Ridership-22"><a href="#Ridership-22"><span class="linenos">22</span></a><span class="sd">        stop_name (str): Common name of the transit stop.</span>
</span><span id="Ridership-23"><a href="#Ridership-23"><span class="linenos">23</span></a><span class="sd">        stop_code (str): Unique or long code identifier for the stop.</span>
</span><span id="Ridership-24"><a href="#Ridership-24"><span class="linenos">24</span></a><span class="sd">        boardings (int): Number of passengers boarding the vehicle at this stop during the time slot.</span>
</span><span id="Ridership-25"><a href="#Ridership-25"><span class="linenos">25</span></a><span class="sd">        alightings (int): Number of passengers alighting from the vehicle at this stop during the time slot.</span>
</span><span id="Ridership-26"><a href="#Ridership-26"><span class="linenos">26</span></a><span class="sd">        day_label (str): Label for the day of the week (e.g., &quot;Monday&quot;, &quot;Friday&quot;).</span>
</span><span id="Ridership-27"><a href="#Ridership-27"><span class="linenos">27</span></a><span class="sd">        week_index (int): Index of the week within the dataset or calendar year.</span>
</span><span id="Ridership-28"><a href="#Ridership-28"><span class="linenos">28</span></a><span class="sd">        month_year (str): Month and year of the observation (e.g., &quot;2024-05&quot;).</span>
</span><span id="Ridership-29"><a href="#Ridership-29"><span class="linenos">29</span></a><span class="sd">        stop_lat (float): Latitude coordinate of the stop.</span>
</span><span id="Ridership-30"><a href="#Ridership-30"><span class="linenos">30</span></a><span class="sd">        stop_lon (float): Longitude coordinate of the stop.</span>
</span><span id="Ridership-31"><a href="#Ridership-31"><span class="linenos">31</span></a><span class="sd">        is_final (bool): Flag indicating whether the data is final and validated.</span>
</span><span id="Ridership-32"><a href="#Ridership-32"><span class="linenos">32</span></a><span class="sd">        is_filtered (bool): Flag indicating whether this record was excluded from primary analysis (e.g., due to quality filters).</span>
</span><span id="Ridership-33"><a href="#Ridership-33"><span class="linenos">33</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Ridership-34"><a href="#Ridership-34"><span class="linenos">34</span></a>
</span><span id="Ridership-35"><a href="#Ridership-35"><span class="linenos">35</span></a>    <span class="n">date</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Ridership-36"><a href="#Ridership-36"><span class="linenos">36</span></a>    <span class="n">timeslot</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Ridership-37"><a href="#Ridership-37"><span class="linenos">37</span></a>    <span class="n">day_index</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="Ridership-38"><a href="#Ridership-38"><span class="linenos">38</span></a>    <span class="n">line_type</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Ridership-39"><a href="#Ridership-39"><span class="linenos">39</span></a>    <span class="n">schedule_type</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Ridership-40"><a href="#Ridership-40"><span class="linenos">40</span></a>    <span class="n">line</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Ridership-41"><a href="#Ridership-41"><span class="linenos">41</span></a>    <span class="n">stop_name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Ridership-42"><a href="#Ridership-42"><span class="linenos">42</span></a>    <span class="n">stop_code</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Ridership-43"><a href="#Ridership-43"><span class="linenos">43</span></a>    <span class="n">boardings</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="Ridership-44"><a href="#Ridership-44"><span class="linenos">44</span></a>    <span class="n">alightings</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="Ridership-45"><a href="#Ridership-45"><span class="linenos">45</span></a>    <span class="n">day_label</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Ridership-46"><a href="#Ridership-46"><span class="linenos">46</span></a>    <span class="n">week_index</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="Ridership-47"><a href="#Ridership-47"><span class="linenos">47</span></a>    <span class="n">month_year</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Ridership-48"><a href="#Ridership-48"><span class="linenos">48</span></a>    <span class="n">stop_lat</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Ridership-49"><a href="#Ridership-49"><span class="linenos">49</span></a>    <span class="n">stop_lon</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Ridership-50"><a href="#Ridership-50"><span class="linenos">50</span></a>    <span class="n">is_final</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="Ridership-51"><a href="#Ridership-51"><span class="linenos">51</span></a>    <span class="n">is_filtered</span><span class="p">:</span> <span class="nb">bool</span>
</span></pre></div>


            <div class="docstring"><p>Represents passenger activity data at a specific transit stop and time slot.</p>

<p>This model captures detailed ridership metrics, including boardings and alightings,
along with contextual information like the line, stop location, time, and whether
the data is filtered or finalized. It can be used for operational analysis, planning,
or visualization of public transit usage patterns.</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>date (str):</strong>  Date of observation in YYYY-MM-DD format.</li>
<li><strong>timeslot (str):</strong>  Time window when the observation was made (e.g., "07:00-08:00").</li>
<li><strong>day_index (int):</strong>  Index of the day in the week (e.g., 1 for Monday, 7 for Sunday).</li>
<li><strong>line_type (str):</strong>  Category or type of the transit line (e.g., metro, bus, tram).</li>
<li><strong>schedule_type (str):</strong>  Type of schedule active on the observation day (e.g., "holiday", "regular").</li>
<li><strong>line (str):</strong>  Name or identifier of the transit line.</li>
<li><strong>stop_name (str):</strong>  Common name of the transit stop.</li>
<li><strong>stop_code (str):</strong>  Unique or long code identifier for the stop.</li>
<li><strong>boardings (int):</strong>  Number of passengers boarding the vehicle at this stop during the time slot.</li>
<li><strong>alightings (int):</strong>  Number of passengers alighting from the vehicle at this stop during the time slot.</li>
<li><strong>day_label (str):</strong>  Label for the day of the week (e.g., "Monday", "Friday").</li>
<li><strong>week_index (int):</strong>  Index of the week within the dataset or calendar year.</li>
<li><strong>month_year (str):</strong>  Month and year of the observation (e.g., "2024-05").</li>
<li><strong>stop_lat (float):</strong>  Latitude coordinate of the stop.</li>
<li><strong>stop_lon (float):</strong>  Longitude coordinate of the stop.</li>
<li><strong>is_final (bool):</strong>  Flag indicating whether the data is final and validated.</li>
<li><strong>is_filtered (bool):</strong>  Flag indicating whether this record was excluded from primary analysis (e.g., due to quality filters).</li>
</ul>
</div>


                            <div id="Ridership.date" class="classattr">
                                <div class="attr variable">
            <span class="name">date</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ridership.date"></a>
    
    

                            </div>
                            <div id="Ridership.timeslot" class="classattr">
                                <div class="attr variable">
            <span class="name">timeslot</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ridership.timeslot"></a>
    
    

                            </div>
                            <div id="Ridership.day_index" class="classattr">
                                <div class="attr variable">
            <span class="name">day_index</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Ridership.day_index"></a>
    
    

                            </div>
                            <div id="Ridership.line_type" class="classattr">
                                <div class="attr variable">
            <span class="name">line_type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ridership.line_type"></a>
    
    

                            </div>
                            <div id="Ridership.schedule_type" class="classattr">
                                <div class="attr variable">
            <span class="name">schedule_type</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ridership.schedule_type"></a>
    
    

                            </div>
                            <div id="Ridership.line" class="classattr">
                                <div class="attr variable">
            <span class="name">line</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ridership.line"></a>
    
    

                            </div>
                            <div id="Ridership.stop_name" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ridership.stop_name"></a>
    
    

                            </div>
                            <div id="Ridership.stop_code" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_code</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ridership.stop_code"></a>
    
    

                            </div>
                            <div id="Ridership.boardings" class="classattr">
                                <div class="attr variable">
            <span class="name">boardings</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Ridership.boardings"></a>
    
    

                            </div>
                            <div id="Ridership.alightings" class="classattr">
                                <div class="attr variable">
            <span class="name">alightings</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Ridership.alightings"></a>
    
    

                            </div>
                            <div id="Ridership.day_label" class="classattr">
                                <div class="attr variable">
            <span class="name">day_label</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ridership.day_label"></a>
    
    

                            </div>
                            <div id="Ridership.week_index" class="classattr">
                                <div class="attr variable">
            <span class="name">week_index</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Ridership.week_index"></a>
    
    

                            </div>
                            <div id="Ridership.month_year" class="classattr">
                                <div class="attr variable">
            <span class="name">month_year</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ridership.month_year"></a>
    
    

                            </div>
                            <div id="Ridership.stop_lat" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_lat</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#Ridership.stop_lat"></a>
    
    

                            </div>
                            <div id="Ridership.stop_lon" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_lon</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#Ridership.stop_lon"></a>
    
    

                            </div>
                            <div id="Ridership.is_final" class="classattr">
                                <div class="attr variable">
            <span class="name">is_final</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#Ridership.is_final"></a>
    
    

                            </div>
                            <div id="Ridership.is_filtered" class="classattr">
                                <div class="attr variable">
            <span class="name">is_filtered</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#Ridership.is_filtered"></a>
    
    

                            </div>
                            <div id="Ridership.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#Ridership.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="GTFSNetwork">
                            <input id="GTFSNetwork-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GTFSNetwork</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="GTFSNetwork-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GTFSNetwork"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GTFSNetwork-12"><a href="#GTFSNetwork-12"><span class="linenos"> 12</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GTFSNetwork</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="GTFSNetwork-13"><a href="#GTFSNetwork-13"><span class="linenos"> 13</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GTFSNetwork-14"><a href="#GTFSNetwork-14"><span class="linenos"> 14</span></a><span class="sd">    Represents the full public transport network described by GTFS files.</span>
</span><span id="GTFSNetwork-15"><a href="#GTFSNetwork-15"><span class="linenos"> 15</span></a>
</span><span id="GTFSNetwork-16"><a href="#GTFSNetwork-16"><span class="linenos"> 16</span></a><span class="sd">    Attributes:</span>
</span><span id="GTFSNetwork-17"><a href="#GTFSNetwork-17"><span class="linenos"> 17</span></a><span class="sd">        stops: All GTFS stops (stations or platforms).</span>
</span><span id="GTFSNetwork-18"><a href="#GTFSNetwork-18"><span class="linenos"> 18</span></a><span class="sd">        routes: All GTFS routes (lines).</span>
</span><span id="GTFSNetwork-19"><a href="#GTFSNetwork-19"><span class="linenos"> 19</span></a><span class="sd">        trips: All trips (vehicle runs) along routes.</span>
</span><span id="GTFSNetwork-20"><a href="#GTFSNetwork-20"><span class="linenos"> 20</span></a><span class="sd">        stop_times: Stop-by-stop itineraries for each trip.</span>
</span><span id="GTFSNetwork-21"><a href="#GTFSNetwork-21"><span class="linenos"> 21</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="GTFSNetwork-22"><a href="#GTFSNetwork-22"><span class="linenos"> 22</span></a>    <span class="n">stops</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Stop</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</span><span id="GTFSNetwork-23"><a href="#GTFSNetwork-23"><span class="linenos"> 23</span></a>    <span class="n">routes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Route</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</span><span id="GTFSNetwork-24"><a href="#GTFSNetwork-24"><span class="linenos"> 24</span></a>    <span class="n">trips</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Trip</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</span><span id="GTFSNetwork-25"><a href="#GTFSNetwork-25"><span class="linenos"> 25</span></a>    <span class="n">stop_times</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">StopTime</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</span><span id="GTFSNetwork-26"><a href="#GTFSNetwork-26"><span class="linenos"> 26</span></a>    <span class="n">itineraries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Itinerary</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</span><span id="GTFSNetwork-27"><a href="#GTFSNetwork-27"><span class="linenos"> 27</span></a>
</span><span id="GTFSNetwork-28"><a href="#GTFSNetwork-28"><span class="linenos"> 28</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stops_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">:</span>
</span><span id="GTFSNetwork-29"><a href="#GTFSNetwork-29"><span class="linenos"> 29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GTFSNetwork-30"><a href="#GTFSNetwork-30"><span class="linenos"> 30</span></a><span class="sd">        Export stops as a GeoJSON file, with stop information as properties.</span>
</span><span id="GTFSNetwork-31"><a href="#GTFSNetwork-31"><span class="linenos"> 31</span></a><span class="sd">        Args:</span>
</span><span id="GTFSNetwork-32"><a href="#GTFSNetwork-32"><span class="linenos"> 32</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file. Optional, if defined it will be saved to this path.</span>
</span><span id="GTFSNetwork-33"><a href="#GTFSNetwork-33"><span class="linenos"> 33</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GTFSNetwork-34"><a href="#GTFSNetwork-34"><span class="linenos"> 34</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stops</span><span class="p">:</span>
</span><span id="GTFSNetwork-35"><a href="#GTFSNetwork-35"><span class="linenos"> 35</span></a>            <span class="k">return</span>
</span><span id="GTFSNetwork-36"><a href="#GTFSNetwork-36"><span class="linenos"> 36</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span><span id="GTFSNetwork-37"><a href="#GTFSNetwork-37"><span class="linenos"> 37</span></a>            <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stops</span><span class="p">],</span>
</span><span id="GTFSNetwork-38"><a href="#GTFSNetwork-38"><span class="linenos"> 38</span></a>            <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">stop_lon</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">stop_lat</span><span class="p">)</span>
</span><span id="GTFSNetwork-39"><a href="#GTFSNetwork-39"><span class="linenos"> 39</span></a>                      <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stops</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">stop_lon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">stop_lat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">],</span>
</span><span id="GTFSNetwork-40"><a href="#GTFSNetwork-40"><span class="linenos"> 40</span></a>            <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</span><span id="GTFSNetwork-41"><a href="#GTFSNetwork-41"><span class="linenos"> 41</span></a>        <span class="p">)</span>
</span><span id="GTFSNetwork-42"><a href="#GTFSNetwork-42"><span class="linenos"> 42</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">filepath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GTFSNetwork-43"><a href="#GTFSNetwork-43"><span class="linenos"> 43</span></a>            <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span><span id="GTFSNetwork-44"><a href="#GTFSNetwork-44"><span class="linenos"> 44</span></a>
</span><span id="GTFSNetwork-45"><a href="#GTFSNetwork-45"><span class="linenos"> 45</span></a>        <span class="k">return</span> <span class="n">gdf</span>
</span><span id="GTFSNetwork-46"><a href="#GTFSNetwork-46"><span class="linenos"> 46</span></a>
</span><span id="GTFSNetwork-47"><a href="#GTFSNetwork-47"><span class="linenos"> 47</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">itineraries_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">:</span>
</span><span id="GTFSNetwork-48"><a href="#GTFSNetwork-48"><span class="linenos"> 48</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GTFSNetwork-49"><a href="#GTFSNetwork-49"><span class="linenos"> 49</span></a><span class="sd">        Export each route&#39;s itinerary as a GeoJSON LineString, using stop sequences for each trip.</span>
</span><span id="GTFSNetwork-50"><a href="#GTFSNetwork-50"><span class="linenos"> 50</span></a>
</span><span id="GTFSNetwork-51"><a href="#GTFSNetwork-51"><span class="linenos"> 51</span></a><span class="sd">        Args:</span>
</span><span id="GTFSNetwork-52"><a href="#GTFSNetwork-52"><span class="linenos"> 52</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file. Optional, if defined it will be saved to this path.</span>
</span><span id="GTFSNetwork-53"><a href="#GTFSNetwork-53"><span class="linenos"> 53</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GTFSNetwork-54"><a href="#GTFSNetwork-54"><span class="linenos"> 54</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting itineraries to GeoJSON... for itineraries count = &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="GTFSNetwork-55"><a href="#GTFSNetwork-55"><span class="linenos"> 55</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="p">))</span>
</span><span id="GTFSNetwork-56"><a href="#GTFSNetwork-56"><span class="linenos"> 56</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="p">:</span>
</span><span id="GTFSNetwork-57"><a href="#GTFSNetwork-57"><span class="linenos"> 57</span></a>            <span class="k">return</span>
</span><span id="GTFSNetwork-58"><a href="#GTFSNetwork-58"><span class="linenos"> 58</span></a>        <span class="n">features</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GTFSNetwork-59"><a href="#GTFSNetwork-59"><span class="linenos"> 59</span></a>        <span class="k">for</span> <span class="n">itinerary</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="p">:</span>
</span><span id="GTFSNetwork-60"><a href="#GTFSNetwork-60"><span class="linenos"> 60</span></a>            <span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="n">stop</span><span class="o">.</span><span class="n">stop_lon</span><span class="p">,</span> <span class="n">stop</span><span class="o">.</span><span class="n">stop_lat</span><span class="p">)</span>
</span><span id="GTFSNetwork-61"><a href="#GTFSNetwork-61"><span class="linenos"> 61</span></a>                      <span class="k">for</span> <span class="n">stop</span> <span class="ow">in</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">stops</span> <span class="k">if</span> <span class="n">stop</span><span class="o">.</span><span class="n">stop_lon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">stop</span><span class="o">.</span><span class="n">stop_lat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="GTFSNetwork-62"><a href="#GTFSNetwork-62"><span class="linenos"> 62</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GTFSNetwork-63"><a href="#GTFSNetwork-63"><span class="linenos"> 63</span></a>                <span class="k">continue</span>
</span><span id="GTFSNetwork-64"><a href="#GTFSNetwork-64"><span class="linenos"> 64</span></a>            <span class="n">feature</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="GTFSNetwork-65"><a href="#GTFSNetwork-65"><span class="linenos"> 65</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
</span><span id="GTFSNetwork-66"><a href="#GTFSNetwork-66"><span class="linenos"> 66</span></a>                <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">)),</span>
</span><span id="GTFSNetwork-67"><a href="#GTFSNetwork-67"><span class="linenos"> 67</span></a>                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GTFSNetwork-68"><a href="#GTFSNetwork-68"><span class="linenos"> 68</span></a>                    <span class="s2">&quot;route_id&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">route_id</span><span class="p">,</span>
</span><span id="GTFSNetwork-69"><a href="#GTFSNetwork-69"><span class="linenos"> 69</span></a>                    <span class="s2">&quot;direction_id&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">direction_id</span><span class="p">,</span>
</span><span id="GTFSNetwork-70"><a href="#GTFSNetwork-70"><span class="linenos"> 70</span></a>                    <span class="s2">&quot;trip_id&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">trip_id</span><span class="p">,</span>
</span><span id="GTFSNetwork-71"><a href="#GTFSNetwork-71"><span class="linenos"> 71</span></a>                    <span class="s2">&quot;headsign&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">headsign</span><span class="p">,</span>
</span><span id="GTFSNetwork-72"><a href="#GTFSNetwork-72"><span class="linenos"> 72</span></a>                    <span class="s2">&quot;route_short_name&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">route_short_name</span><span class="p">,</span>
</span><span id="GTFSNetwork-73"><a href="#GTFSNetwork-73"><span class="linenos"> 73</span></a>                    <span class="s2">&quot;route_long_name&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">route_long_name</span><span class="p">,</span>
</span><span id="GTFSNetwork-74"><a href="#GTFSNetwork-74"><span class="linenos"> 74</span></a>                    <span class="s2">&quot;route_type&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">route_type</span><span class="p">,</span>
</span><span id="GTFSNetwork-75"><a href="#GTFSNetwork-75"><span class="linenos"> 75</span></a>                    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
</span><span id="GTFSNetwork-76"><a href="#GTFSNetwork-76"><span class="linenos"> 76</span></a>                    <span class="s2">&quot;text_color&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">text_color</span>
</span><span id="GTFSNetwork-77"><a href="#GTFSNetwork-77"><span class="linenos"> 77</span></a>                <span class="p">}</span>
</span><span id="GTFSNetwork-78"><a href="#GTFSNetwork-78"><span class="linenos"> 78</span></a>            <span class="p">}</span>
</span><span id="GTFSNetwork-79"><a href="#GTFSNetwork-79"><span class="linenos"> 79</span></a>            <span class="n">features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
</span><span id="GTFSNetwork-80"><a href="#GTFSNetwork-80"><span class="linenos"> 80</span></a>        <span class="n">feature_collection</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="GTFSNetwork-81"><a href="#GTFSNetwork-81"><span class="linenos"> 81</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
</span><span id="GTFSNetwork-82"><a href="#GTFSNetwork-82"><span class="linenos"> 82</span></a>            <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="n">features</span>
</span><span id="GTFSNetwork-83"><a href="#GTFSNetwork-83"><span class="linenos"> 83</span></a>        <span class="p">}</span>
</span><span id="GTFSNetwork-84"><a href="#GTFSNetwork-84"><span class="linenos"> 84</span></a>        <span class="k">if</span> <span class="n">filepath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GTFSNetwork-85"><a href="#GTFSNetwork-85"><span class="linenos"> 85</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="GTFSNetwork-86"><a href="#GTFSNetwork-86"><span class="linenos"> 86</span></a>                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">feature_collection</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</span><span id="GTFSNetwork-87"><a href="#GTFSNetwork-87"><span class="linenos"> 87</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exported </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">features</span><span class="p">)</span><span class="si">}</span><span class="s2"> itineraries to </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="GTFSNetwork-88"><a href="#GTFSNetwork-88"><span class="linenos"> 88</span></a>
</span><span id="GTFSNetwork-89"><a href="#GTFSNetwork-89"><span class="linenos"> 89</span></a>        <span class="k">return</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
</span><span id="GTFSNetwork-90"><a href="#GTFSNetwork-90"><span class="linenos"> 90</span></a>
</span><span id="GTFSNetwork-91"><a href="#GTFSNetwork-91"><span class="linenos"> 91</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build_itineraries</span><span class="p">(</span>
</span><span id="GTFSNetwork-92"><a href="#GTFSNetwork-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="GTFSNetwork-93"><a href="#GTFSNetwork-93"><span class="linenos"> 93</span></a>        <span class="n">stops</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Stop</span><span class="p">],</span>
</span><span id="GTFSNetwork-94"><a href="#GTFSNetwork-94"><span class="linenos"> 94</span></a>        <span class="n">stop_times</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">StopTime</span><span class="p">],</span>
</span><span id="GTFSNetwork-95"><a href="#GTFSNetwork-95"><span class="linenos"> 95</span></a>        <span class="n">trips</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Trip</span><span class="p">],</span>
</span><span id="GTFSNetwork-96"><a href="#GTFSNetwork-96"><span class="linenos"> 96</span></a>        <span class="n">routes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Route</span><span class="p">]</span>
</span><span id="GTFSNetwork-97"><a href="#GTFSNetwork-97"><span class="linenos"> 97</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Itinerary</span><span class="p">]:</span>
</span><span id="GTFSNetwork-98"><a href="#GTFSNetwork-98"><span class="linenos"> 98</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GTFSNetwork-99"><a href="#GTFSNetwork-99"><span class="linenos"> 99</span></a><span class="sd">        Constructs a list of Itinerary objects from GTFS data.</span>
</span><span id="GTFSNetwork-100"><a href="#GTFSNetwork-100"><span class="linenos">100</span></a>
</span><span id="GTFSNetwork-101"><a href="#GTFSNetwork-101"><span class="linenos">101</span></a><span class="sd">        Args:</span>
</span><span id="GTFSNetwork-102"><a href="#GTFSNetwork-102"><span class="linenos">102</span></a><span class="sd">            stops (List[Stop]): List of Stop instances.</span>
</span><span id="GTFSNetwork-103"><a href="#GTFSNetwork-103"><span class="linenos">103</span></a><span class="sd">            stop_times (List[StopTime]): List of StopTime instances.</span>
</span><span id="GTFSNetwork-104"><a href="#GTFSNetwork-104"><span class="linenos">104</span></a><span class="sd">            trips (List[Trip]): List of Trip instances.</span>
</span><span id="GTFSNetwork-105"><a href="#GTFSNetwork-105"><span class="linenos">105</span></a><span class="sd">            routes (List[Route]): List of Route instances.</span>
</span><span id="GTFSNetwork-106"><a href="#GTFSNetwork-106"><span class="linenos">106</span></a>
</span><span id="GTFSNetwork-107"><a href="#GTFSNetwork-107"><span class="linenos">107</span></a><span class="sd">        Returns:</span>
</span><span id="GTFSNetwork-108"><a href="#GTFSNetwork-108"><span class="linenos">108</span></a><span class="sd">            List[Itinerary]: A list of Itinerary objects representing unique route and direction combinations.</span>
</span><span id="GTFSNetwork-109"><a href="#GTFSNetwork-109"><span class="linenos">109</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GTFSNetwork-110"><a href="#GTFSNetwork-110"><span class="linenos">110</span></a>        <span class="c1"># Map stop_id to Stop object for quick lookup</span>
</span><span id="GTFSNetwork-111"><a href="#GTFSNetwork-111"><span class="linenos">111</span></a>        <span class="n">stop_lookup</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Stop</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">stop</span><span class="o">.</span><span class="n">stop_id</span><span class="p">:</span> <span class="n">stop</span> <span class="k">for</span> <span class="n">stop</span> <span class="ow">in</span> <span class="n">stops</span><span class="p">}</span>
</span><span id="GTFSNetwork-112"><a href="#GTFSNetwork-112"><span class="linenos">112</span></a>
</span><span id="GTFSNetwork-113"><a href="#GTFSNetwork-113"><span class="linenos">113</span></a>        <span class="c1"># Group stop_times by trip_id</span>
</span><span id="GTFSNetwork-114"><a href="#GTFSNetwork-114"><span class="linenos">114</span></a>        <span class="n">trip_stop_times</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">StopTime</span><span class="p">]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</span><span id="GTFSNetwork-115"><a href="#GTFSNetwork-115"><span class="linenos">115</span></a>        <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="n">stop_times</span><span class="p">:</span>
</span><span id="GTFSNetwork-116"><a href="#GTFSNetwork-116"><span class="linenos">116</span></a>            <span class="n">trip_stop_times</span><span class="p">[</span><span class="n">st</span><span class="o">.</span><span class="n">trip_id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
</span><span id="GTFSNetwork-117"><a href="#GTFSNetwork-117"><span class="linenos">117</span></a>
</span><span id="GTFSNetwork-118"><a href="#GTFSNetwork-118"><span class="linenos">118</span></a>        <span class="c1"># Group trips by (route_id, direction_id) and select the first trip as representative</span>
</span><span id="GTFSNetwork-119"><a href="#GTFSNetwork-119"><span class="linenos">119</span></a>        <span class="n">trip_by_route_dir</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">Trip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="GTFSNetwork-120"><a href="#GTFSNetwork-120"><span class="linenos">120</span></a>        <span class="k">for</span> <span class="n">trip</span> <span class="ow">in</span> <span class="n">trips</span><span class="p">:</span>
</span><span id="GTFSNetwork-121"><a href="#GTFSNetwork-121"><span class="linenos">121</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">trip</span><span class="o">.</span><span class="n">route_id</span><span class="p">,</span> <span class="n">trip</span><span class="o">.</span><span class="n">direction_id</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="GTFSNetwork-122"><a href="#GTFSNetwork-122"><span class="linenos">122</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">trip_by_route_dir</span><span class="p">:</span>
</span><span id="GTFSNetwork-123"><a href="#GTFSNetwork-123"><span class="linenos">123</span></a>                <span class="n">trip_by_route_dir</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">trip</span>
</span><span id="GTFSNetwork-124"><a href="#GTFSNetwork-124"><span class="linenos">124</span></a>
</span><span id="GTFSNetwork-125"><a href="#GTFSNetwork-125"><span class="linenos">125</span></a>        <span class="c1"># Map route_id to Route object for metadata</span>
</span><span id="GTFSNetwork-126"><a href="#GTFSNetwork-126"><span class="linenos">126</span></a>        <span class="n">route_lookup</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Route</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="GTFSNetwork-127"><a href="#GTFSNetwork-127"><span class="linenos">127</span></a>            <span class="n">route</span><span class="o">.</span><span class="n">route_id</span><span class="p">:</span> <span class="n">route</span> <span class="k">for</span> <span class="n">route</span> <span class="ow">in</span> <span class="n">routes</span><span class="p">}</span>
</span><span id="GTFSNetwork-128"><a href="#GTFSNetwork-128"><span class="linenos">128</span></a>
</span><span id="GTFSNetwork-129"><a href="#GTFSNetwork-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Itinerary</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GTFSNetwork-130"><a href="#GTFSNetwork-130"><span class="linenos">130</span></a>
</span><span id="GTFSNetwork-131"><a href="#GTFSNetwork-131"><span class="linenos">131</span></a>        <span class="k">for</span> <span class="p">(</span><span class="n">route_id</span><span class="p">,</span> <span class="n">direction_id</span><span class="p">),</span> <span class="n">trip</span> <span class="ow">in</span> <span class="n">trip_by_route_dir</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="GTFSNetwork-132"><a href="#GTFSNetwork-132"><span class="linenos">132</span></a>            <span class="n">stop_times_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="GTFSNetwork-133"><a href="#GTFSNetwork-133"><span class="linenos">133</span></a>                <span class="n">trip_stop_times</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">trip</span><span class="o">.</span><span class="n">trip_id</span><span class="p">,</span> <span class="p">[]),</span>
</span><span id="GTFSNetwork-134"><a href="#GTFSNetwork-134"><span class="linenos">134</span></a>                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">st</span><span class="p">:</span> <span class="n">st</span><span class="o">.</span><span class="n">stop_sequence</span>
</span><span id="GTFSNetwork-135"><a href="#GTFSNetwork-135"><span class="linenos">135</span></a>            <span class="p">)</span>
</span><span id="GTFSNetwork-136"><a href="#GTFSNetwork-136"><span class="linenos">136</span></a>
</span><span id="GTFSNetwork-137"><a href="#GTFSNetwork-137"><span class="linenos">137</span></a>            <span class="c1"># Build the list of Stop instances for the itinerary</span>
</span><span id="GTFSNetwork-138"><a href="#GTFSNetwork-138"><span class="linenos">138</span></a>            <span class="n">itinerary_stops</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Stop</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GTFSNetwork-139"><a href="#GTFSNetwork-139"><span class="linenos">139</span></a>            <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="n">stop_times_list</span><span class="p">:</span>
</span><span id="GTFSNetwork-140"><a href="#GTFSNetwork-140"><span class="linenos">140</span></a>                <span class="n">stop</span> <span class="o">=</span> <span class="n">stop_lookup</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">stop_id</span><span class="p">)</span>
</span><span id="GTFSNetwork-141"><a href="#GTFSNetwork-141"><span class="linenos">141</span></a>                <span class="k">if</span> <span class="n">stop</span><span class="p">:</span>
</span><span id="GTFSNetwork-142"><a href="#GTFSNetwork-142"><span class="linenos">142</span></a>                    <span class="n">itinerary_stops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
</span><span id="GTFSNetwork-143"><a href="#GTFSNetwork-143"><span class="linenos">143</span></a>
</span><span id="GTFSNetwork-144"><a href="#GTFSNetwork-144"><span class="linenos">144</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">itinerary_stops</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GTFSNetwork-145"><a href="#GTFSNetwork-145"><span class="linenos">145</span></a>                <span class="k">continue</span>  <span class="c1"># Skip itineraries with insufficient stops</span>
</span><span id="GTFSNetwork-146"><a href="#GTFSNetwork-146"><span class="linenos">146</span></a>
</span><span id="GTFSNetwork-147"><a href="#GTFSNetwork-147"><span class="linenos">147</span></a>            <span class="n">route</span> <span class="o">=</span> <span class="n">route_lookup</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route_id</span><span class="p">)</span>
</span><span id="GTFSNetwork-148"><a href="#GTFSNetwork-148"><span class="linenos">148</span></a>
</span><span id="GTFSNetwork-149"><a href="#GTFSNetwork-149"><span class="linenos">149</span></a>            <span class="n">itinerary</span> <span class="o">=</span> <span class="n">Itinerary</span><span class="p">(</span>
</span><span id="GTFSNetwork-150"><a href="#GTFSNetwork-150"><span class="linenos">150</span></a>                <span class="n">route_id</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_id</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="n">route_id</span><span class="p">,</span>
</span><span id="GTFSNetwork-151"><a href="#GTFSNetwork-151"><span class="linenos">151</span></a>                <span class="n">direction_id</span><span class="o">=</span><span class="n">direction_id</span><span class="p">,</span>
</span><span id="GTFSNetwork-152"><a href="#GTFSNetwork-152"><span class="linenos">152</span></a>                <span class="n">trip_id</span><span class="o">=</span><span class="n">trip</span><span class="o">.</span><span class="n">trip_id</span><span class="p">,</span>
</span><span id="GTFSNetwork-153"><a href="#GTFSNetwork-153"><span class="linenos">153</span></a>                <span class="n">headsign</span><span class="o">=</span><span class="n">trip</span><span class="o">.</span><span class="n">trip_headsign</span><span class="p">,</span>
</span><span id="GTFSNetwork-154"><a href="#GTFSNetwork-154"><span class="linenos">154</span></a>                <span class="n">route_short_name</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_short_name</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork-155"><a href="#GTFSNetwork-155"><span class="linenos">155</span></a>                <span class="n">route_long_name</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_long_name</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork-156"><a href="#GTFSNetwork-156"><span class="linenos">156</span></a>                <span class="n">route_type</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_type</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork-157"><a href="#GTFSNetwork-157"><span class="linenos">157</span></a>                <span class="n">color</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_color</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork-158"><a href="#GTFSNetwork-158"><span class="linenos">158</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_text_color</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork-159"><a href="#GTFSNetwork-159"><span class="linenos">159</span></a>                <span class="n">stops</span><span class="o">=</span><span class="n">itinerary_stops</span>
</span><span id="GTFSNetwork-160"><a href="#GTFSNetwork-160"><span class="linenos">160</span></a>            <span class="p">)</span>
</span><span id="GTFSNetwork-161"><a href="#GTFSNetwork-161"><span class="linenos">161</span></a>
</span><span id="GTFSNetwork-162"><a href="#GTFSNetwork-162"><span class="linenos">162</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">itinerary</span><span class="p">)</span>
</span><span id="GTFSNetwork-163"><a href="#GTFSNetwork-163"><span class="linenos">163</span></a>
</span><span id="GTFSNetwork-164"><a href="#GTFSNetwork-164"><span class="linenos">164</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span>
</span></pre></div>


            <div class="docstring"><p>Represents the full public transport network described by GTFS files.</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>stops:</strong>  All GTFS stops (stations or platforms).</li>
<li><strong>routes:</strong>  All GTFS routes (lines).</li>
<li><strong>trips:</strong>  All trips (vehicle runs) along routes.</li>
<li><strong>stop_times:</strong>  Stop-by-stop itineraries for each trip.</li>
</ul>
</div>


                            <div id="GTFSNetwork.stops" class="classattr">
                                <div class="attr variable">
            <span class="name">stops</span><span class="annotation">: List[<a href="#Stop">Stop</a>]</span>

        
    </div>
    <a class="headerlink" href="#GTFSNetwork.stops"></a>
    
    

                            </div>
                            <div id="GTFSNetwork.routes" class="classattr">
                                <div class="attr variable">
            <span class="name">routes</span><span class="annotation">: List[<a href="#Route">Route</a>]</span>

        
    </div>
    <a class="headerlink" href="#GTFSNetwork.routes"></a>
    
    

                            </div>
                            <div id="GTFSNetwork.trips" class="classattr">
                                <div class="attr variable">
            <span class="name">trips</span><span class="annotation">: List[<a href="#Trip">Trip</a>]</span>

        
    </div>
    <a class="headerlink" href="#GTFSNetwork.trips"></a>
    
    

                            </div>
                            <div id="GTFSNetwork.stop_times" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_times</span><span class="annotation">: List[<a href="#StopTime">StopTime</a>]</span>

        
    </div>
    <a class="headerlink" href="#GTFSNetwork.stop_times"></a>
    
    

                            </div>
                            <div id="GTFSNetwork.itineraries" class="classattr">
                                <div class="attr variable">
            <span class="name">itineraries</span><span class="annotation">: List[sum_gtfs_geojson.models.gtfs.itinerary.Itinerary]</span>

        
    </div>
    <a class="headerlink" href="#GTFSNetwork.itineraries"></a>
    
    

                            </div>
                            <div id="GTFSNetwork.stops_to_geojson" class="classattr">
                                        <input id="GTFSNetwork.stops_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stops_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">geopandas</span><span class="o">.</span><span class="n">geodataframe</span><span class="o">.</span><span class="n">GeoDataFrame</span>:</span></span>

                <label class="view-source-button" for="GTFSNetwork.stops_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GTFSNetwork.stops_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GTFSNetwork.stops_to_geojson-28"><a href="#GTFSNetwork.stops_to_geojson-28"><span class="linenos">28</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stops_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">:</span>
</span><span id="GTFSNetwork.stops_to_geojson-29"><a href="#GTFSNetwork.stops_to_geojson-29"><span class="linenos">29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GTFSNetwork.stops_to_geojson-30"><a href="#GTFSNetwork.stops_to_geojson-30"><span class="linenos">30</span></a><span class="sd">        Export stops as a GeoJSON file, with stop information as properties.</span>
</span><span id="GTFSNetwork.stops_to_geojson-31"><a href="#GTFSNetwork.stops_to_geojson-31"><span class="linenos">31</span></a><span class="sd">        Args:</span>
</span><span id="GTFSNetwork.stops_to_geojson-32"><a href="#GTFSNetwork.stops_to_geojson-32"><span class="linenos">32</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file. Optional, if defined it will be saved to this path.</span>
</span><span id="GTFSNetwork.stops_to_geojson-33"><a href="#GTFSNetwork.stops_to_geojson-33"><span class="linenos">33</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GTFSNetwork.stops_to_geojson-34"><a href="#GTFSNetwork.stops_to_geojson-34"><span class="linenos">34</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stops</span><span class="p">:</span>
</span><span id="GTFSNetwork.stops_to_geojson-35"><a href="#GTFSNetwork.stops_to_geojson-35"><span class="linenos">35</span></a>            <span class="k">return</span>
</span><span id="GTFSNetwork.stops_to_geojson-36"><a href="#GTFSNetwork.stops_to_geojson-36"><span class="linenos">36</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span><span id="GTFSNetwork.stops_to_geojson-37"><a href="#GTFSNetwork.stops_to_geojson-37"><span class="linenos">37</span></a>            <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stops</span><span class="p">],</span>
</span><span id="GTFSNetwork.stops_to_geojson-38"><a href="#GTFSNetwork.stops_to_geojson-38"><span class="linenos">38</span></a>            <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">stop_lon</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">stop_lat</span><span class="p">)</span>
</span><span id="GTFSNetwork.stops_to_geojson-39"><a href="#GTFSNetwork.stops_to_geojson-39"><span class="linenos">39</span></a>                      <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stops</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">stop_lon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">stop_lat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">],</span>
</span><span id="GTFSNetwork.stops_to_geojson-40"><a href="#GTFSNetwork.stops_to_geojson-40"><span class="linenos">40</span></a>            <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</span><span id="GTFSNetwork.stops_to_geojson-41"><a href="#GTFSNetwork.stops_to_geojson-41"><span class="linenos">41</span></a>        <span class="p">)</span>
</span><span id="GTFSNetwork.stops_to_geojson-42"><a href="#GTFSNetwork.stops_to_geojson-42"><span class="linenos">42</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">filepath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GTFSNetwork.stops_to_geojson-43"><a href="#GTFSNetwork.stops_to_geojson-43"><span class="linenos">43</span></a>            <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span><span id="GTFSNetwork.stops_to_geojson-44"><a href="#GTFSNetwork.stops_to_geojson-44"><span class="linenos">44</span></a>
</span><span id="GTFSNetwork.stops_to_geojson-45"><a href="#GTFSNetwork.stops_to_geojson-45"><span class="linenos">45</span></a>        <span class="k">return</span> <span class="n">gdf</span>
</span></pre></div>


            <div class="docstring"><p>Export stops as a GeoJSON file, with stop information as properties.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str):</strong>  The path to the output GeoJSON file. Optional, if defined it will be saved to this path.</li>
</ul>
</div>


                            </div>
                            <div id="GTFSNetwork.itineraries_to_geojson" class="classattr">
                                        <input id="GTFSNetwork.itineraries_to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">itineraries_to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">geopandas</span><span class="o">.</span><span class="n">geodataframe</span><span class="o">.</span><span class="n">GeoDataFrame</span>:</span></span>

                <label class="view-source-button" for="GTFSNetwork.itineraries_to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GTFSNetwork.itineraries_to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GTFSNetwork.itineraries_to_geojson-47"><a href="#GTFSNetwork.itineraries_to_geojson-47"><span class="linenos">47</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">itineraries_to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">:</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-48"><a href="#GTFSNetwork.itineraries_to_geojson-48"><span class="linenos">48</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-49"><a href="#GTFSNetwork.itineraries_to_geojson-49"><span class="linenos">49</span></a><span class="sd">        Export each route&#39;s itinerary as a GeoJSON LineString, using stop sequences for each trip.</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-50"><a href="#GTFSNetwork.itineraries_to_geojson-50"><span class="linenos">50</span></a>
</span><span id="GTFSNetwork.itineraries_to_geojson-51"><a href="#GTFSNetwork.itineraries_to_geojson-51"><span class="linenos">51</span></a><span class="sd">        Args:</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-52"><a href="#GTFSNetwork.itineraries_to_geojson-52"><span class="linenos">52</span></a><span class="sd">            filepath (str): The path to the output GeoJSON file. Optional, if defined it will be saved to this path.</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-53"><a href="#GTFSNetwork.itineraries_to_geojson-53"><span class="linenos">53</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-54"><a href="#GTFSNetwork.itineraries_to_geojson-54"><span class="linenos">54</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exporting itineraries to GeoJSON... for itineraries count = &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-55"><a href="#GTFSNetwork.itineraries_to_geojson-55"><span class="linenos">55</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="p">))</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-56"><a href="#GTFSNetwork.itineraries_to_geojson-56"><span class="linenos">56</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="p">:</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-57"><a href="#GTFSNetwork.itineraries_to_geojson-57"><span class="linenos">57</span></a>            <span class="k">return</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-58"><a href="#GTFSNetwork.itineraries_to_geojson-58"><span class="linenos">58</span></a>        <span class="n">features</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-59"><a href="#GTFSNetwork.itineraries_to_geojson-59"><span class="linenos">59</span></a>        <span class="k">for</span> <span class="n">itinerary</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="p">:</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-60"><a href="#GTFSNetwork.itineraries_to_geojson-60"><span class="linenos">60</span></a>            <span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="n">stop</span><span class="o">.</span><span class="n">stop_lon</span><span class="p">,</span> <span class="n">stop</span><span class="o">.</span><span class="n">stop_lat</span><span class="p">)</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-61"><a href="#GTFSNetwork.itineraries_to_geojson-61"><span class="linenos">61</span></a>                      <span class="k">for</span> <span class="n">stop</span> <span class="ow">in</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">stops</span> <span class="k">if</span> <span class="n">stop</span><span class="o">.</span><span class="n">stop_lon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">stop</span><span class="o">.</span><span class="n">stop_lat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-62"><a href="#GTFSNetwork.itineraries_to_geojson-62"><span class="linenos">62</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-63"><a href="#GTFSNetwork.itineraries_to_geojson-63"><span class="linenos">63</span></a>                <span class="k">continue</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-64"><a href="#GTFSNetwork.itineraries_to_geojson-64"><span class="linenos">64</span></a>            <span class="n">feature</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-65"><a href="#GTFSNetwork.itineraries_to_geojson-65"><span class="linenos">65</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-66"><a href="#GTFSNetwork.itineraries_to_geojson-66"><span class="linenos">66</span></a>                <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">)),</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-67"><a href="#GTFSNetwork.itineraries_to_geojson-67"><span class="linenos">67</span></a>                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-68"><a href="#GTFSNetwork.itineraries_to_geojson-68"><span class="linenos">68</span></a>                    <span class="s2">&quot;route_id&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">route_id</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-69"><a href="#GTFSNetwork.itineraries_to_geojson-69"><span class="linenos">69</span></a>                    <span class="s2">&quot;direction_id&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">direction_id</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-70"><a href="#GTFSNetwork.itineraries_to_geojson-70"><span class="linenos">70</span></a>                    <span class="s2">&quot;trip_id&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">trip_id</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-71"><a href="#GTFSNetwork.itineraries_to_geojson-71"><span class="linenos">71</span></a>                    <span class="s2">&quot;headsign&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">headsign</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-72"><a href="#GTFSNetwork.itineraries_to_geojson-72"><span class="linenos">72</span></a>                    <span class="s2">&quot;route_short_name&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">route_short_name</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-73"><a href="#GTFSNetwork.itineraries_to_geojson-73"><span class="linenos">73</span></a>                    <span class="s2">&quot;route_long_name&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">route_long_name</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-74"><a href="#GTFSNetwork.itineraries_to_geojson-74"><span class="linenos">74</span></a>                    <span class="s2">&quot;route_type&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">route_type</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-75"><a href="#GTFSNetwork.itineraries_to_geojson-75"><span class="linenos">75</span></a>                    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-76"><a href="#GTFSNetwork.itineraries_to_geojson-76"><span class="linenos">76</span></a>                    <span class="s2">&quot;text_color&quot;</span><span class="p">:</span> <span class="n">itinerary</span><span class="o">.</span><span class="n">text_color</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-77"><a href="#GTFSNetwork.itineraries_to_geojson-77"><span class="linenos">77</span></a>                <span class="p">}</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-78"><a href="#GTFSNetwork.itineraries_to_geojson-78"><span class="linenos">78</span></a>            <span class="p">}</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-79"><a href="#GTFSNetwork.itineraries_to_geojson-79"><span class="linenos">79</span></a>            <span class="n">features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-80"><a href="#GTFSNetwork.itineraries_to_geojson-80"><span class="linenos">80</span></a>        <span class="n">feature_collection</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-81"><a href="#GTFSNetwork.itineraries_to_geojson-81"><span class="linenos">81</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-82"><a href="#GTFSNetwork.itineraries_to_geojson-82"><span class="linenos">82</span></a>            <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="n">features</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-83"><a href="#GTFSNetwork.itineraries_to_geojson-83"><span class="linenos">83</span></a>        <span class="p">}</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-84"><a href="#GTFSNetwork.itineraries_to_geojson-84"><span class="linenos">84</span></a>        <span class="k">if</span> <span class="n">filepath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-85"><a href="#GTFSNetwork.itineraries_to_geojson-85"><span class="linenos">85</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-86"><a href="#GTFSNetwork.itineraries_to_geojson-86"><span class="linenos">86</span></a>                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">feature_collection</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-87"><a href="#GTFSNetwork.itineraries_to_geojson-87"><span class="linenos">87</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exported </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">features</span><span class="p">)</span><span class="si">}</span><span class="s2"> itineraries to </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="GTFSNetwork.itineraries_to_geojson-88"><a href="#GTFSNetwork.itineraries_to_geojson-88"><span class="linenos">88</span></a>
</span><span id="GTFSNetwork.itineraries_to_geojson-89"><a href="#GTFSNetwork.itineraries_to_geojson-89"><span class="linenos">89</span></a>        <span class="k">return</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Export each route's itinerary as a GeoJSON LineString, using stop sequences for each trip.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str):</strong>  The path to the output GeoJSON file. Optional, if defined it will be saved to this path.</li>
</ul>
</div>


                            </div>
                            <div id="GTFSNetwork.build_itineraries" class="classattr">
                                        <input id="GTFSNetwork.build_itineraries-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">build_itineraries</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">stops</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#Stop">Stop</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">stop_times</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#StopTime">StopTime</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">trips</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#Trip">Trip</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">routes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#Route">Route</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n">sum_gtfs_geojson</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">gtfs</span><span class="o">.</span><span class="n">itinerary</span><span class="o">.</span><span class="n">Itinerary</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="GTFSNetwork.build_itineraries-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GTFSNetwork.build_itineraries"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GTFSNetwork.build_itineraries-91"><a href="#GTFSNetwork.build_itineraries-91"><span class="linenos"> 91</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build_itineraries</span><span class="p">(</span>
</span><span id="GTFSNetwork.build_itineraries-92"><a href="#GTFSNetwork.build_itineraries-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-93"><a href="#GTFSNetwork.build_itineraries-93"><span class="linenos"> 93</span></a>        <span class="n">stops</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Stop</span><span class="p">],</span>
</span><span id="GTFSNetwork.build_itineraries-94"><a href="#GTFSNetwork.build_itineraries-94"><span class="linenos"> 94</span></a>        <span class="n">stop_times</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">StopTime</span><span class="p">],</span>
</span><span id="GTFSNetwork.build_itineraries-95"><a href="#GTFSNetwork.build_itineraries-95"><span class="linenos"> 95</span></a>        <span class="n">trips</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Trip</span><span class="p">],</span>
</span><span id="GTFSNetwork.build_itineraries-96"><a href="#GTFSNetwork.build_itineraries-96"><span class="linenos"> 96</span></a>        <span class="n">routes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Route</span><span class="p">]</span>
</span><span id="GTFSNetwork.build_itineraries-97"><a href="#GTFSNetwork.build_itineraries-97"><span class="linenos"> 97</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Itinerary</span><span class="p">]:</span>
</span><span id="GTFSNetwork.build_itineraries-98"><a href="#GTFSNetwork.build_itineraries-98"><span class="linenos"> 98</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GTFSNetwork.build_itineraries-99"><a href="#GTFSNetwork.build_itineraries-99"><span class="linenos"> 99</span></a><span class="sd">        Constructs a list of Itinerary objects from GTFS data.</span>
</span><span id="GTFSNetwork.build_itineraries-100"><a href="#GTFSNetwork.build_itineraries-100"><span class="linenos">100</span></a>
</span><span id="GTFSNetwork.build_itineraries-101"><a href="#GTFSNetwork.build_itineraries-101"><span class="linenos">101</span></a><span class="sd">        Args:</span>
</span><span id="GTFSNetwork.build_itineraries-102"><a href="#GTFSNetwork.build_itineraries-102"><span class="linenos">102</span></a><span class="sd">            stops (List[Stop]): List of Stop instances.</span>
</span><span id="GTFSNetwork.build_itineraries-103"><a href="#GTFSNetwork.build_itineraries-103"><span class="linenos">103</span></a><span class="sd">            stop_times (List[StopTime]): List of StopTime instances.</span>
</span><span id="GTFSNetwork.build_itineraries-104"><a href="#GTFSNetwork.build_itineraries-104"><span class="linenos">104</span></a><span class="sd">            trips (List[Trip]): List of Trip instances.</span>
</span><span id="GTFSNetwork.build_itineraries-105"><a href="#GTFSNetwork.build_itineraries-105"><span class="linenos">105</span></a><span class="sd">            routes (List[Route]): List of Route instances.</span>
</span><span id="GTFSNetwork.build_itineraries-106"><a href="#GTFSNetwork.build_itineraries-106"><span class="linenos">106</span></a>
</span><span id="GTFSNetwork.build_itineraries-107"><a href="#GTFSNetwork.build_itineraries-107"><span class="linenos">107</span></a><span class="sd">        Returns:</span>
</span><span id="GTFSNetwork.build_itineraries-108"><a href="#GTFSNetwork.build_itineraries-108"><span class="linenos">108</span></a><span class="sd">            List[Itinerary]: A list of Itinerary objects representing unique route and direction combinations.</span>
</span><span id="GTFSNetwork.build_itineraries-109"><a href="#GTFSNetwork.build_itineraries-109"><span class="linenos">109</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GTFSNetwork.build_itineraries-110"><a href="#GTFSNetwork.build_itineraries-110"><span class="linenos">110</span></a>        <span class="c1"># Map stop_id to Stop object for quick lookup</span>
</span><span id="GTFSNetwork.build_itineraries-111"><a href="#GTFSNetwork.build_itineraries-111"><span class="linenos">111</span></a>        <span class="n">stop_lookup</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Stop</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">stop</span><span class="o">.</span><span class="n">stop_id</span><span class="p">:</span> <span class="n">stop</span> <span class="k">for</span> <span class="n">stop</span> <span class="ow">in</span> <span class="n">stops</span><span class="p">}</span>
</span><span id="GTFSNetwork.build_itineraries-112"><a href="#GTFSNetwork.build_itineraries-112"><span class="linenos">112</span></a>
</span><span id="GTFSNetwork.build_itineraries-113"><a href="#GTFSNetwork.build_itineraries-113"><span class="linenos">113</span></a>        <span class="c1"># Group stop_times by trip_id</span>
</span><span id="GTFSNetwork.build_itineraries-114"><a href="#GTFSNetwork.build_itineraries-114"><span class="linenos">114</span></a>        <span class="n">trip_stop_times</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">StopTime</span><span class="p">]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</span><span id="GTFSNetwork.build_itineraries-115"><a href="#GTFSNetwork.build_itineraries-115"><span class="linenos">115</span></a>        <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="n">stop_times</span><span class="p">:</span>
</span><span id="GTFSNetwork.build_itineraries-116"><a href="#GTFSNetwork.build_itineraries-116"><span class="linenos">116</span></a>            <span class="n">trip_stop_times</span><span class="p">[</span><span class="n">st</span><span class="o">.</span><span class="n">trip_id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
</span><span id="GTFSNetwork.build_itineraries-117"><a href="#GTFSNetwork.build_itineraries-117"><span class="linenos">117</span></a>
</span><span id="GTFSNetwork.build_itineraries-118"><a href="#GTFSNetwork.build_itineraries-118"><span class="linenos">118</span></a>        <span class="c1"># Group trips by (route_id, direction_id) and select the first trip as representative</span>
</span><span id="GTFSNetwork.build_itineraries-119"><a href="#GTFSNetwork.build_itineraries-119"><span class="linenos">119</span></a>        <span class="n">trip_by_route_dir</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">Trip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="GTFSNetwork.build_itineraries-120"><a href="#GTFSNetwork.build_itineraries-120"><span class="linenos">120</span></a>        <span class="k">for</span> <span class="n">trip</span> <span class="ow">in</span> <span class="n">trips</span><span class="p">:</span>
</span><span id="GTFSNetwork.build_itineraries-121"><a href="#GTFSNetwork.build_itineraries-121"><span class="linenos">121</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">trip</span><span class="o">.</span><span class="n">route_id</span><span class="p">,</span> <span class="n">trip</span><span class="o">.</span><span class="n">direction_id</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="GTFSNetwork.build_itineraries-122"><a href="#GTFSNetwork.build_itineraries-122"><span class="linenos">122</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">trip_by_route_dir</span><span class="p">:</span>
</span><span id="GTFSNetwork.build_itineraries-123"><a href="#GTFSNetwork.build_itineraries-123"><span class="linenos">123</span></a>                <span class="n">trip_by_route_dir</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">trip</span>
</span><span id="GTFSNetwork.build_itineraries-124"><a href="#GTFSNetwork.build_itineraries-124"><span class="linenos">124</span></a>
</span><span id="GTFSNetwork.build_itineraries-125"><a href="#GTFSNetwork.build_itineraries-125"><span class="linenos">125</span></a>        <span class="c1"># Map route_id to Route object for metadata</span>
</span><span id="GTFSNetwork.build_itineraries-126"><a href="#GTFSNetwork.build_itineraries-126"><span class="linenos">126</span></a>        <span class="n">route_lookup</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Route</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="GTFSNetwork.build_itineraries-127"><a href="#GTFSNetwork.build_itineraries-127"><span class="linenos">127</span></a>            <span class="n">route</span><span class="o">.</span><span class="n">route_id</span><span class="p">:</span> <span class="n">route</span> <span class="k">for</span> <span class="n">route</span> <span class="ow">in</span> <span class="n">routes</span><span class="p">}</span>
</span><span id="GTFSNetwork.build_itineraries-128"><a href="#GTFSNetwork.build_itineraries-128"><span class="linenos">128</span></a>
</span><span id="GTFSNetwork.build_itineraries-129"><a href="#GTFSNetwork.build_itineraries-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Itinerary</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GTFSNetwork.build_itineraries-130"><a href="#GTFSNetwork.build_itineraries-130"><span class="linenos">130</span></a>
</span><span id="GTFSNetwork.build_itineraries-131"><a href="#GTFSNetwork.build_itineraries-131"><span class="linenos">131</span></a>        <span class="k">for</span> <span class="p">(</span><span class="n">route_id</span><span class="p">,</span> <span class="n">direction_id</span><span class="p">),</span> <span class="n">trip</span> <span class="ow">in</span> <span class="n">trip_by_route_dir</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="GTFSNetwork.build_itineraries-132"><a href="#GTFSNetwork.build_itineraries-132"><span class="linenos">132</span></a>            <span class="n">stop_times_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="GTFSNetwork.build_itineraries-133"><a href="#GTFSNetwork.build_itineraries-133"><span class="linenos">133</span></a>                <span class="n">trip_stop_times</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">trip</span><span class="o">.</span><span class="n">trip_id</span><span class="p">,</span> <span class="p">[]),</span>
</span><span id="GTFSNetwork.build_itineraries-134"><a href="#GTFSNetwork.build_itineraries-134"><span class="linenos">134</span></a>                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">st</span><span class="p">:</span> <span class="n">st</span><span class="o">.</span><span class="n">stop_sequence</span>
</span><span id="GTFSNetwork.build_itineraries-135"><a href="#GTFSNetwork.build_itineraries-135"><span class="linenos">135</span></a>            <span class="p">)</span>
</span><span id="GTFSNetwork.build_itineraries-136"><a href="#GTFSNetwork.build_itineraries-136"><span class="linenos">136</span></a>
</span><span id="GTFSNetwork.build_itineraries-137"><a href="#GTFSNetwork.build_itineraries-137"><span class="linenos">137</span></a>            <span class="c1"># Build the list of Stop instances for the itinerary</span>
</span><span id="GTFSNetwork.build_itineraries-138"><a href="#GTFSNetwork.build_itineraries-138"><span class="linenos">138</span></a>            <span class="n">itinerary_stops</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Stop</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GTFSNetwork.build_itineraries-139"><a href="#GTFSNetwork.build_itineraries-139"><span class="linenos">139</span></a>            <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="n">stop_times_list</span><span class="p">:</span>
</span><span id="GTFSNetwork.build_itineraries-140"><a href="#GTFSNetwork.build_itineraries-140"><span class="linenos">140</span></a>                <span class="n">stop</span> <span class="o">=</span> <span class="n">stop_lookup</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">stop_id</span><span class="p">)</span>
</span><span id="GTFSNetwork.build_itineraries-141"><a href="#GTFSNetwork.build_itineraries-141"><span class="linenos">141</span></a>                <span class="k">if</span> <span class="n">stop</span><span class="p">:</span>
</span><span id="GTFSNetwork.build_itineraries-142"><a href="#GTFSNetwork.build_itineraries-142"><span class="linenos">142</span></a>                    <span class="n">itinerary_stops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
</span><span id="GTFSNetwork.build_itineraries-143"><a href="#GTFSNetwork.build_itineraries-143"><span class="linenos">143</span></a>
</span><span id="GTFSNetwork.build_itineraries-144"><a href="#GTFSNetwork.build_itineraries-144"><span class="linenos">144</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">itinerary_stops</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GTFSNetwork.build_itineraries-145"><a href="#GTFSNetwork.build_itineraries-145"><span class="linenos">145</span></a>                <span class="k">continue</span>  <span class="c1"># Skip itineraries with insufficient stops</span>
</span><span id="GTFSNetwork.build_itineraries-146"><a href="#GTFSNetwork.build_itineraries-146"><span class="linenos">146</span></a>
</span><span id="GTFSNetwork.build_itineraries-147"><a href="#GTFSNetwork.build_itineraries-147"><span class="linenos">147</span></a>            <span class="n">route</span> <span class="o">=</span> <span class="n">route_lookup</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route_id</span><span class="p">)</span>
</span><span id="GTFSNetwork.build_itineraries-148"><a href="#GTFSNetwork.build_itineraries-148"><span class="linenos">148</span></a>
</span><span id="GTFSNetwork.build_itineraries-149"><a href="#GTFSNetwork.build_itineraries-149"><span class="linenos">149</span></a>            <span class="n">itinerary</span> <span class="o">=</span> <span class="n">Itinerary</span><span class="p">(</span>
</span><span id="GTFSNetwork.build_itineraries-150"><a href="#GTFSNetwork.build_itineraries-150"><span class="linenos">150</span></a>                <span class="n">route_id</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_id</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="n">route_id</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-151"><a href="#GTFSNetwork.build_itineraries-151"><span class="linenos">151</span></a>                <span class="n">direction_id</span><span class="o">=</span><span class="n">direction_id</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-152"><a href="#GTFSNetwork.build_itineraries-152"><span class="linenos">152</span></a>                <span class="n">trip_id</span><span class="o">=</span><span class="n">trip</span><span class="o">.</span><span class="n">trip_id</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-153"><a href="#GTFSNetwork.build_itineraries-153"><span class="linenos">153</span></a>                <span class="n">headsign</span><span class="o">=</span><span class="n">trip</span><span class="o">.</span><span class="n">trip_headsign</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-154"><a href="#GTFSNetwork.build_itineraries-154"><span class="linenos">154</span></a>                <span class="n">route_short_name</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_short_name</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-155"><a href="#GTFSNetwork.build_itineraries-155"><span class="linenos">155</span></a>                <span class="n">route_long_name</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_long_name</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-156"><a href="#GTFSNetwork.build_itineraries-156"><span class="linenos">156</span></a>                <span class="n">route_type</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_type</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-157"><a href="#GTFSNetwork.build_itineraries-157"><span class="linenos">157</span></a>                <span class="n">color</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_color</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-158"><a href="#GTFSNetwork.build_itineraries-158"><span class="linenos">158</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="n">route</span><span class="o">.</span><span class="n">route_text_color</span> <span class="k">if</span> <span class="n">route</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GTFSNetwork.build_itineraries-159"><a href="#GTFSNetwork.build_itineraries-159"><span class="linenos">159</span></a>                <span class="n">stops</span><span class="o">=</span><span class="n">itinerary_stops</span>
</span><span id="GTFSNetwork.build_itineraries-160"><a href="#GTFSNetwork.build_itineraries-160"><span class="linenos">160</span></a>            <span class="p">)</span>
</span><span id="GTFSNetwork.build_itineraries-161"><a href="#GTFSNetwork.build_itineraries-161"><span class="linenos">161</span></a>
</span><span id="GTFSNetwork.build_itineraries-162"><a href="#GTFSNetwork.build_itineraries-162"><span class="linenos">162</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">itinerary</span><span class="p">)</span>
</span><span id="GTFSNetwork.build_itineraries-163"><a href="#GTFSNetwork.build_itineraries-163"><span class="linenos">163</span></a>
</span><span id="GTFSNetwork.build_itineraries-164"><a href="#GTFSNetwork.build_itineraries-164"><span class="linenos">164</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">itineraries</span>
</span></pre></div>


            <div class="docstring"><p>Constructs a list of Itinerary objects from GTFS data.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>stops (List[Stop]):</strong>  List of Stop instances.</li>
<li><strong>stop_times (List[StopTime]):</strong>  List of StopTime instances.</li>
<li><strong>trips (List[Trip]):</strong>  List of Trip instances.</li>
<li><strong>routes (List[Route]):</strong>  List of Route instances.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>List[Itinerary]: A list of Itinerary objects representing unique route and direction combinations.</p>
</blockquote>
</div>


                            </div>
                            <div id="GTFSNetwork.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#GTFSNetwork.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="StopTime">
                            <input id="StopTime-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">StopTime</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="StopTime-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StopTime"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StopTime-7"><a href="#StopTime-7"><span class="linenos"> 7</span></a><span class="k">class</span><span class="w"> </span><span class="nc">StopTime</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="StopTime-8"><a href="#StopTime-8"><span class="linenos"> 8</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="StopTime-9"><a href="#StopTime-9"><span class="linenos"> 9</span></a><span class="sd">    Represents a single stop time for a trip in the GTFS feed.</span>
</span><span id="StopTime-10"><a href="#StopTime-10"><span class="linenos">10</span></a>
</span><span id="StopTime-11"><a href="#StopTime-11"><span class="linenos">11</span></a><span class="sd">    Attributes:</span>
</span><span id="StopTime-12"><a href="#StopTime-12"><span class="linenos">12</span></a><span class="sd">        trip_id: Identifier for the trip.</span>
</span><span id="StopTime-13"><a href="#StopTime-13"><span class="linenos">13</span></a><span class="sd">        arrival_time: Scheduled arrival time at the stop (HH:MM:SS).</span>
</span><span id="StopTime-14"><a href="#StopTime-14"><span class="linenos">14</span></a><span class="sd">        departure_time: Scheduled departure time from the stop (HH:MM:SS).</span>
</span><span id="StopTime-15"><a href="#StopTime-15"><span class="linenos">15</span></a><span class="sd">        stop_id: Identifier for the stop.</span>
</span><span id="StopTime-16"><a href="#StopTime-16"><span class="linenos">16</span></a><span class="sd">        stop_sequence: Order of the stop for the trip.</span>
</span><span id="StopTime-17"><a href="#StopTime-17"><span class="linenos">17</span></a><span class="sd">        stop_headsign: (Optional) Text shown to riders about the stop.</span>
</span><span id="StopTime-18"><a href="#StopTime-18"><span class="linenos">18</span></a><span class="sd">        pickup_type: (Optional) Pickup method (0=regular, 1=none, etc.).</span>
</span><span id="StopTime-19"><a href="#StopTime-19"><span class="linenos">19</span></a><span class="sd">        drop_off_type: (Optional) Drop-off method (0=regular, 1=none, etc.).</span>
</span><span id="StopTime-20"><a href="#StopTime-20"><span class="linenos">20</span></a><span class="sd">        shape_dist_traveled: (Optional) Distance traveled along the shape to this stop.</span>
</span><span id="StopTime-21"><a href="#StopTime-21"><span class="linenos">21</span></a><span class="sd">        timepoint: (Optional) Indicates if the time is exact or approximate.</span>
</span><span id="StopTime-22"><a href="#StopTime-22"><span class="linenos">22</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="StopTime-23"><a href="#StopTime-23"><span class="linenos">23</span></a>    <span class="n">trip_id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="StopTime-24"><a href="#StopTime-24"><span class="linenos">24</span></a>    <span class="n">arrival_time</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="StopTime-25"><a href="#StopTime-25"><span class="linenos">25</span></a>    <span class="n">departure_time</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="StopTime-26"><a href="#StopTime-26"><span class="linenos">26</span></a>    <span class="n">stop_id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="StopTime-27"><a href="#StopTime-27"><span class="linenos">27</span></a>    <span class="n">stop_sequence</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="StopTime-28"><a href="#StopTime-28"><span class="linenos">28</span></a>    <span class="n">stop_headsign</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="StopTime-29"><a href="#StopTime-29"><span class="linenos">29</span></a>    <span class="n">pickup_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="StopTime-30"><a href="#StopTime-30"><span class="linenos">30</span></a>    <span class="n">drop_off_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="StopTime-31"><a href="#StopTime-31"><span class="linenos">31</span></a>    <span class="n">shape_dist_traveled</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="StopTime-32"><a href="#StopTime-32"><span class="linenos">32</span></a>    <span class="n">timepoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Represents a single stop time for a trip in the GTFS feed.</p>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>trip_id:</strong>  Identifier for the trip.</li>
<li><strong>arrival_time:</strong>  Scheduled arrival time at the stop (HH:MM:SS).</li>
<li><strong>departure_time:</strong>  Scheduled departure time from the stop (HH:MM:SS).</li>
<li><strong>stop_id:</strong>  Identifier for the stop.</li>
<li><strong>stop_sequence:</strong>  Order of the stop for the trip.</li>
<li><strong>stop_headsign:</strong>  (Optional) Text shown to riders about the stop.</li>
<li><strong>pickup_type:</strong>  (Optional) Pickup method (0=regular, 1=none, etc.).</li>
<li><strong>drop_off_type:</strong>  (Optional) Drop-off method (0=regular, 1=none, etc.).</li>
<li><strong>shape_dist_traveled:</strong>  (Optional) Distance traveled along the shape to this stop.</li>
<li><strong>timepoint:</strong>  (Optional) Indicates if the time is exact or approximate.</li>
</ul>
</div>


                            <div id="StopTime.trip_id" class="classattr">
                                <div class="attr variable">
            <span class="name">trip_id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#StopTime.trip_id"></a>
    
    

                            </div>
                            <div id="StopTime.arrival_time" class="classattr">
                                <div class="attr variable">
            <span class="name">arrival_time</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#StopTime.arrival_time"></a>
    
    

                            </div>
                            <div id="StopTime.departure_time" class="classattr">
                                <div class="attr variable">
            <span class="name">departure_time</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#StopTime.departure_time"></a>
    
    

                            </div>
                            <div id="StopTime.stop_id" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#StopTime.stop_id"></a>
    
    

                            </div>
                            <div id="StopTime.stop_sequence" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_sequence</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#StopTime.stop_sequence"></a>
    
    

                            </div>
                            <div id="StopTime.stop_headsign" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_headsign</span><span class="annotation">: Optional[str]</span>

        
    </div>
    <a class="headerlink" href="#StopTime.stop_headsign"></a>
    
    

                            </div>
                            <div id="StopTime.pickup_type" class="classattr">
                                <div class="attr variable">
            <span class="name">pickup_type</span><span class="annotation">: Optional[int]</span>

        
    </div>
    <a class="headerlink" href="#StopTime.pickup_type"></a>
    
    

                            </div>
                            <div id="StopTime.drop_off_type" class="classattr">
                                <div class="attr variable">
            <span class="name">drop_off_type</span><span class="annotation">: Optional[int]</span>

        
    </div>
    <a class="headerlink" href="#StopTime.drop_off_type"></a>
    
    

                            </div>
                            <div id="StopTime.shape_dist_traveled" class="classattr">
                                <div class="attr variable">
            <span class="name">shape_dist_traveled</span><span class="annotation">: Optional[float]</span>

        
    </div>
    <a class="headerlink" href="#StopTime.shape_dist_traveled"></a>
    
    

                            </div>
                            <div id="StopTime.timepoint" class="classattr">
                                <div class="attr variable">
            <span class="name">timepoint</span><span class="annotation">: Optional[int]</span>

        
    </div>
    <a class="headerlink" href="#StopTime.timepoint"></a>
    
    

                            </div>
                            <div id="StopTime.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#StopTime.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="HexGrid">
                            <input id="HexGrid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">HexGrid</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="HexGrid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HexGrid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HexGrid-12"><a href="#HexGrid-12"><span class="linenos">12</span></a><span class="k">class</span><span class="w"> </span><span class="nc">HexGrid</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="HexGrid-13"><a href="#HexGrid-13"><span class="linenos">13</span></a>    <span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;H3 resolution level&quot;</span><span class="p">)</span>
</span><span id="HexGrid-14"><a href="#HexGrid-14"><span class="linenos">14</span></a>    <span class="n">cells</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">HexCell</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of hexagonal cells&quot;</span><span class="p">)</span>
</span><span id="HexGrid-15"><a href="#HexGrid-15"><span class="linenos">15</span></a>    
</span><span id="HexGrid-16"><a href="#HexGrid-16"><span class="linenos">16</span></a>    <span class="nd">@classmethod</span>
</span><span id="HexGrid-17"><a href="#HexGrid-17"><span class="linenos">17</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_geodataframe</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">gdf</span><span class="p">:</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;HexGrid&quot;</span><span class="p">:</span>
</span><span id="HexGrid-18"><a href="#HexGrid-18"><span class="linenos">18</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexGrid-19"><a href="#HexGrid-19"><span class="linenos">19</span></a><span class="sd">        Create a HexGrid instance from a GeoDataFrame of point geometries.</span>
</span><span id="HexGrid-20"><a href="#HexGrid-20"><span class="linenos">20</span></a>
</span><span id="HexGrid-21"><a href="#HexGrid-21"><span class="linenos">21</span></a><span class="sd">        Args:</span>
</span><span id="HexGrid-22"><a href="#HexGrid-22"><span class="linenos">22</span></a><span class="sd">            gdf: GeoDataFrame containing point geometries.</span>
</span><span id="HexGrid-23"><a href="#HexGrid-23"><span class="linenos">23</span></a><span class="sd">            resolution: H3 resolution level.</span>
</span><span id="HexGrid-24"><a href="#HexGrid-24"><span class="linenos">24</span></a>
</span><span id="HexGrid-25"><a href="#HexGrid-25"><span class="linenos">25</span></a><span class="sd">        Returns:</span>
</span><span id="HexGrid-26"><a href="#HexGrid-26"><span class="linenos">26</span></a><span class="sd">            HexGrid instance.</span>
</span><span id="HexGrid-27"><a href="#HexGrid-27"><span class="linenos">27</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexGrid-28"><a href="#HexGrid-28"><span class="linenos">28</span></a>        <span class="k">if</span> <span class="n">gdf</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
</span><span id="HexGrid-29"><a href="#HexGrid-29"><span class="linenos">29</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The GeoDataFrame is empty.&quot;</span><span class="p">)</span>
</span><span id="HexGrid-30"><a href="#HexGrid-30"><span class="linenos">30</span></a>        
</span><span id="HexGrid-31"><a href="#HexGrid-31"><span class="linenos">31</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Generating hex grid, gdf containts h3 ids:&#39;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;h3_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</span><span id="HexGrid-32"><a href="#HexGrid-32"><span class="linenos">32</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;grid contains the following geometries:&#39;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
</span><span id="HexGrid-33"><a href="#HexGrid-33"><span class="linenos">33</span></a>
</span><span id="HexGrid-34"><a href="#HexGrid-34"><span class="linenos">34</span></a>        <span class="c1"># Create a bounding polygon (convex hull with a small buffer)</span>
</span><span id="HexGrid-35"><a href="#HexGrid-35"><span class="linenos">35</span></a>        <span class="n">bounding_polygon</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">unary_union</span><span class="o">.</span><span class="n">convex_hull</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>  <span class="c1"># ~1km buffer</span>
</span><span id="HexGrid-36"><a href="#HexGrid-36"><span class="linenos">36</span></a>
</span><span id="HexGrid-37"><a href="#HexGrid-37"><span class="linenos">37</span></a>        <span class="c1"># Generate H3 cell indices covering the bounding polygon</span>
</span><span id="HexGrid-38"><a href="#HexGrid-38"><span class="linenos">38</span></a>        <span class="n">hex_ids</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">polyfill</span><span class="p">(</span><span class="n">bounding_polygon</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">,</span> <span class="n">resolution</span><span class="p">)</span>
</span><span id="HexGrid-39"><a href="#HexGrid-39"><span class="linenos">39</span></a>
</span><span id="HexGrid-40"><a href="#HexGrid-40"><span class="linenos">40</span></a>        <span class="c1"># Create HexCell instances</span>
</span><span id="HexGrid-41"><a href="#HexGrid-41"><span class="linenos">41</span></a>        <span class="n">cells</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HexGrid-42"><a href="#HexGrid-42"><span class="linenos">42</span></a>        <span class="k">for</span> <span class="n">h3_id</span> <span class="ow">in</span> <span class="n">hex_ids</span><span class="p">:</span>
</span><span id="HexGrid-43"><a href="#HexGrid-43"><span class="linenos">43</span></a>            <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">cell_to_latlng</span><span class="p">(</span><span class="n">h3_id</span><span class="p">)</span>
</span><span id="HexGrid-44"><a href="#HexGrid-44"><span class="linenos">44</span></a>            <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
</span><span id="HexGrid-45"><a href="#HexGrid-45"><span class="linenos">45</span></a>            <span class="n">boundary</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">cell_to_boundary</span><span class="p">(</span><span class="n">h3_id</span><span class="p">)</span>
</span><span id="HexGrid-46"><a href="#HexGrid-46"><span class="linenos">46</span></a>            <span class="n">polygon</span> <span class="o">=</span> <span class="p">[(</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">boundary</span><span class="p">]</span>
</span><span id="HexGrid-47"><a href="#HexGrid-47"><span class="linenos">47</span></a>            <span class="n">cells</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">HexCell</span><span class="p">(</span><span class="n">h3_id</span><span class="o">=</span><span class="n">h3_id</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">polygon</span><span class="o">=</span><span class="n">polygon</span><span class="p">))</span>
</span><span id="HexGrid-48"><a href="#HexGrid-48"><span class="linenos">48</span></a>
</span><span id="HexGrid-49"><a href="#HexGrid-49"><span class="linenos">49</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span> <span class="n">cells</span><span class="o">=</span><span class="n">cells</span><span class="p">)</span>
</span><span id="HexGrid-50"><a href="#HexGrid-50"><span class="linenos">50</span></a>
</span><span id="HexGrid-51"><a href="#HexGrid-51"><span class="linenos">51</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_geodataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">:</span>
</span><span id="HexGrid-52"><a href="#HexGrid-52"><span class="linenos">52</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexGrid-53"><a href="#HexGrid-53"><span class="linenos">53</span></a><span class="sd">        Convert the HexGrid instance to a GeoDataFrame.</span>
</span><span id="HexGrid-54"><a href="#HexGrid-54"><span class="linenos">54</span></a>
</span><span id="HexGrid-55"><a href="#HexGrid-55"><span class="linenos">55</span></a><span class="sd">        Returns:</span>
</span><span id="HexGrid-56"><a href="#HexGrid-56"><span class="linenos">56</span></a><span class="sd">            GeoDataFrame with hex cell geometries and identifiers.</span>
</span><span id="HexGrid-57"><a href="#HexGrid-57"><span class="linenos">57</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexGrid-58"><a href="#HexGrid-58"><span class="linenos">58</span></a>        <span class="n">hex_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">cell</span><span class="o">.</span><span class="n">h3_id</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">]</span>
</span><span id="HexGrid-59"><a href="#HexGrid-59"><span class="linenos">59</span></a>        <span class="n">polygons</span> <span class="o">=</span> <span class="p">[</span><span class="n">Polygon</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">polygon</span><span class="p">)</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">]</span>
</span><span id="HexGrid-60"><a href="#HexGrid-60"><span class="linenos">60</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span><span class="s2">&quot;h3_id&quot;</span><span class="p">:</span> <span class="n">hex_ids</span><span class="p">,</span> <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">polygons</span><span class="p">},</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
</span><span id="HexGrid-61"><a href="#HexGrid-61"><span class="linenos">61</span></a>        <span class="k">return</span> <span class="n">gdf</span>
</span><span id="HexGrid-62"><a href="#HexGrid-62"><span class="linenos">62</span></a>
</span><span id="HexGrid-63"><a href="#HexGrid-63"><span class="linenos">63</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="HexGrid-64"><a href="#HexGrid-64"><span class="linenos">64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Export the grid to a GeoJSON file.&quot;&quot;&quot;</span>
</span><span id="HexGrid-65"><a href="#HexGrid-65"><span class="linenos">65</span></a>        
</span><span id="HexGrid-66"><a href="#HexGrid-66"><span class="linenos">66</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_geodataframe</span><span class="p">()</span>
</span><span id="HexGrid-67"><a href="#HexGrid-67"><span class="linenos">67</span></a>        <span class="k">if</span> <span class="n">filepath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HexGrid-68"><a href="#HexGrid-68"><span class="linenos">68</span></a>            <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span><span id="HexGrid-69"><a href="#HexGrid-69"><span class="linenos">69</span></a>        
</span><span id="HexGrid-70"><a href="#HexGrid-70"><span class="linenos">70</span></a>        <span class="k">return</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Base class for all GTFS models, providing shared utility methods.</p>
</div>


                            <div id="HexGrid.resolution" class="classattr">
                                <div class="attr variable">
            <span class="name">resolution</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#HexGrid.resolution"></a>
    
    

                            </div>
                            <div id="HexGrid.cells" class="classattr">
                                <div class="attr variable">
            <span class="name">cells</span><span class="annotation">: List[<a href="#HexCell">HexCell</a>]</span>

        
    </div>
    <a class="headerlink" href="#HexGrid.cells"></a>
    
    

                            </div>
                            <div id="HexGrid.from_geodataframe" class="classattr">
                                        <input id="HexGrid.from_geodataframe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_geodataframe</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">gdf</span><span class="p">:</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">geodataframe</span><span class="o">.</span><span class="n">GeoDataFrame</span>,</span><span class="param">	<span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="n"><a href="#HexGrid">HexGrid</a></span>:</span></span>

                <label class="view-source-button" for="HexGrid.from_geodataframe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HexGrid.from_geodataframe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HexGrid.from_geodataframe-16"><a href="#HexGrid.from_geodataframe-16"><span class="linenos">16</span></a>    <span class="nd">@classmethod</span>
</span><span id="HexGrid.from_geodataframe-17"><a href="#HexGrid.from_geodataframe-17"><span class="linenos">17</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_geodataframe</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">gdf</span><span class="p">:</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;HexGrid&quot;</span><span class="p">:</span>
</span><span id="HexGrid.from_geodataframe-18"><a href="#HexGrid.from_geodataframe-18"><span class="linenos">18</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexGrid.from_geodataframe-19"><a href="#HexGrid.from_geodataframe-19"><span class="linenos">19</span></a><span class="sd">        Create a HexGrid instance from a GeoDataFrame of point geometries.</span>
</span><span id="HexGrid.from_geodataframe-20"><a href="#HexGrid.from_geodataframe-20"><span class="linenos">20</span></a>
</span><span id="HexGrid.from_geodataframe-21"><a href="#HexGrid.from_geodataframe-21"><span class="linenos">21</span></a><span class="sd">        Args:</span>
</span><span id="HexGrid.from_geodataframe-22"><a href="#HexGrid.from_geodataframe-22"><span class="linenos">22</span></a><span class="sd">            gdf: GeoDataFrame containing point geometries.</span>
</span><span id="HexGrid.from_geodataframe-23"><a href="#HexGrid.from_geodataframe-23"><span class="linenos">23</span></a><span class="sd">            resolution: H3 resolution level.</span>
</span><span id="HexGrid.from_geodataframe-24"><a href="#HexGrid.from_geodataframe-24"><span class="linenos">24</span></a>
</span><span id="HexGrid.from_geodataframe-25"><a href="#HexGrid.from_geodataframe-25"><span class="linenos">25</span></a><span class="sd">        Returns:</span>
</span><span id="HexGrid.from_geodataframe-26"><a href="#HexGrid.from_geodataframe-26"><span class="linenos">26</span></a><span class="sd">            HexGrid instance.</span>
</span><span id="HexGrid.from_geodataframe-27"><a href="#HexGrid.from_geodataframe-27"><span class="linenos">27</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexGrid.from_geodataframe-28"><a href="#HexGrid.from_geodataframe-28"><span class="linenos">28</span></a>        <span class="k">if</span> <span class="n">gdf</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
</span><span id="HexGrid.from_geodataframe-29"><a href="#HexGrid.from_geodataframe-29"><span class="linenos">29</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The GeoDataFrame is empty.&quot;</span><span class="p">)</span>
</span><span id="HexGrid.from_geodataframe-30"><a href="#HexGrid.from_geodataframe-30"><span class="linenos">30</span></a>        
</span><span id="HexGrid.from_geodataframe-31"><a href="#HexGrid.from_geodataframe-31"><span class="linenos">31</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Generating hex grid, gdf containts h3 ids:&#39;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;h3_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</span><span id="HexGrid.from_geodataframe-32"><a href="#HexGrid.from_geodataframe-32"><span class="linenos">32</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;grid contains the following geometries:&#39;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
</span><span id="HexGrid.from_geodataframe-33"><a href="#HexGrid.from_geodataframe-33"><span class="linenos">33</span></a>
</span><span id="HexGrid.from_geodataframe-34"><a href="#HexGrid.from_geodataframe-34"><span class="linenos">34</span></a>        <span class="c1"># Create a bounding polygon (convex hull with a small buffer)</span>
</span><span id="HexGrid.from_geodataframe-35"><a href="#HexGrid.from_geodataframe-35"><span class="linenos">35</span></a>        <span class="n">bounding_polygon</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">unary_union</span><span class="o">.</span><span class="n">convex_hull</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>  <span class="c1"># ~1km buffer</span>
</span><span id="HexGrid.from_geodataframe-36"><a href="#HexGrid.from_geodataframe-36"><span class="linenos">36</span></a>
</span><span id="HexGrid.from_geodataframe-37"><a href="#HexGrid.from_geodataframe-37"><span class="linenos">37</span></a>        <span class="c1"># Generate H3 cell indices covering the bounding polygon</span>
</span><span id="HexGrid.from_geodataframe-38"><a href="#HexGrid.from_geodataframe-38"><span class="linenos">38</span></a>        <span class="n">hex_ids</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">polyfill</span><span class="p">(</span><span class="n">bounding_polygon</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">,</span> <span class="n">resolution</span><span class="p">)</span>
</span><span id="HexGrid.from_geodataframe-39"><a href="#HexGrid.from_geodataframe-39"><span class="linenos">39</span></a>
</span><span id="HexGrid.from_geodataframe-40"><a href="#HexGrid.from_geodataframe-40"><span class="linenos">40</span></a>        <span class="c1"># Create HexCell instances</span>
</span><span id="HexGrid.from_geodataframe-41"><a href="#HexGrid.from_geodataframe-41"><span class="linenos">41</span></a>        <span class="n">cells</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="HexGrid.from_geodataframe-42"><a href="#HexGrid.from_geodataframe-42"><span class="linenos">42</span></a>        <span class="k">for</span> <span class="n">h3_id</span> <span class="ow">in</span> <span class="n">hex_ids</span><span class="p">:</span>
</span><span id="HexGrid.from_geodataframe-43"><a href="#HexGrid.from_geodataframe-43"><span class="linenos">43</span></a>            <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">cell_to_latlng</span><span class="p">(</span><span class="n">h3_id</span><span class="p">)</span>
</span><span id="HexGrid.from_geodataframe-44"><a href="#HexGrid.from_geodataframe-44"><span class="linenos">44</span></a>            <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
</span><span id="HexGrid.from_geodataframe-45"><a href="#HexGrid.from_geodataframe-45"><span class="linenos">45</span></a>            <span class="n">boundary</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">cell_to_boundary</span><span class="p">(</span><span class="n">h3_id</span><span class="p">)</span>
</span><span id="HexGrid.from_geodataframe-46"><a href="#HexGrid.from_geodataframe-46"><span class="linenos">46</span></a>            <span class="n">polygon</span> <span class="o">=</span> <span class="p">[(</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">boundary</span><span class="p">]</span>
</span><span id="HexGrid.from_geodataframe-47"><a href="#HexGrid.from_geodataframe-47"><span class="linenos">47</span></a>            <span class="n">cells</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">HexCell</span><span class="p">(</span><span class="n">h3_id</span><span class="o">=</span><span class="n">h3_id</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">polygon</span><span class="o">=</span><span class="n">polygon</span><span class="p">))</span>
</span><span id="HexGrid.from_geodataframe-48"><a href="#HexGrid.from_geodataframe-48"><span class="linenos">48</span></a>
</span><span id="HexGrid.from_geodataframe-49"><a href="#HexGrid.from_geodataframe-49"><span class="linenos">49</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span> <span class="n">cells</span><span class="o">=</span><span class="n">cells</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create a HexGrid instance from a GeoDataFrame of point geometries.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>gdf:</strong>  GeoDataFrame containing point geometries.</li>
<li><strong>resolution:</strong>  H3 resolution level.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>HexGrid instance.</p>
</blockquote>
</div>


                            </div>
                            <div id="HexGrid.to_geodataframe" class="classattr">
                                        <input id="HexGrid.to_geodataframe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_geodataframe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">geopandas</span><span class="o">.</span><span class="n">geodataframe</span><span class="o">.</span><span class="n">GeoDataFrame</span>:</span></span>

                <label class="view-source-button" for="HexGrid.to_geodataframe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HexGrid.to_geodataframe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HexGrid.to_geodataframe-51"><a href="#HexGrid.to_geodataframe-51"><span class="linenos">51</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_geodataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">:</span>
</span><span id="HexGrid.to_geodataframe-52"><a href="#HexGrid.to_geodataframe-52"><span class="linenos">52</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HexGrid.to_geodataframe-53"><a href="#HexGrid.to_geodataframe-53"><span class="linenos">53</span></a><span class="sd">        Convert the HexGrid instance to a GeoDataFrame.</span>
</span><span id="HexGrid.to_geodataframe-54"><a href="#HexGrid.to_geodataframe-54"><span class="linenos">54</span></a>
</span><span id="HexGrid.to_geodataframe-55"><a href="#HexGrid.to_geodataframe-55"><span class="linenos">55</span></a><span class="sd">        Returns:</span>
</span><span id="HexGrid.to_geodataframe-56"><a href="#HexGrid.to_geodataframe-56"><span class="linenos">56</span></a><span class="sd">            GeoDataFrame with hex cell geometries and identifiers.</span>
</span><span id="HexGrid.to_geodataframe-57"><a href="#HexGrid.to_geodataframe-57"><span class="linenos">57</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HexGrid.to_geodataframe-58"><a href="#HexGrid.to_geodataframe-58"><span class="linenos">58</span></a>        <span class="n">hex_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">cell</span><span class="o">.</span><span class="n">h3_id</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">]</span>
</span><span id="HexGrid.to_geodataframe-59"><a href="#HexGrid.to_geodataframe-59"><span class="linenos">59</span></a>        <span class="n">polygons</span> <span class="o">=</span> <span class="p">[</span><span class="n">Polygon</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">polygon</span><span class="p">)</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">]</span>
</span><span id="HexGrid.to_geodataframe-60"><a href="#HexGrid.to_geodataframe-60"><span class="linenos">60</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span><span class="s2">&quot;h3_id&quot;</span><span class="p">:</span> <span class="n">hex_ids</span><span class="p">,</span> <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">polygons</span><span class="p">},</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
</span><span id="HexGrid.to_geodataframe-61"><a href="#HexGrid.to_geodataframe-61"><span class="linenos">61</span></a>        <span class="k">return</span> <span class="n">gdf</span>
</span></pre></div>


            <div class="docstring"><p>Convert the HexGrid instance to a GeoDataFrame.</p>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>GeoDataFrame with hex cell geometries and identifiers.</p>
</blockquote>
</div>


                            </div>
                            <div id="HexGrid.to_geojson" class="classattr">
                                        <input id="HexGrid.to_geojson-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_geojson</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="HexGrid.to_geojson-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HexGrid.to_geojson"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HexGrid.to_geojson-63"><a href="#HexGrid.to_geojson-63"><span class="linenos">63</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="HexGrid.to_geojson-64"><a href="#HexGrid.to_geojson-64"><span class="linenos">64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Export the grid to a GeoJSON file.&quot;&quot;&quot;</span>
</span><span id="HexGrid.to_geojson-65"><a href="#HexGrid.to_geojson-65"><span class="linenos">65</span></a>        
</span><span id="HexGrid.to_geojson-66"><a href="#HexGrid.to_geojson-66"><span class="linenos">66</span></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_geodataframe</span><span class="p">()</span>
</span><span id="HexGrid.to_geojson-67"><a href="#HexGrid.to_geojson-67"><span class="linenos">67</span></a>        <span class="k">if</span> <span class="n">filepath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="HexGrid.to_geojson-68"><a href="#HexGrid.to_geojson-68"><span class="linenos">68</span></a>            <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</span><span id="HexGrid.to_geojson-69"><a href="#HexGrid.to_geojson-69"><span class="linenos">69</span></a>        
</span><span id="HexGrid.to_geojson-70"><a href="#HexGrid.to_geojson-70"><span class="linenos">70</span></a>        <span class="k">return</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Export the grid to a GeoJSON file.</p>
</div>


                            </div>
                            <div id="HexGrid.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#HexGrid.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="HexCell">
                            <input id="HexCell-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">HexCell</span><wbr>(<span class="base">sum_gtfs_geojson.models.sum_gtfs_base_model.SumGtfsBaseModel</span>):

                <label class="view-source-button" for="HexCell-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HexCell"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HexCell-7"><a href="#HexCell-7"><span class="linenos"> 7</span></a><span class="k">class</span><span class="w"> </span><span class="nc">HexCell</span><span class="p">(</span><span class="n">SumGtfsBaseModel</span><span class="p">):</span>
</span><span id="HexCell-8"><a href="#HexCell-8"><span class="linenos"> 8</span></a>    <span class="n">h3_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Unique H3 cell identifier&quot;</span><span class="p">)</span>
</span><span id="HexCell-9"><a href="#HexCell-9"><span class="linenos"> 9</span></a>    <span class="n">center</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Center point of the hex cell as (longitude, latitude)&quot;</span><span class="p">)</span>
</span><span id="HexCell-10"><a href="#HexCell-10"><span class="linenos">10</span></a>    <span class="n">polygon</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of (longitude, latitude) tuples defining the hexagon boundary&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Base class for all GTFS models, providing shared utility methods.</p>
</div>


                            <div id="HexCell.h3_id" class="classattr">
                                <div class="attr variable">
            <span class="name">h3_id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#HexCell.h3_id"></a>
    
    

                            </div>
                            <div id="HexCell.center" class="classattr">
                                <div class="attr variable">
            <span class="name">center</span><span class="annotation">: Tuple[float, float]</span>

        
    </div>
    <a class="headerlink" href="#HexCell.center"></a>
    
    

                            </div>
                            <div id="HexCell.polygon" class="classattr">
                                <div class="attr variable">
            <span class="name">polygon</span><span class="annotation">: List[Tuple[float, float]]</span>

        
    </div>
    <a class="headerlink" href="#HexCell.polygon"></a>
    
    

                            </div>
                            <div id="HexCell.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#HexCell.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
    </main>
</body>
</html>